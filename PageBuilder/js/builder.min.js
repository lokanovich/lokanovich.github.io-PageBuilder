"use strict";function removePreloader(){var a=document.querySelector(".supra-preloader"),b=document.querySelector("body");b.classList.add("run"),setTimeout(function(){a&&a.parentElement&&a.parentElement.removeChild(a)},1600),AOS.init({easing:"ease-in-out-sine"})}function firstUp(a){return a.charAt(0).toUpperCase()+a.slice(1)}function firstDown(a){return a.charAt(0).toLowerCase()+a.slice(1)}function replaceSpace(a){return a.replace(/\s/gi,"_")}function toPageName(a){return a.replace(/_/gi," ")}function cloneArray(a){return a.slice(0,a.length)}function htmlencode(a){return a.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})}function htmldecode(a){return a.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,function(a){return{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}[a]})}function addSleshes(a){return a.replace(/[\*\(\)]/g,function(a){return{"*":"\\*","(":"\\(",")":"\\)"}[a]})}function clearTimeStamp(a){var b=new RegExp("\\?t=[0-9]*","i");return b.test(a)&&(a=a.replace(b,"")),a}function getDomPath(a){for(var b=[];null!=a.parentNode&&!a.classList.contains("section-item");){var c=0,d=0;if(!a.classList.contains("buttons-control")){var e=a;a.parentElement.classList.contains("buttons-control")&&(e=a.parentElement);for(var f=0;f<e.parentNode.childNodes.length;f++){var g=e.parentNode.childNodes[f];g.nodeName==e.nodeName&&(g===e&&(d=c),c++)}a.hasAttribute("id")&&""!=a.id?b.unshift(a.nodeName.toLowerCase()+"#"+a.id):c>1?b.unshift(a.nodeName.toLowerCase()+":nth-child("+(d+1)+")"):b.unshift(a.nodeName.toLowerCase())}a=a.parentNode}return b.join(" > ")}var EditorText=function(a){var b=this;this._DOMIdentif=a.tagName.toLowerCase(),this._DOMEditingEl=a,this.wrapContainer=a.parentElement.parentElement,this.overflow=null;var c=a.innerHTML;this.href="",this.mouseEnter=function(){if(document.querySelector(".edit-typography")&&!b._triggerMouseEnter){this.setAttribute("contenteditable","true"),b.overflow=controls.findParent(b.wrapContainer,["navbar-off-canvas"]),b.wrapContainer&&"A"===b.wrapContainer.tagName&&(b.href=b.wrapContainer.href,b.wrapContainer.removeAttribute("href"));var d=a.querySelector(".single-iframe-popup, .single-image-popup");d&&(builder.editingText=!0),c=a.innerHTML,b._triggerMouseEnter=!0}},this.clickIngalleryEditTagA=function(b){document.querySelector(".edit-typography")&&(b.preventDefault(),b.stopImmediatePropagation(),a.style.overflow="visible",this.style.zIndex="10")},this.mouseUp=function(c){b._triggerMouseEnter&&b._showActiveButton(this,a.parentElement.children[1])},this.keyDown=function(c){b._eventKeyboard(b,c,a)},this.mouseLeave=function(d){if(document.querySelector(".edit-typography")&&b._triggerMouseEnter){if(b._DOMEditingEl.parentElement){var e=b._DOMEditingEl.parentElement.children[1];e.removeAttribute("style"),e.classList.contains("anim")&&e.classList.remove("anim"),e.lastChild.classList.contains("arrow")&&e.removeChild(e.lastChild),b.wrapContainer&&"A"===b.wrapContainer.tagName&&(b.wrapContainer.style.removeProperty("z-index"),b.wrapContainer.setAttribute("href",b.href))}if(b._triggerChangeText){var f=a.innerHTML;builder.setStep(function(){b._changeContent(b,a,c,f)}),b._triggerChangeText=!1}a.hasAttribute("contenteditable")&&a.removeAttribute("contenteditable"),b._triggerMouseEnter=!1,builder.editingText=!1}},this.paste=function(a){a=a.originalEvent||a,a.preventDefault();var b=a.clipboardData.getData("text/plain");document.execCommand("insertText",!1,b)},a.addEventListener("mouseenter",b.mouseEnter),b.wrapContainer&&"A"===b.wrapContainer.tagName&&b.wrapContainer.addEventListener("click",b.clickIngalleryEditTagA),a.addEventListener("mouseup",b.mouseUp),a.addEventListener("keydown",b.keyDown),a.parentElement.addEventListener("mouseleave",b.mouseLeave),a.addEventListener("paste",b.paste)};EditorText.prototype={_range:null,_currentNode:null,_startOffset:null,_triggerChangeText:!1,_triggerMouseEnter:!1,_showActiveButton:function(a,b){var c=this,d=window.getSelection();if(this._range=d.getRangeAt(0),builder.main.querySelector(".edit-typography")&&"I"!==a.tagName&&!navigator.userAgent.match(/iPhone|iPad|iPod|Android|BlackBerry|IEMobile/i)&&this._range.startOffset!==this._range.endOffset){var e=b.querySelectorAll(".active");Array.prototype.forEach.call(e,function(a){a.classList.remove("active")});var f=a.className.match(/text-([^ ]*)/i);if(f)switch(f[1]){case"left":b.querySelector("button.left").classList.add("active");break;case"center":b.querySelector("button.center").classList.add("active");break;case"right":b.querySelector("button.right").classList.add("active")}for(var g=d.anchorNode.parentNode,h=g.nodeName.toLowerCase(),i=[{style:h,nodeSelect:g}];h!==this._DOMIdentif;)g=g.parentNode,h=g.nodeName.toLowerCase(),i.push({style:h,nodeSelect:g});if(i.forEach(function(a){switch(a.style){case"strong":b.querySelector("button.strong").classList.add("active");break;case"em":b.querySelector("button.em").classList.add("active");break;case"span":a.nodeSelect.classList.contains("text-uppercase")&&b.querySelector("button.upper").classList.add("active");break;case"mark":b.querySelector("button.mark").classList.add("active");break;case"ins":b.querySelector("button.ins").classList.add("active");break;case"del":b.querySelector("button.del").classList.add("active");break;case"a":b.querySelector("button.link").classList.add("active")}}),this._range.cloneContents().hasChildNodes()){var j=this._range.getBoundingClientRect(),k=j.top,l=j.left,m=j.bottom,n=j.width,o=this._DOMEditingEl.parentElement.children[1];o.lastChild.classList.contains("arrow")&&o.removeChild(o.lastChild);var p=document.createElement("div");p.className="arrow";var q=this._DOMEditingEl.parentElement,r=q.getBoundingClientRect().top,s=q.getBoundingClientRect().left,t=controls.findParent(this._DOMEditingEl,["owl-stage-outer"]),u=0;t&&(u=t.getBoundingClientRect().top);var v=window.innerWidth,w=0;if(c.overflow){var x=c.overflow.getBoundingClientRect(),y=x.width,z=x.left;o.style.width=y-30+"px",o.style.display="block",w=42,p.style.top=w+"px"}var A=k-r-10;A<0&&(A=k-r+2),A-=w;var B=o.getBoundingClientRect(),C=B.width;o.style.height="5px",(r<52||r<u+52)&&(o.classList.contains("outside-top")&&(o.classList.remove("outside-top"),o.classList.add("inside-top")),o.style.padding="5px",A=m-r,p.style.borderBottom="5px solid rgba(0,0,0,0.9)",p.style.borderTop="none",p.style.top="0px");var D=l-s+n/2-C/2;o.style.top=A+"px",o.style.left=D+"px";var E=controls.findParent(o,["owl-stage-outer"]),F=0,G=v;if(E){var H=E.getBoundingClientRect();F=H.left,G=H.right}var I=o.querySelector("button.supra-btn:first-child"),J=o.querySelector("button.supra-btn:last-child"),K=I.getBoundingClientRect().left,L=J.getBoundingClientRect().right;if(K<50||K-F<10){var M=o.getBoundingClientRect().left;o.style.left=10-Math.abs(M-K)+"px",p.style.right="auto",p.style.left=l-s+n/2+"px",p.style.margin="0"}(L>v-50||L>G)&&(E?o.style.left=D+(G-10-L)+"px":o.style.left=D+(v-10-L)+"px",K=I.getBoundingClientRect().left,p.style.right="auto",p.style.left=l-K+n/2+"px",p.style.margin="0"),c.overflow&&(o.classList.contains("outside-top")&&(o.classList.remove("outside-top"),o.classList.add("inside-top")),A=m-r,o.style.top=A+"px",o.style.left=z-s+15+"px",o.style.height=w+5+"px",o.style.padding="5px",p.style.borderBottom="5px solid rgba(0,0,0,0.9)",p.style.borderTop="none",p.style.top="0px",p.style.left=l-z+n/2-15+"px",p.style.margin="0"),o.appendChild(p),o.style.visibility="visible",o.style.opacity=1,o.classList.add("anim")}else{var o=c._DOMEditingEl.parentElement.children[1];o.removeAttribute("style"),o.classList.contains("anim")&&o.classList.remove("anim")}}else{var o=c._DOMEditingEl.parentElement.children[1];o.removeAttribute("style"),o.classList.contains("anim")&&o.classList.remove("anim")}},_eventKeyboard:function(a,b,c){if(13===b.keyCode&&"SPAN"===c.tagName||(a._triggerChangeText=!0),13===b.keyCode&&"SPAN"===c.tagName)b.preventDefault(),b.stopPropagation();else if(13===b.keyCode)b.preventDefault(),b.stopPropagation(),a._setEnterInEndLine(c);else if(65===b.keyCode&&(b.ctrlKey||b.metaKey)&&a._triggerMouseEnter){b.preventDefault(),b.stopPropagation();var d=window.getSelection(),e=document.createRange();e.selectNodeContents(c),d.removeAllRanges(),d.addRange(e),a._showActiveButton(c,c.parentElement.children[1])}},_setEnterInEndLine:function(a){var b=window.getSelection();if(b.anchorNode.length===b.anchorOffset||b.anchorNode===a){var c=document.createRange(),d=document.createElement("br"),e=document.createElement("br"),f=document.createDocumentFragment();if(f.appendChild(e),b.anchorNode===a)var g=b.anchorNode,h=a.childNodes[b.anchorOffset-1].nextSibling;else var h=b.anchorNode.nextSibling,g=b.anchorNode.parentNode;(h&&"BR"!==h.tagName||!h)&&f.appendChild(d),h?g.insertBefore(f,h):g.appendChild(f),c.setStartAfter(e),c.setEndAfter(e),c.collapse(!1),b.removeAllRanges(),b.addRange(c)}else document.execCommand("insertHTML",!1,"<br>")},_changeContent:function(a,b,c,d){b.innerHTML=c,builder.setStep(function(){a._changeContent(a,b,d,c)})},_setNode:function(a,b,c,d,e){var f=this;if(this._range){var g=window.getSelection();g.removeAllRanges(),g.addRange(this._range);var h=f._DOMEditingEl.innerHTML,i=this._range.extractContents(),j=document.createElement(b);c&&(j.className=c),d&&(j.href=d,j.target=e,j.classList.add("smooth"),$(j).smoothScroll({speed:800})),j.appendChild(i),this._range.insertNode(j),this._range.selectNodeContents(j),g.removeAllRanges(),g.addRange(this._range),a.classList.add("active");var k=f._DOMEditingEl.innerHTML;return builder.setStep(function(){f._setNodePoint(f,h,k)}),j}},_removeNode:function(a,b){var c=this;if(this._range){var d=window.getSelection();d.removeAllRanges(),d.addRange(this._range);for(var e=c._DOMEditingEl.innerHTML,f=d.anchorNode,g=d.anchorNode.parentNode,h=f;g.nodeName.toLowerCase()!==b;)h=h.parentNode,g=g.parentNode;var i=g.nextSibling,j=g.parentNode;if(j.removeChild(g),j.tagName.toLowerCase()!==this._DOMIdentif)i?j.insertBefore(h,i):j.appendChild(h),this._range.selectNodeContents(f.parentElement);else{var k=f.parentElement.childNodes;if(k.length>1){for(var l=document.createDocumentFragment(),m=0;m<k.length;m++)l.appendChild(k[m].cloneNode(!0));this._range.insertNode(l),this._range.selectNodeContents(l)}else if(g.childNodes.length>1){for(var l=document.createDocumentFragment();g.childNodes.length>0;)l.appendChild(g.childNodes[0]);this._range.insertNode(l),this._range.selectNodeContents(h)}else this._range.insertNode(h),this._range.selectNodeContents(h)}try{d.removeAllRanges(),d.addRange(this._range)}catch(a){}a.classList.remove("active"),a.blur();var n=c._DOMEditingEl.innerHTML;builder.setStep(function(){c._setNodePoint(c,e,n)})}},_setNodePoint:function(a,b,c){a._DOMEditingEl.innerHTML=b,builder.setStep(function(){a._setNodePoint(a,c,b)})},setTextAlign:function(a,b,c){var d=this,e=a.className.match(/text-([^ ]*)/i);e&&(a.classList.remove(e[0]),b.parentElement.querySelector("."+e[1]).classList.remove("active")),a.classList.add(c),b.classList.add("active"),builder.setStep(function(){d.removeTextAlign(a,b,c)})},removeTextAlign:function(a,b,c){var d=this;a.classList.remove(c),b.classList.remove("active"),b.blur(),builder.setStep(function(){d.setTextAlign(a,b,c)})},setBold:function(a){this._setNode(a,"strong")},removeBold:function(a){this._removeNode(a,"strong")},setItalic:function(a){this._setNode(a,"em")},removeItalic:function(a){this._removeNode(a,"em")},setMarker:function(a){this._setNode(a,"mark")},removeMarker:function(a){this._removeNode(a,"mark")},setUnderline:function(a){this._setNode(a,"ins")},removeUnderline:function(a){this._removeNode(a,"ins")},setStrikethrough:function(a){this._setNode(a,"del")},removeStrikethrough:function(a){this._removeNode(a,"del")},setUpper:function(a){this._setNode(a,"span","text-uppercase")},removeUpper:function(a){this._removeNode(a,"span")},setLink:function(a,b,c){return this._setNode(a,"a",null,b,c)},removeLink:function(a){this._removeNode(a,"a")},setTextAlignLeft:function(a,b){this.setTextAlign(a,b,"text-left")},removeTextAlignLeft:function(a,b){this.removeTextAlign(a,b,"text-left")},setTextAlignCenter:function(a,b){this.setTextAlign(a,b,"text-center")},removeTextAlignCenter:function(a,b){this.removeTextAlign(a,b,"text-center")},setTextAlignRight:function(a,b){this.setTextAlign(a,b,"text-right")},removeTextAlignRight:function(a,b){this.removeTextAlign(a,b,"text-right")}};var Modal=function(a,b,c){var d=this,e=document.getElementById("modal-container"),f=this._modal(a,b);return this._selfDOM=f,e.appendChild(f),this._targetObject=c,this._title.innerHTML="",this._body.innerHTML="",this._footer.innerHTML="",this["_getModal"+b](d),$(f).on("hidden.bs.modal",function(){f.parentElement.removeChild(f)}),f};Modal.prototype={_selfDOM:null,_header:null,_title:null,_body:null,_footer:null,_elements:null,_elementsGallery:null,_countDropDown:0,_targetObject:null,_modal:function(a,b){var c="ButtonSettings"===b?builder.defaultStyleType+"-modal":"",d=document.createElement("div");d.className="modal fade flex-center "+c,d.id=a,d.setAttribute("tabindex","-1"),d.setAttribute("role","dialog");var e='<div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="icon-cross"></i></button><div class="modal-title">Modal title</div></div><div class="modal-body clearfix"></div><div class="modal-footer"><button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button></div></div><div class="modal-preloader"><div class="wrapper"><div class="timer"><div class="arrow_sec"></div><div class="arrow_min"></div></div></div></div></div>';return d.innerHTML=e,this._header=d.querySelector(".modal-header"),this._title=this._header.querySelector(".modal-title"),this._body=d.querySelector(".modal-body"),this._footer=d.querySelector(".modal-footer"),d},_constructModalBody:function(a,b){var c=this._getElements(a);if(this._elements)for(var d in c)this._elements[d]=c[d];else this._elements=c;var e=document.createElement("div");e.className=b;for(var f in c)e.appendChild(c[f]);this._body.appendChild(e)},_getElements:function(a){var b=this,c={};return a.forEach(function(a){"string"==typeof a?c[a]=b["_"+a]():c[a.name]=b["_"+a.func](a.args)}),c},_choiceElement:function(a){var b=this,c=document.createElement("div");return c.className="item clearfix",a.buttons&&Array.isArray(a.buttons)?a.buttons.forEach(function(d){var e=document.createElement("div");e.className=d.className,e.innerHTML='<i class="ok supra icon-check2"></i><span class="bg-white-circle"></span>'+d.html+'<div class="wrap"></div>',c.appendChild(e),e.addEventListener("click",b._choosen),a.callback&&e.addEventListener("click",a.callback)}):(c.innerHTML='<div class="'+a.className+'"><i class="ok supra icon-check2"></i><span class="bg-white-circle"></span>'+a.html+'<div class="wrap"></div></div>',c.children[0].addEventListener("click",b._choosen)),c},_choosen:function(){var a=this.parentElement.querySelector(".choosen");a&&a.classList.remove("choosen"),this.classList.add("choosen")},_inputImage:function(a){var b=this;a.elClass=a.elClass||"";var c=document.createElement("div");return c.className="item clearfix nofloat nopadding "+a.elClass,c.innerHTML="<label>"+a.title+'</label><input type="text" class="choice-images" /><i class="supra icon-folder-picture"></i>',c.querySelector("i").addEventListener("click",function(){new Modal("supra-modal-gallery","Gallery",{parentModal:b,targetElement:c,type:a.type||"normal"})}),c},_inputImageForVideo:function(a){var b=this;a.elClass=a.elClass||"";var c=document.createElement("div");return c.className="item clearfix nofloat nopadding "+a.elClass,c.innerHTML="<label>"+a.title+'</label><input type="text" class="choice-images" /><i class="supra icon-folder-picture"></i>',c.querySelector("i").addEventListener("click",function(){new Modal("supra-modal-gallery","GalleryVideo",{parentModal:b,targetElement:c,type:a.type})}),c},_inputVideo:function(a){var b=this;a.elClass=a.elClass||"";var c=document.createElement("div");return c.className="item clearfix nofloat nopadding "+a.elClass,c.innerHTML="<label>"+a.title+'</label><input type="text" class="choice-videos" data-type="'+a.type+'"/><i class="supra icon-folder-film"></i>',c.querySelector("i").addEventListener("click",function(){new Modal("supra-modal-gallery","GalleryVideo",{parentModal:b,targetElement:c,type:a.type})}),c},_separator:function(){var a=document.createElement("div");return a.className="separator-or",a.innerHTML='<hr><div class="wrap flex-center"><span class="flex-center">OR</span></div>',a},_addEventListToDropdown:function(a){var b=a.querySelectorAll("li a"),c=a.querySelector(".dropdown button");Array.prototype.forEach.call(b,function(b){b.addEventListener("click",function(d){d.preventDefault();var e=b.innerHTML;c.dataset.value=replaceSpace(firstDown(e)),c.querySelector("span").innerHTML=e;var f=new CustomEvent("supra.check.select",{detail:e});a.dispatchEvent(f)})})},_dropDown:function(a){var b=document.createElement("div"),c=a.outerClass?""+a.outerClass:"";b.className="item clearfix"+c;var d='<ul class="dropdown-menu" aria-labelledby="dropdownMenu'+this._countDropDown+'">';a.menu.forEach(function(a){d+='<li><a href="#">'+firstUp(a)+"</a></li>"}),d+="</ul>";var e=a.menu[0]?firstUp(a.menu[0]):"",f=a.menu[0]?a.menu[0]:"",g="";if(void 0!==a.callback&&(g=a.callback()),""!==g){var f=g;e=firstUp(f)}f=replaceSpace(f);var h=""!==a.title?"<label>"+a.title+"</label>":"";return b.innerHTML=h+'<div class="dropdown"><button class="supra-btn btn-default dropdown-toggle '+a.elClass+'" type="button" id="dropdownMenu'+this._countDropDown+'"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"data-value="'+f+'"><span>'+e+'</span> <i class="icon-chevron-down-small"></i></button>'+d+"</div>",this._addEventListToDropdown(b),this._countDropDown++,b},_switch:function(a){var b=document.createElement("div");b.className="item clearfix "+a.elClass;var c=a.checked?"switch-on":"switch-off",d=a.checked?"checked":"";return b.innerHTML='<div class="switch-group '+a.type+'"><label>'+a.title+'</label><div class="switch '+c+'"><input type="checkbox" name="switch" '+d+'/><div class="wrap clearfix"><span class="flex-center">ON</span><span class="switch-label flex-center"></span><span class="flex-center">OFF</span></div></div></div>',a.callback&&a.callback(b),b},_radio:function(a){var b=document.createElement("div");b.className="item clearfix "+a.marginTop;var c="";a.items.forEach(function(a,b){var d=0===b?"checked":"";c+='<label class="radio-inline"><input type="radio" name="radio" value="'+a.toLowerCase().replace(/ /gi,"-")+'" '+d+'><span class="lbl">'+a+"</span></label>"});var d=void 0!==a.title&&""!==a.title?"<label>"+a.title+"</label>":"";return b.innerHTML=d+'<div class="supra radio nomargintop">'+c+"</div>",b},_checkbox:function(a){var b=document.createElement("div");return b.className="item clearfix",b.innerHTML='<div class="supra checkbox"><label><input type="checkbox" name="check"><span class="lbl">'+a.name+"</span></label></div>",b.querySelector("input").checked=a.checked,b},_figure:function(a){var b=this,c=document.createElement("div");c.className="item clearfix",c.innerHTML='<figure><div class="wrap-hover flex-center"><img src="" alt="image" /><div class="img" style="display: none;"></div><div class="bg-test bg"></div><i class="supra icon-folder-picture flex-center before-square"></i></div><figcaption>600x800</figcaption></figure>',c.querySelector("i").addEventListener("click",function(){new Modal("supra-modal-gallery","Gallery",{parentModal:b,targetElement:a.callback(),type:"normal"})});var d=c.querySelector("img"),e=c.querySelector("figcaption");return d.addEventListener("load",function(){if(a.section){var b=a.section.getBoundingClientRect().width,d=Math.round(this.naturalWidth/b*100),f=c.querySelector(".img");f.dataset.percent=d,a.sizeAuto&&(f.style.backgroundSize=d+"% auto",f.style.webkitBackgroundSize=d+"% auto")}e.innerHTML=this.naturalWidth+"x"+this.naturalHeight}),c},_inputText:function(a){var b=document.createElement("div");a.elClass=a.elClass||"",a.value=a.value||"",a.disabled=a.disabled||"",a.placeholder=a.placeholder||"",b.className="item clearfix nopadding nofloat "+a.elClass;var c=""!==a.title?"<label>"+a.title+"</label>":"";return b.innerHTML=c+'<input type="text" class="choice-text " placeholder="'+a.placeholder+'" value="'+a.value+'" '+a.disabled+">",b},_inputRange:function(a){var b=document.createElement("div");a.elClass=a.elClass||"",b.className="item clearfix "+a.elClass;var c=a.title&&""!==a.title?"<label>"+a.title+"</label>":"",d=a.opacity();return d?b.innerHTML=c+'<input type="range" value="'+100*d+'"/>':b.innerHTML='<input type="range" value="100"/>',b},_pageSettinsButton:function(){var a=document.createElement("div");a.className="item clearfix",a.innerHTML='<div class="btn-group gray-buttons-group" role="group" aria-label="..."><button id="general" type="button" class="supra-btn btn-default-dark col-sm-4 col-md-4 col-lg-4 active">General</button><button id="seo" type="button" class="supra-btn btn-default-dark col-sm-4 col-md-4 col-lg-4">SEO</button><button id="s-preloader" type="button" class="supra-btn btn-default-dark col-sm-4 col-md-4 col-lg-4">Preloader</button></div>';var b=a.querySelectorAll("button");return Array.prototype.forEach.call(b,function(a){a.addEventListener("click",function(){builder.selection(this);var a=controls.findParent(this,["btn-page-control"]),b=a.className,c=new RegExp("(general|seo|s-preloader)","i");a&&(a.className=b.replace(c,this.id))})}),a},_textArea:function(a){var b=document.createElement("div");return b.className="item clearfix"+a.elClass,b.innerHTML='<div class=""><label>'+a.title+"</label><textarea>"+a.value+"</textarea></div>",b},_description:function(a){var b=document.createElement("div");return b.className="item clearfix",b.innerHTML="<p>"+a.value+"</p>",b},_label:function(a){var b=document.createElement("label"),c=a.outerClass?" "+a.outerClass:"";return b.className="item clearfix lbl"+c,b.innerHTML=a.value,b},_preloaderType:function(a){var b=this,c=document.createElement("div");return c.id="prev-preload",c.className="item icons clearfix",c.innerHTML="<label>"+a.title+"</label>",a.html.forEach(function(d,e){c.appendChild(b._preloaderItem(b,d,a.dataName[e],a.active))}),c},_galleryItems:function(a){var b=this,c=document.createElement("div");return c.className="item "+a.className+" clearfix","gallery"===a.className&&"jpg"!==a.type?a.data.forEach(function(a){c.appendChild(b._getItemForGallery(a.name,a.width,a.height,"./images/gallery/"+a.name,null,a.srcset))}):"gallery"===a.className&&"jpg"===a.type?a.data.forEach(function(a){c.appendChild(b._getItemForGallery(a.name,a.width,a.height,"./video/gallery/"+a.name))}):"gallery-video"===a.className?a.data.forEach(function(a){c.appendChild(b._getItemForGalleryVideo(a.name,a.width,a.height,"./video/gallery/"+a.name))}):a.data.forEach(function(a){c.appendChild(b._getItemForIconsGallery(a))}),c},_preloaderItem:function(a,b,c,d){var e=document.createElement("div"),f=c===d?" active":"";return e.dataset.value=c,e.className="choice-element flex-center flex-column"+f,e.innerHTML=b+'<i class="ok supra icon-check2"></i><span class="bg-white-circle"></span>',e.addEventListener("click",function(){builder.selection(this),this.querySelector(".icon-picture")?a._body.classList.add("show-input-img"):a._body.classList.contains("show-input-img")&&a._body.classList.remove("show-input-img")}),e},_upload:function(a){var b=document.createElement("div");b.className="upload",b.innerHTML='<button><i class="icon-cloud-upload"></i>Upload</button><input type="file" name="image" />';var c=b.querySelector("input");return b.querySelector("button").addEventListener("click",function(){if("function"==typeof download)c.click();else{var a=document.querySelector(".btn-success.download"),b=new Modal("supra-modal","Demo",a);$(b).modal("show")}}),c.addEventListener("change",function(){if(c.files&&c.files[0]){var b=a._elementsGallery,d=replaceSpace(c.files[0].name),e=!1,f=new FormData;if(f.append("data",c.files[0]),f.append("name_file",d),builder.ajax(f,"addgallery"),b.forEach(function(a){d===a.name&&(e=!0)}),e){var h=/[^./]+\./i.test(d)?d.match(/([^./]+)\./i)[1].toLowerCase():"";if(""!==h){var i=a._body.querySelector(".item.gallery"),j=i.parentElement.parentElement,k=j.querySelector("[data-id="+h+"]");if(k){var l=k.querySelector("img"),m=clearTimeStamp(l.getAttribute("src"));m+="?t="+Date.now(),l.setAttribute("src",m),k.dataset.src=m,builder.selection(k);var n=j.scrollTop,o=j.getBoundingClientRect().top,p=k.getBoundingClientRect().top;j.scrollTop=n+p-o}}}else{var g=new FileReader;g.readAsDataURL(c.files[0]),g.addEventListener("load",function(b){var c=a._body.querySelector(".item.gallery"),e=new Image;e.src=b.target.result,e.addEventListener("load",function(){var e=a._getItemForGallery(d,this.naturalWidth,this.naturalHeight,b.target.result,"./images/gallery/"+d);c.appendChild(e),builder.selection(e);var f=c.parentElement.parentElement,g=f.getBoundingClientRect().height,h=c.getBoundingClientRect().height;f.scrollTop=h-g})})}}}),b},_uploadVideo:function(a,b){var c=document.createElement("div");c.className="upload",c.innerHTML='<button><i class="icon-cloud-upload"></i>Upload</button><input type="file" name="image" accept=".'+b+'"/>';var d=c.querySelector("input");return c.querySelector("button").addEventListener("click",function(){if("function"==typeof download)d.click();else{var a=document.querySelector(".btn-success.download"),b=new Modal("supra-modal","Demo",a);$(b).modal("show")}}),d.addEventListener("change",function(){if(d.files&&d.files[0]){var c=a._elementsGallery,e=replaceSpace(d.files[0].name),f=!1;c.forEach(function(a){e===a.name&&(f=!0)});var h=new FormData;h.append("data",d.files[0]),h.append("name_file",e),builder.ajax(h,"addgalleryvideo",function(c){var g=JSON.parse(c).error;if(g){var h=new Modal("supra-modal","Attention",{response:g});$(h).modal("show")}else if(!f)if("jpg"===b){var i=new FileReader;i.readAsDataURL(d.files[0]),i.addEventListener("load",function(b){var c=a._body.querySelector(".item.gallery"),d=new Image;d.src=b.target.result,d.addEventListener("load",function(){c.appendChild(a._getItemForGallery(e,this.naturalWidth,this.naturalHeight,b.target.result,"./video/gallery/"+e))})})}else{var j=a._body.querySelector(".item.gallery-video");j.appendChild(a._getItemForGalleryVideo(e,"","","./video/gallery/"+e))}})}}),c},_getItemForGallery:function(a,b,c,d,e,f){var e=e||d,g=document.createElement("figure"),h=this,i=/[^.]+\./i.test(a)?a.match(/([^.]+)\./i)[1].toLowerCase():"";g.className="col-lg-2 selecting-item",g.dataset.src=e,g.dataset.id=i;var j=new Image;j.src=d,j.setAttribute("alt","section"),f&&(f="./images/gallery/"+f,g.dataset.srcset=f);var k=1.085;if(window.innerWidth<501&&(k=.75),/\.svg/.test(d)){var j=new Image;j.src=d,j.addEventListener("load",function(){h._imageSizig(this.naturalWidth,this.naturalHeight,k,j),g.innerHTML='<div class="wrap-hover flex-center"><i class="icon-check flex-center"></i></div><figcaption><p>'+a+"</p><p>"+this.naturalWidth+"x"+this.naturalHeight+"</p></figcaption>",g.querySelector(".wrap-hover").appendChild(j),g.addEventListener("click",function(){builder.selection(this)})})}else this._imageSizig(b,c,k,j),g.innerHTML='<div class="wrap-hover flex-center"><i class="icon-check flex-center"></i></div><figcaption><p>'+clearTimeStamp(a)+"</p><p>"+b+"x"+c+"</p></figcaption>",g.querySelector(".wrap-hover").appendChild(j),g.addEventListener("click",function(){builder.selection(this)});return g},_getItemForGalleryVideo:function(a,b,c,d){var e=/[^.]+\./i.test(a)?a.match(/([^.]+)\./i)[1].toLowerCase():"",f=document.createElement("div");f.className="col-lg-2 selecting-item video-item",f.dataset.src=d,f.dataset.id=e;var g='<span class="icon-clapboard-play flex-center"></span>';if(""!==b&&""!==c){g="";var h=new Image;h.src=d.match(/\.[^.]*/i)[0]+".jpg",h.setAttribute("alt","section");var i=1.085;window.innerWidth<501&&(i=.75),this._imageSizig(b,c,i,h)}return f.innerHTML='<div class="wrap-hover flex-center"><i class="icon-check flex-center"></i>'+g+'</div><p class="name-video">'+a+"</p>",""!==b&&""!==c&&f.querySelector(".wrap-hover").appendChild(h),f.addEventListener("click",function(){builder.selection(this)}),f},_getItemForIconsGallery:function(a){var b=document.createElement("div");return b.className="ico choice-element flex-center",b.innerHTML='<i class="ok supra icon-check2"></i><span class="bg-white-circle"></span><i class="'+a.slice(1)+'"></i>',b.addEventListener("click",function(){builder.selection(this)}),b},_imageSizig:function(a,b,c,d){b<=a&&a/b>c?d.style.width="100%":(d.style.height="100%",d.style.width="auto")},_getButton:function(a,b,c){var d=document.createElement("button");return d.className=a,d.setAttribute("type","button"),d.innerHTML=b,d.addEventListener("click",function(){c()}),d},_colorpickerDouble:function(a){a.elClass=a.elClass||"";var b=document.createElement("div");b.className="item clearfix nofloat nopadding "+a.elClass;var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","colorpicker_main"),c.value=a.callback()[0];var d=document.createElement("input");return d.setAttribute("type","text"),d.setAttribute("name","colorpicker_grnt"),d.value=a.callback()[1],b.appendChild(c),b.appendChild(d),$(this._selfDOM).on("show.bs.modal",function(){$(c).spectrum({color:a.callback()[0],showPalette:!0,preferredFormat:"hex",allowEmpty:!1,localStorageKey:"spectrum.homepage",change:a.chengeMain,hide:a.cancel}),$(d).spectrum({color:a.callback()[2],showPalette:!0,preferredFormat:"hex",allowEmpty:!1,localStorageKey:"spectrum.homepage",change:a.chengeGrnt,hide:a.cancel})}),b},_getModalSectionBg:function(a){var b=this._targetObject,c="#"+b.children[0].id+" .bg",d=b.children[0],e="",f=d.querySelector(".bg"),g=null;if(f&&f.classList.contains("bg-video")&&$(f).data("vide")){var h=$(f).data("vide").path,i=h.jpg;i||(i=f.dataset.videBg.match(/jpg:\s*([^,\s]*)/)[1]?f.dataset.videBg.match(/jpg:\s*([^,\s]*)(?:\.jpg)?/)[1]:""),g={mp4:h.mp4,ogv:h.ogv,poster:i.replace(/\.jpg/,"")}}else f&&f.classList.contains("bg-video")&&(g={mp4:f.dataset.videBg.match(/mp4:\s*([^,\s]*)/)[1]?f.dataset.videBg.match(/mp4:\s*([^,\s]*)(?:\.mp4)?/)[1].replace(/\.mp4/,""):"",ogv:f.dataset.videBg.match(/ogv:\s*([^,\s]*)/)[1]?f.dataset.videBg.match(/ogv:\s*([^,\s]*)(?:\.ogv)?/)[1].replace(/\.ogv/,""):"",poster:f.dataset.videBg.match(/jpg:\s*([^,\s]*)/)[1]?f.dataset.videBg.match(/jpg:\s*([^,\s]*)(?:\.jpg)?/)[1].replace(/\.jpg/,""):""});this._title.innerHTML="<h4>Background settings</h4>",this._elements=null;var j=b.querySelector("style").innerHTML,k="";b.classList.contains("nav")&&(d=d.querySelector(".nav-bg"),c=".nav-bg",k="\\s.nav-bg");var l="",m=d.className.match("bg-([0-9]{1})-color-(light|dark)");l=m?"Default color "+m[2]:"Default color light";var n=builder._style.styleItems.light[0].lightColor,o=builder._style.styleItems.dark[0].darkColor,p=new RegExp(c+"\\s?{[\\s\\S]*?background-size:\\s*([^;]*);","im"),q=j.match(p),r=new RegExp(c+"\\s?{[\\s\\S]*?background-position:\\s*([^;]*);","im"),s=j.match(r),t=new RegExp(c+"\\s?{[\\s\\S]*?background-repeat:\\s*([^;]*);","im"),u=j.match(t),v=new RegExp("#"+b.children[0].id+k+"\\s?{[\\s\\S]*?background:\\s*([^;]*);","im"),w=j.match(v);if(w){var x=w[1].match(/.*?(#[^\s,)]*).*?(#[^\s,)]*)/i);x&&(n=x[1],o=x[2]),w[1].match(/linear-gradient\(to bottom/i)?l="Vertical gradient":w[1].match(/linear-gradient\(to right/i)?l="Horizontal gradient":w[1].match(/radial-gradient\(circle/i)?l="Radial gradient":w[1].match(/linear-gradient\(135deg/i)?l="Angle gradient":(l="Solid color",n=w[1])}if(!b.classList.contains("nav")){a._constructModalBody([{name:"radio",func:"radio",args:{items:["Image background","Video background","None"],marginTop:""}}],"col-sm-12 col-md-12 col-lg-12 nopadding radio-control");var y="auto",z="auto";!q||"auto"===q[1]&&"cover"===q[1]||(y=q&&q[1].match(/([0-9]*(?:px|%)|auto)\s/i)?q[1].match(/([0-9]*(?:px|%)|auto)\s/i)[1]:"auto"),
!q||"auto"===q[1]&&"cover"===q[1]||(z=q&&q[1].match(/\s([0-9]*(?:px|%)|auto)/i)?q[1].match(/\s([0-9]*(?:px|%)|auto)/i)[1]:"auto"),a._constructModalBody([{name:"inputImage",func:"inputImage",args:{title:"Background path",elClass:"col-sm-10 col-md-10 col-lg-10",type:"normal"}},{name:"BgStyle",func:"dropDown",args:{menu:["cover","auto","contain","custom (width x height)"],title:"Background size:",elClass:"col-sm-10 col-md-10 col-lg-10",callback:function(){return!q||"auto"!==q[1]&&"cover"!==q[1]&&"contain"!==q[1]?q?(a._body.classList.add("show-custom-size"),q?"Custom (width x height)":"Auto"):"Auto":q?q[1]:"Auto"}}},{name:"Width",func:"inputText",args:{title:"",value:y,elClass:"col-sm-4 col-md-4 col-lg-4 margin-right-20 float-left custom-size"}},{name:"Height",func:"inputText",args:{title:"",value:z,elClass:"col-sm-4 col-md-4 col-lg-4 custom-size"}},{name:"BgRepeat",func:"dropDown",args:{menu:["None","Repeat","Repeat x","Repeat y"],title:"Background repeat:",elClass:"col-sm-10 col-md-10 col-lg-10",callback:function(){return u&&"no-repeat"===u[1]?"none":u?u[1]:"none"}}},{name:"label",func:"label",args:{value:"Background position:"}},{name:"BgPositionLR",func:"dropDown",args:{menu:["left","center","right"],title:"",outerClass:" col-sm-4 col-md-4 col-lg-4 nopadding double-dropdown margin-right-20 inline-b nofloat",callback:function(){return s&&s[1].split(" ")[1]?s[1].split(" ")[1]:"center"}}},{name:"BgPositionTB",func:"dropDown",args:{menu:["top","center","Bottom"],title:"",outerClass:" col-sm-4 col-md-4 col-lg-4 nopadding double-dropdown inline-b nofloat",callback:function(){return s&&s[1].split(" ")[0]?s[1].split(" ")[0]:"center"}}}],"col-sm-6 col-md-6 col-lg-6 nopadding image-background"),a._constructModalBody([{name:"inputVideoMp4",func:"inputVideo",args:{title:"MP4 video path",elClass:"col-sm-10 col-md-10 col-lg-10",type:"mp4"}},{name:"inputVideoOgv",func:"inputVideo",args:{title:"OGV video path",elClass:"col-sm-10 col-md-10 col-lg-10",type:"ogv"}},{name:"inputImagePoster",func:"inputVideo",args:{title:"Poster path (.jpg only)",elClass:"col-sm-10 col-md-10 col-lg-10 video",type:"jpg"}}],"col-sm-6 col-md-6 col-lg-6 nopadding video-background")}var A=new RegExp(c+"[\\s]*{[\\s\\S]*?opacity:[\\s]*([^;]*)","im"),B=j.match(A),C=B?B[1]:1,D="";b.classList.contains("nav")&&(D=" nav-pr-bg"),a._constructModalBody([{name:"figure",func:"figure",args:{callback:function(){return a._elements.inputImage},section:d,sizeAuto:!q||q&&"auto"===q[1]}},{name:"inputRange",func:"inputRange",args:{title:'Opacity (<span class="opacity">'+Math.round(100*C)+"</span>%):",elClass:"range",opacity:function(){return B?B[1]:100}}}],"col-sm-6 col-md-6 col-lg-6 nopadding preview-bg image-background video-background none float-right"+D);var E="col-sm-6 col-md-6 col-lg-6 color-block nopadding image-background video-background none",F="";b.classList.contains("nav")&&(E="col-sm-6 col-md-6 col-lg-6 color-block nopadding hide-switch",F=" nomargintop"),a._constructModalBody([,{name:"BgColor",func:"dropDown",args:{menu:["Default color light","Default color dark","Solid color","Radial gradient","Vertical gradient","Horizontal gradient","Angle gradient"],title:"Background color:",elClass:"col-sm-10 col-md-10 col-lg-10",outerClass:F,callback:function(){return l}}},{name:"colorpicker",func:"colorpickerDouble",args:{elClass:"colorpicker two-cp",callback:function(){return[n,o]},chengeMain:function(b){var c=a._elements.colorpicker,d=c.querySelector("[name=colorpicker_grnt]").value;a._chengeCstmColor(b.toHexString(),d)},chengeGrnt:function(b){var c=a._elements.colorpicker,d=c.querySelector("[name=colorpicker_main]").value;a._chengeCstmColor(d,b.toHexString())},cancel:function(){var b=a._elements.colorpicker,c=b.querySelector("[name=colorpicker_main]"),d=b.querySelector("[name=colorpicker_grnt]");c.value=$(c).spectrum("get"),d.value=$(d).spectrum("get"),a._chengeCstmColor(c.value,d.value)}}},{name:"parallax",func:"switch",args:{title:"Parallax",type:"",checked:b.classList.contains("parallax"),elClass:e+" none",callback:function(a){a.querySelector(".switch").addEventListener("click",function(a){a.preventDefault(),this.classList.contains("switch-on")?(this.classList.remove("switch-on"),this.classList.add("switch-off"),this.querySelector("input").removeAttribute("checked")):(this.classList.remove("switch-off"),this.classList.add("switch-on"),this.querySelector("input").setAttribute("checked",""))})}}}],E);var G=a._elements.figure.querySelector("img"),H=a._elements.figure.querySelector(".img");H.style.display="block",$(a._selfDOM).on("shown.bs.modal",function(){var b=d.getBoundingClientRect().width,c=a._elements.figure.getBoundingClientRect().width,e=Math.round(c/b*100),f=d.getBoundingClientRect().height,g=f*(e/100),h=a._elements.figure.querySelector(".wrap-hover");h.style.height=g+"px"});var I=new RegExp(c+" ?{[\\s\\n\\t]*background-image:\\s*url\\('?/?([^']*)'?\\);","im"),J=j.match(I)&&""!==j.match(I)[1]?j.match(I)[1]:"";if(!b.classList.contains("nav")){a._elements.inputImage.querySelector("input").value=clearTimeStamp(J),a._elements.inputVideoMp4.querySelector("input").value=g&&g.mp4?"./"+g.mp4+".mp4":"",a._elements.inputVideoOgv.querySelector("input").value=g&&g.ogv?"./"+g.ogv+".ogv":"",a._elements.inputImagePoster.querySelector("input").value=g&&g.poster?"./"+g.poster+".jpg":"";var K=a._elements.radio.querySelectorAll(".radio-inline input"),L=a._elements.figure.querySelector(".wrap-hover"),M=a._elements.figure.querySelector(".before-square"),N="";a._body.querySelector(".color-block"),a._body.querySelector(".color-block button");""===J||g?""===J&&g?(a._elements.radio.parentElement.classList.add("video-background"),a._elements.radio.querySelector("[value=video-background]").checked=!0,$(a._selfDOM).on("shown.bs.modal",function(){setTimeout(function(){$(H).vide({mp4:g.mp4?g.mp4:"",ogv:g.ogv?g.ogv:"",poster:g.poster?g.poster:""},{posterType:"jpg"})},400)}),L.querySelector(".img")||L.appendChild(H),L.querySelector(".icon-folder-picture.before-square")&&L.removeChild(M),H.classList.add("bg-video"),""!==H.style.backgroundImage&&(N=H.style.backgroundImage),H.style.backgroundImage=""):(a._elements.radio.parentElement.classList.add("none"),a._elements.radio.querySelector("[value=none]").checked=!0,L.querySelector(".img")&&L.removeChild(H),L.querySelector(".icon-folder-picture.before-square")&&L.removeChild(M),H.className="img",H.innerHTML="",a._elements.BgColor.parentElement.classList.add("nomargintop")):(a._elements.radio.parentElement.classList.add("image-background"),a._elements.radio.querySelector("[value=image-background]").checked=!0,L.querySelector(".img")||L.appendChild(H),L.querySelector(".icon-folder-picture.before-square")||L.appendChild(M),H.style.backgroundImage=N,H.className="img",H.innerHTML=""),Array.prototype.forEach.call(K,function(b){b.addEventListener("change",function(b){b.preventDefault();var c=controls.findParent(this,["radio-control"]);switch(c.className=c.className.replace(/(image-background|video-background|none)/i,""),c.classList.add(this.value),this.value){case"none":L.querySelector(".img")&&L.removeChild(H),L.querySelector(".before-square")&&L.removeChild(M),H.className="img",H.innerHTML="";break;case"video-background":L.querySelector(".img")||L.appendChild(H),L.querySelector(".before-square")&&L.removeChild(M),H.classList.add("bg-video"),$.vide||vide_run(),g&&$(H).vide({mp4:g.mp4?g.mp4:"",ogv:g.ogv?g.ogv:"",poster:g.poster?g.poster:""},{posterType:"jpg"}),""!==H.style.backgroundImage&&(N=H.style.backgroundImage),H.style.backgroundImage="";break;case"image-background":default:L.querySelector(".img")||L.appendChild(H),L.querySelector(".before-square")||L.appendChild(M),H.style.backgroundImage=N,H.className="img",H.innerHTML=""}"none"===this.value?a._elements.BgColor.parentElement.classList.contains("nomargintop")||a._elements.BgColor.parentElement.classList.add("nomargintop"):a._elements.BgColor.parentElement.classList.contains("nomargintop")&&a._elements.BgColor.parentElement.classList.remove("nomargintop")})}),""!==J&&(G.src=J,H.style.backgroundImage="url('"+J+"')"),u&&"none"===u[1]?(H.style.backgroundRepeat="no-repeat",H.style.webkitBackgroundRepeat="no-repeat"):(H.style.backgroundRepeat=u?u[1].replace(/\s/,"-"):"no-repeat",H.style.webkitBackgroundRepeat=u?u[1].replace(/\s/,"-"):"no-repeat"),q&&"auto"!==q[1]&&"cover"!==q[1]&&"contain"!==q[1]?a._setCostomSizeOnFigure(q[1].split(" ")[0],q[1].split(" ")[1],H,d):!q||"cover"!==q[1]&&"contain"!==q[1]||(H.style.backgroundSize=q[1]),s&&(H.style.backgroundPosition=s[1]);var Q=a._elements.Width.querySelector("input"),R=a._elements.Height.querySelector("input");Q.addEventListener("blur",a._setCostomSizeOnFigure.bind(a,Q,R,H,d)),R.addEventListener("blur",a._setCostomSizeOnFigure.bind(a,Q,R,H,d));var S=a._elements.BgStyle;S.addEventListener("supra.check.select",function(b){"auto"===b.detail.toLowerCase()?(H.style.backgroundSize=H.dataset.percent+"% auto",H.style.webkitBackgroundSize=H.dataset.percent+"% auto"):"custom (width x height)"===b.detail.toLowerCase()?(a._body.classList.add("show-custom-size"),a._setCostomSizeOnFigure(Q,R,H,d)):(H.style.backgroundSize=b.detail.toLowerCase(),H.style.webkitBackgroundSize=b.detail.toLowerCase()),"custom (width x height)"!==b.detail.toLowerCase()&&a._body.classList.contains("show-custom-size")&&a._body.classList.remove("show-custom-size")});var T=a._elements.BgPositionLR;T.addEventListener("supra.check.select",function(a){var b=U.querySelector(".dropdown button").dataset.value.toLowerCase();H.style.backgroundPosition=b+" "+a.detail.toLowerCase()});var U=a._elements.BgPositionTB;U.addEventListener("supra.check.select",function(a){var b=T.querySelector(".dropdown button").dataset.value.toLowerCase();H.style.backgroundPosition=a.detail.toLowerCase()+" "+b});var V=a._elements.BgRepeat;V.addEventListener("supra.check.select",function(a){"none"===a.detail.toLowerCase()?(H.style.backgroundRepeat="no-repeat",H.style.webkitBackgroundRepeat="no-repeat"):(H.style.backgroundRepeat=a.detail.toLowerCase().replace(/\s/,"-"),H.style.webkitBackgroundRepeat=a.detail.toLowerCase().replace(/\s/,"-"))}),H.style.opacity=B?B[1]:1;var W=a._elements.inputRange.querySelector("input"),C=a._elements.inputRange.querySelector("label .opacity");W.addEventListener("input",function(){H.style.opacity=this.value/100,C.innerHTML=Math.round(this.value)}),W.addEventListener("change",function(){H.style.opacity=this.value/100,C.innerHTML=Math.round(this.value)})}var X=this._elements.figure.querySelector(".bg-test"),Y=d.className.match(/bg-.-color-(light|dark)/i),Z=a._elements.colorpicker;Y&&X.classList.add(Y[0]);var _=a._elements.BgColor;if(a._setColor(a,l.toLowerCase(),n,o,Z,X),_.addEventListener("supra.check.select",function(b){var c=Z.querySelector("[name=colorpicker_main]").value,d=Z.querySelector("[name=colorpicker_grnt]").value;a._setColor(a,b.detail.toLowerCase(),c,d,Z,X),"solid color"!==b.detail.toLowerCase()&&"default color light"!==b.detail.toLowerCase()&&"default color dark"!==b.detail.toLowerCase()&&(Z.classList.contains("two-cp")||(Z.classList.add("two-cp"),Z.className=Z.className.replace(/\sone-cp/i,"")))}),b.classList.contains("nav")){X.style.opacity=B?B[1]:1;var W=a._elements.inputRange.querySelector("input"),C=a._elements.inputRange.querySelector("label .opacity");W.addEventListener("input",function(){X.style.opacity=this.value/100,C.innerHTML=this.value}),W.addEventListener("chenge",function(){X.style.opacity=this.value/100,C.innerHTML=this.value});var aa=a._elements.figure.querySelector("i");aa.style.display="none"}var ba={image:a._elements.inputImage?a._elements.inputImage.querySelector("input").value:"",bgColor:a._elements.BgColor.querySelector("button").dataset.value.toLowerCase().replace(/_/gi," "),bgStyle:a._elements.BgStyle?a._elements.BgStyle.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgRepeat:a._elements.BgRepeat?a._elements.BgRepeat.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgWidth:a._elements.Width?a._elements.Width.querySelector("input").value.toLowerCase():"",bgHeight:a._elements.Height?a._elements.Height.querySelector("input").value.toLowerCase():"",bgPTB:a._elements.BgPositionTB?a._elements.BgPositionTB.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgPLR:a._elements.BgPositionLR?a._elements.BgPositionLR.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgColor1:a._elements.colorpicker?a._elements.colorpicker.querySelector("[name=colorpicker_main]").value:"",bgColor2:a._elements.colorpicker?a._elements.colorpicker.querySelector("[name=colorpicker_grnt]").value:"",parallax:a._elements.parallax?a._elements.parallax.querySelector("input").checked:"",range:a._elements.inputRange.querySelector("input").value/100,bgMp4:a._elements.inputVideoMp4?a._elements.inputVideoMp4.querySelector("input").value:"",bgOgv:a._elements.inputVideoOgv?a._elements.inputVideoOgv.querySelector("input").value:"",bgPoster:a._elements.inputImagePoster?a._elements.inputImagePoster.querySelector("input").value:"",radio:a._elements.radio?a._elements.radio.querySelector(".radio-inline input:checked").value:""};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var ca=this._getButton("supra-btn btn-primary","Apply",function(){var c={image:a._elements.inputImage?a._elements.inputImage.querySelector("input").value:"",bgColor:a._elements.BgColor.querySelector("button").dataset.value.toLowerCase().replace(/_/gi," "),bgStyle:a._elements.BgStyle?a._elements.BgStyle.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgRepeat:a._elements.BgRepeat?a._elements.BgRepeat.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgWidth:a._elements.Width?a._elements.Width.querySelector("input").value.toLowerCase():"",bgHeight:a._elements.Height?a._elements.Height.querySelector("input").value.toLowerCase():"",bgPTB:a._elements.BgPositionTB?a._elements.BgPositionTB.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgPLR:a._elements.BgPositionLR?a._elements.BgPositionLR.querySelector(".dropdown button").dataset.value.toLowerCase():"",bgColor1:a._elements.colorpicker?a._elements.colorpicker.querySelector("[name=colorpicker_main]").value:"",bgColor2:a._elements.colorpicker?a._elements.colorpicker.querySelector("[name=colorpicker_grnt]").value:"",parallax:a._elements.parallax?a._elements.parallax.querySelector("input").checked:"",range:a._elements.inputRange.querySelector("input").value/100,bgMp4:a._elements.inputVideoMp4?a._elements.inputVideoMp4.querySelector("input").value:"",bgOgv:a._elements.inputVideoOgv?a._elements.inputVideoOgv.querySelector("input").value:"",bgPoster:a._elements.inputImagePoster?a._elements.inputImagePoster.querySelector("input").value:"",radio:a._elements.radio?a._elements.radio.querySelector(".radio-inline input:checked").value:""};a._applySectionBg(a,b,c,ba),$(a._selfDOM).modal("hide")});this._footer.appendChild(ca)},_applySectionBg:function(a,b,c,d){if(c.image=builder.replaceQuotes(c.image)+"?t="+Date.now(),b.classList.contains("nav")){for(var e=b.querySelector("style"),f=0;"STYLE"!==b.children[f].nodeName;){if(0===f)var g=b.children[f].querySelector(".nav-bg"),h="#"+b.children[f].id+" .nav-bg";else var g=b.children[f],h=g.id?"#"+g.id:".off-canvas-overlay";var i=new RegExp("("+h+" ?{)([^}]*)(})","im");a._applyGradientForNavbar(a,b,c,e,i,h,g),f++}var j=b.querySelectorAll("#navbar ul.nav ul");j&&Array.prototype.forEach.call(j,function(d){var f="#"+b.children[0].id+" ul.nav ul",g=new RegExp("("+f+" ?{)([^}]*)(})","im");a._applyGradientForNavbarDropDown(a,b,c,e,g,f,d)});var k=".nav-bg",l=new RegExp("("+k+" ?{)([^}]*)(})","im");e.innerHTML.search(l)!==-1?e.innerHTML=e.innerHTML.replace(l,"$1$2\topacity: "+c.range+";\n$3"):e.innerHTML=k+" {\n \topacity: "+c.range+";\n}"+e.innerHTML}else{var g=b.children[0],m=g.querySelector(".bg"),e=b.querySelector("style"),n=b.querySelector("script"),k="#"+b.children[0].id+" .bg",h="#"+b.children[0].id,l=new RegExp("("+k+" ?{)([^}]*)(})","im"),i=new RegExp("("+h+" ?{)([^}]*)(})","im");if("image-background"===c.radio){m.classList.contains("bg-video")&&(m.classList.remove("bg-video"),delete m.dataset.videBg,delete m.dataset.videOptions,$(m).data("vide")&&$(m).data("vide").destroy(),n.innerHTML=n.innerHTML.replace(/\/\/delete[\s\S]*\/\/deleteend/i,""));var o=c.bgStyle;if("custom_(width_x_height)"===c.bgStyle){var p=c.bgWidth.match(/([0-9]*?(?:px|%)|auto)/i)?c.bgWidth.match(/([0-9]*?(?:px|%)|auto)/i)[1]:"auto",q=c.bgHeight.match(/([0-9]*?(?:px|%)|auto)/i)?c.bgHeight.match(/([0-9]*?(?:px|%)|auto)/i)[1]:"auto";o=p+" "+q}var r="no-repeat";"none"!==c.bgRepeat&&(r=c.bgRepeat.replace(/_/g,"-"));var s=c.bgPTB+" "+c.bgPLR;e.innerHTML.search(l)!==-1?e.innerHTML=e.innerHTML.replace(l,"$1"+a._getSectionBgStyle(c.image,o,r,c.range,s)+"$3"):e.innerHTML="\n"+k+" {"+a._getSectionBgStyle(c.image,o,r,c.range,s)+"}\n"+b.children[1].innerHTML}else"video-background"===c.radio?(e.innerHTML.search(l)!==-1?e.innerHTML=e.innerHTML.replace(l,"$1\n\topacity: "+c.range+";\n$3"):e.innerHTML="\n"+k+" {\n\topacity: "+c.range+";\n}\n"+b.children[1].innerHTML,m.classList.contains("bg-video")?$(m).data("vide")?$(m).data("vide").destroy():m.innerHTML="":(m.classList.add("bg-video"),n.innerHTML+="//delete\nvide_run();\n//deleteend"),m.dataset.videBg="mp4: "+c.bgMp4.slice(2)+", ogv: "+c.bgOgv.slice(2)+", jpg: "+c.bgPoster.slice(2),m.dataset.videOptions="posterType: jpg",$(m).vide({mp4:c.bgMp4.slice(2),ogv:c.bgOgv.slice(2),poster:c.bgPoster.slice(2)},{posterType:"jpg"})):(e.innerHTML.search(l)!==-1&&(e.innerHTML=e.innerHTML.replace(l,"")),m.classList.contains("bg-video")&&(m.classList.remove("bg-video"),$(m).data("vide")&&$(m).data("vide").destroy(),delete m.dataset.videBg,delete m.dataset.videOptions,n.innerHTML=n.innerHTML.replace(/\/\/delete[\s\S]*\/\/deleteend/i,"")));c.parallax?b.classList.contains("parallax")||(b.classList.add("parallax"),m.classList.contains("parallax-bg")||m.classList.add("parallax-bg"),m.dataset.topBottom="transform:translate3d(0px, 25%, 0px)",m.dataset.bottomTop="transform:translate3d(0px, -25%, 0px)",skr&&skr.refresh()):b.classList.contains("parallax")&&(b.classList.remove("parallax"),m.removeAttribute("style"),delete m.dataset.topBottom,delete m.dataset.bottomTop,m.classList.remove("skrollable"),m.classList.remove("skrollable-between"),m.classList.remove("parallax-bg"),skr&&skr.refresh()),a._applyGradientForNavbar(a,b,c,e,i,h,g)}builder.setStep(function(){a._applySectionBg(a,b,d,c)})},_applyGradientForNavbar:function(a,b,c,d,e,f,g){var h="";switch(c.bgColor){case"solid color":h=c.bgColor1;break;case"radial gradient":h="radial-gradient(circle, "+c.bgColor1+" 30%, "+c.bgColor2+" 70%)";break;case"vertical gradient":h="linear-gradient(to bottom, "+c.bgColor1+", "+c.bgColor2+")";break;case"horizontal gradient":h="linear-gradient(to right, "+c.bgColor1+", "+c.bgColor2+")";break;case"angle gradient":h="linear-gradient(135deg, "+c.bgColor1+", "+c.bgColor2+")";break;case"default color light":case"default color dark":default:a._chooseBgColor(c.bgColor.split(" "),g),d.innerHTML=d.innerHTML.replace(e,"")}d.innerHTML.search(e)!==-1&&""!==h?d.innerHTML=d.innerHTML.replace(e,"$1\n\tbackground: "+h+";\n$3"):""!==h&&(d.innerHTML="\n"+f+" {\n\tbackground: "+h+";\n}\n"+d.innerHTML)},_applyGradientForNavbarDropDown:function(a,b,c,d,e,f,g){var h="";switch(c.bgColor){case"solid color":h=c.bgColor1;break;case"radial gradient":case"vertical gradient":case"horizontal gradient":case"angle gradient":h=c.bgColor2;break;case"default color light":case"default color dark":default:a._chooseBgColor(c.bgColor.split(" "),g),d.innerHTML=d.innerHTML.replace(e,"")}d.innerHTML.search(e)!==-1&&""!==h?d.innerHTML=d.innerHTML.replace(e,"$1\n\tbackground: "+h+";\n$3"):""!==h&&(d.innerHTML="\n"+f+" {\n\tbackground: "+h+";\n}\n"+d.innerHTML)},_setColor:function(a,b,c,d,e,f){switch(b){case"solid color":f.style.background=c,e.classList.contains("one-cp")||(e.classList.add("one-cp"),e.className=e.className.replace(/\stwo-cp/i,""));break;case"radial gradient":f.style.background="radial-gradient(circle, "+c+" 30%, "+d+" 70%)";break;case"vertical gradient":f.style.background="linear-gradient(to bottom, "+c+", "+d+")";break;case"horizontal gradient":f.style.background="linear-gradient(to right, "+c+", "+d+")";break;case"angle gradient":f.style.background="linear-gradient(135deg, "+c+", "+d+")";break;case"default color light":case"default color dark":default:f.style.removeProperty("background");var g=b.split(" ");a._chooseBgColor(g,f),e.className=e.className.replace(/\s(two-cp|one-cp)/i,"")}},_chengeCstmColor:function(a,b){var c=this._elements.figure.querySelector(".bg-test"),d=this._elements.BgColor.querySelector("button").dataset.value.toLowerCase();switch(d){case"radial_gradient":c.style.background="radial-gradient(circle, "+a+" 30%, "+b+" 70%)";break;case"vertical_gradient":c.style.background="linear-gradient(to bottom, "+a+", "+b+")";break;case"horizontal_gradient":c.style.background="linear-gradient(to right, "+a+", "+b+")";break;case"angle_gradient":c.style.background="linear-gradient(135deg, "+a+", "+b+")";break;case"solid_color":c.style.background=a}},_chooseBgColor:function(a,b){b.className=b.className.replace(/bg-.-color-(light|dark)/i,""),b.classList.add("bg-1-color-"+a[2])},_getModalPopupBg:function(a){var b=this._targetObject,c="#"+b.children[0].id+" .bg",d=b.children[0],e="";if(controls.findParent(b,["modal-dialog"])){b=builder.editingSectionForm;var f=controls.findParent(this._targetObject,["modal"]);c="#"+f.id+" .bg",d=this._targetObject,e="hide"}this._title.innerHTML="<h4>Background settings</h4>",this._elements=null;var g=b.querySelector("style").innerHTML,h="",i=d.className.match("bg-([0-9]{1})-color-(light|dark)");h=i?"Default color "+i[2]:"Default color light";var j=new RegExp(c+"\\s?{[ \\n\\t\\ra-z0-9:()'\\/.;_-]*background-size:\\s*([^;]*);","im"),k=g.match(j),l=new RegExp(c+"\\s?{[ \\n\\t\\ra-z0-9:()'\\/.;_-]*background-repeat:\\s*([^;]*);","im"),m=g.match(l);a._constructModalBody([{name:"inputImage",func:"inputImage",args:{title:"Background path",elClass:"col-sm-10 col-md-10 col-lg-10",type:"normal"}},{name:"BgStyle",func:"dropDown",args:{menu:["cover","auto","contain","repeat"],title:"Background style:",elClass:"col-sm-10 col-md-10 col-lg-10",callback:function(){return m&&"repeat"===m[1]?m[1]:k?k[1]:"Auto"}}},{name:"BgColor",func:"dropDown",args:{menu:["Default color light","Default color dark"],title:"Background color:",elClass:"col-sm-10 col-md-10 col-lg-10",callback:function(){return h}}},{name:"parallax",func:"switch",args:{title:"Parallax",type:"",checked:b.classList.contains("parallax"),elClass:e,callback:function(a){a.querySelector(".switch").addEventListener("click",function(a){a.preventDefault(),this.classList.contains("switch-on")?(this.classList.remove("switch-on"),this.classList.add("switch-off"),this.querySelector("input").removeAttribute("checked")):(this.classList.remove("switch-off"),this.classList.add("switch-on"),this.querySelector("input").setAttribute("checked",""))})}}}],"col-sm-6 col-md-6 col-lg-6 nopadding");var n=new RegExp(c+"\\s*{[ \\n\\t\\ra-z0-9:()'\\/.;_-]*opacity:\\s*([^;]*)","im"),o=g.match(n);a._constructModalBody([{name:"figure",func:"figure",args:{callback:function(){return a._elements.inputImage},section:d,sizeAuto:!k||k&&"auto"===k[1]}},{name:"inputRange",func:"inputRange",args:{opacity:function(){return o?o[1]:1}}}],"col-sm-6 col-md-6 col-lg-6 nopadding preview-bg");var p=a._elements.figure.querySelector("img"),q=a._elements.figure.querySelector(".img");q.style.display="block",$(a._selfDOM).on("shown.bs.modal",function(){var b=d.getBoundingClientRect().width,c=a._elements.figure.getBoundingClientRect().width,e=Math.round(c/b*100),f=d.getBoundingClientRect().height,g=f*(e/100),h=a._elements.figure.querySelector(".wrap-hover");h.style.height=g+"px"});var r=new RegExp(c+" ?{[ \\n\\t\\ra-z0-9:()'\\/.;_-]*background-image:\\s*url\\('?/?([^']*)'?\\);","im"),s=g.match(r)&&""!==g.match(r)[1]?g.match(r)[1]:"";a._elements.inputImage.querySelector("input").value=clearTimeStamp(s),""!==s&&(p.src=s,q.style.backgroundImage="url('"+s+"')"),m&&"repeat"===m[1]?(q.style.backgroundRepeat="repeat",q.style.webkitBackgroundRepeat="repeat"):(q.style.backgroundRepeat="no-repeat",q.style.webkitBackgroundRepeat="no-repeat"),k&&"auto"!==k[1]&&(q.style.backgroundSize=k[1],q.style.webkitBackgroundSize=k[1]);var t=a._elements.BgStyle;t.addEventListener("supra.check.select",function(a){"repeat"===a.detail.toLowerCase()?(q.style.backgroundRepeat="repeat",q.style.webkitBackgroundRepeat="repeat"):(q.style.backgroundRepeat="no-repeat",q.style.webkitBackgroundRepeat="no-repeat"),"auto"===a.detail.toLowerCase()||"repeat"===a.detail.toLowerCase()?(q.style.backgroundSize=q.dataset.percent+"% auto",q.style.webkitBackgroundSize=q.dataset.percent+"% auto"):(q.style.backgroundSize=a.detail.toLowerCase(),q.style.webkitBackgroundSize=a.detail.toLowerCase())}),q.style.opacity=o?o[1]:1;var u=a._elements.inputRange.querySelector("input");u.addEventListener("input",function(){q.style.opacity=this.value/100});var v=this._elements.figure.querySelector(".bg-test"),w=d.className.match(/bg-.-color-(light|dark)/i);w&&v.classList.add(w[0]);var x=a._elements.BgColor;x.addEventListener("supra.check.select",function(b){var c=b.detail.toLowerCase().split(" ");a._chooseBgColor(c,v)});var y={image:a._elements.inputImage?a._elements.inputImage.querySelector("input").value:"",bgColor:a._elements.BgColor.querySelector("button").dataset.value.toLowerCase().split("_"),bgStyle:a._elements.BgStyle?a._elements.BgStyle.querySelector(".dropdown button").dataset.value.toLowerCase():"",parallax:a._elements.parallax?a._elements.parallax.querySelector("input").checked:"",range:a._elements.inputRange.querySelector("input").value/100};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var z=this._getButton("supra-btn btn-primary","Apply",function(){var c={image:a._elements.inputImage?a._elements.inputImage.querySelector("input").value:"",bgColor:a._elements.BgColor.querySelector("button").dataset.value.toLowerCase().split("_"),bgStyle:a._elements.BgStyle?a._elements.BgStyle.querySelector(".dropdown button").dataset.value.toLowerCase():"",parallax:a._elements.parallax?a._elements.parallax.querySelector("input").checked:"",range:a._elements.inputRange.querySelector("input").value/100};a._applyPopupBg(a,b,c,y),$(a._selfDOM).modal("hide")});this._footer.appendChild(z)},_applyPopupBg:function(a,b,c,d){c.image=builder.replaceQuotes(c.image)+"?t="+Date.now();var e="#"+b.children[0].id+" .bg",f=b.children[0];if(controls.findParent(this._targetObject,["modal-dialog"])){var g=controls.findParent(this._targetObject,["modal"]);e="#"+g.id+" .bg",f=this._targetObject}var h=new RegExp("("+e+" ?{)([^}]*)(})","im"),i=c.bgStyle,j="no-repeat";"repeat"===c.bgStyle&&(i="auto",j=c.bgStyle);var k=b.querySelector("style");k.innerHTML.search(h)!==-1?k.innerHTML=k.innerHTML.replace(h,"$1"+a._getBgStyle(c.image,i,j,c.range)+"$3"):k.innerHTML="\n"+e+" {"+a._getBgStyle(c.image,i,j,c.range)+"}\n"+b.children[1].innerHTML,a._chooseBgColor(c.bgColor,f);var l=f.querySelector(".bg");if(c.parallax)b.classList.contains("parallax")||(b.classList.add("parallax"),l.classList.contains("parallax-bg")||l.classList.add("parallax-bg"),l.dataset.topBottom="transform:translate3d(0px, 25%, 0px)",l.dataset.bottomTop="transform:translate3d(0px, -25%, 0px)",skr&&skr.refresh());else if(b.classList.contains("parallax")){b.classList.remove("parallax"),l.removeAttribute("style");for(var m in l.dataset)delete l.dataset[m];l.classList.remove("skrollable"),l.classList.remove("skrollable-between"),l.classList.remove("parallax-bg"),skr&&skr.refresh()}builder.setStep(function(){a._applySectionBg(a,b,d,c)})},_getModalSectionSettings:function(a){var b=a._targetObject,c=b.children[0];this._title.innerHTML="<h4>Section settings</h4>",this._elements=null,a._constructModalBody([{name:"PadTop",func:"dropDown",args:{menu:["0px","25px","50px","75px","100px","125px","150px","200px","250px","300px","350px","400px"],title:"Padding top:",elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var b=a._targetObject.children[0],c=b.className.match(/pt-([^ ]*)/i);return c?c[1]+"px":"0px"}}},{name:"PadBottom",func:"dropDown",args:{menu:["0px","25px","50px","75px","100px","125px","150px","200px","250px","300px","350px","400px"],title:"Padding bottom:",elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var b=a._targetObject.children[0],c=b.className.match(/pb-([^ ]*)/i);return c?c[1]+"px":"0px"}}}],"col-sm-6 col-md-6 col-lg-6 section-set-dropdown");var d=!1;c.classList.contains("dark")&&(d=!0);var e=!1;c.classList.contains("separator-bottom")&&(e=!0),a._constructModalBody([{name:"separator",func:"dropDown",args:{title:"Separator:",menu:["None","Content width","Screen width"],elClass:"separator",callback:function(){if(c.className.search(/sep-/)!==-1){var a=c.className.match(/sep-[^\s]*/);return"sep-b"===a[0]?"content width":"screen width"}return"none"}}},{name:"skin",func:"switch",args:{title:"Dark skin:",type:"",checked:d,callback:function(a){a.querySelector(".switch").addEventListener("click",function(a){a.preventDefault(),this.classList.contains("switch-on")?(this.classList.remove("switch-on"),this.classList.add("switch-off"),this.querySelector("input").removeAttribute("checked")):(this.classList.remove("switch-off"),this.classList.add("switch-on"),this.querySelector("input").setAttribute("checked",""))})}}}],"col-sm-6 col-md-6 col-lg-6 nopadding section-settings");var f={paddingTop:a._elements.PadTop.querySelector("button").dataset.value,paddingBottom:a._elements.PadBottom.querySelector("button").dataset.value,skin:a._elements.skin.querySelector("input").checked,separator:a._elements.separator.querySelector(".dropdown button").dataset.value.replace(/_/i," ")};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var g=this._getButton("supra-btn btn-primary","Apply",function(){var c={paddingTop:a._elements.PadTop.querySelector("button").dataset.value,paddingBottom:a._elements.PadBottom.querySelector("button").dataset.value,skin:a._elements.skin.querySelector("input").checked,separator:a._elements.separator.querySelector(".dropdown button").dataset.value.replace(/_/i," ")};a._applySectionSettings(a,b,c,f),$(a._selfDOM).modal("hide")});this._footer.appendChild(g)},_applySectionSettings:function(a,b,c,d){var e=b.children[0],f=e.className.match(/pt-[^ ]*/i),g=e.className.match(/pb-[^ ]*/i);f&&void 0!==f[0]&&e.classList.remove(f[0]),e.classList.add("pt-"+c.paddingTop.substr(0,c.paddingTop.length-2)),g&&void 0!==g[0]&&e.classList.remove(g[0]),e.classList.add("pb-"+c.paddingBottom.substr(0,c.paddingBottom.length-2)),"fixed"===b.style.position&&setTimeout(function(){b.style.height=b.children[0].getBoundingClientRect().height+"px"},600);for(var h=0;"STYLE"!==b.children[h].nodeName;)a._skinCheck(a,c.skin,b.children[h],"light","dark"," light|^light"," dark|^dark"),h++;var i=b.querySelector("form");if(i){var j=document.getElementById(e.id+"-success"),k=document.getElementById(e.id+"-error");j&&a._skinCheck(a,c.skin,j,"light","dark"," light|^light"," dark|^dark"),k&&a._skinCheck(a,c.skin,k,"light","dark"," light|^light"," dark|^dark")}if(c.separator){if(e.className.search(/sep-/)!==-1){var l=e.className.match(/sep-[^\s]*/);e.classList.remove(l[0])}"content width"===c.separator?e.classList.add("sep-b"):"screen width"===c.separator&&e.classList.add("sep-full-b")}builder.setStep(function(){a._applySectionSettings(a,b,d,c)})},_getModalNavSectionSettings:function(a){var b=a._targetObject,c=b.children[0];this._title.innerHTML="<h4>Navigation settings</h4>",this._elements=null;var d=!1;c.classList.contains("dark")&&(d=!0),a._constructModalBody([{name:"type",func:"dropDown",args:{title:"Type:",menu:["Default","Absolute","Absolute - double padding","Fixed","Fixed - slide start","Fixed - transperent start","Fixed - transparent and double padding start"],
    elClass:"col-sm-12 col-md-10 col-lg-10",callback:function(){var a=new RegExp("navbar-[^\\s]*[\\s]*","ig"),b=new RegExp("nav-[^\\s]*[\\s]*","ig"),d=c.className.match(a),e=c.className.match(b);if(d)switch(d[0].trim()){case"navbar-absolute-top":if(!e)return"absolute";if("nav-start-double-pad"===e[0].trim())return"absolute - double padding";break;case"navbar-fixed-top":if(!e)return"fixed";if("nav-start-hide"===e[0].trim())return"fixed - slide start";if("nav-start-hide-bg"===e[0].trim())return e[1]&&"nav-start-double-pad"===e[1].trim()?"fixed - transparent and double padding start":"fixed - transperent start"}return"default"}}},{name:"skin",func:"switch",args:{title:"Dark skin:",type:"",checked:d,callback:function(a){a.querySelector(".switch").addEventListener("click",function(a){a.preventDefault(),this.classList.contains("switch-on")?(this.classList.remove("switch-on"),this.classList.add("switch-off"),this.querySelector("input").removeAttribute("checked")):(this.classList.remove("switch-off"),this.classList.add("switch-on"),this.querySelector("input").setAttribute("checked",""))})}}}],"col-sm-12 col-md-12 col-lg-12 nopadding item-width-50 item-margin-top-0");var e={skin:a._elements.skin.querySelector("input").checked,type:a._elements.type.querySelector(".dropdown button").dataset.value.replace(/_/gi," ")};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var f=this._getButton("supra-btn btn-primary","Apply",function(){var c={skin:a._elements.skin.querySelector("input").checked,type:a._elements.type.querySelector(".dropdown button").dataset.value.replace(/_/gi," ")};a._applyNavSectionSettings(a,b,c,e),$(a._selfDOM).modal("hide")});this._footer.appendChild(f)},_applyNavSectionSettings:function(a,b,c,d){for(var e=b.children[0],f=0;"STYLE"!==b.children[f].nodeName;)a._skinCheck(a,c.skin,b.children[f],"light","dark"," light|^light"," dark|^dark"),f++;if(c.type){var g=!1;window.removeEventListener("scroll",builder.listenerSrcollTopForNav),e.style.transition="all 0s ease 0s";var h=new RegExp("navbar-[^\\s]*[\\s]*","ig"),i=new RegExp("nav-[^\\s]*[\\s]*","ig");switch(e.className=e.className.replace(h,"").trim(),e.className=e.className.replace(i,"").trim(),c.type){case"absolute":e.className=e.className+" navbar-absolute-top";break;case"absolute - double padding":e.className=e.className+" navbar-absolute-top nav-start-double-pad";break;case"fixed":e.className=e.className+" navbar-fixed-top";break;case"fixed - slide start":e.className=e.className+" navbar-fixed-top nav-start-hide";break;case"fixed - transperent start":e.className=e.className+" navbar-fixed-top nav-start-hide-bg";break;case"fixed - transparent and double padding start":e.className=e.className+" navbar-fixed-top nav-start-hide-bg nav-start-double-pad",g=!0,window.section=e}var j=window.getComputedStyle(e,null).getPropertyValue("position");b.removeAttribute("style"),builder.setPosition(e,b,j,1095),"absolute"!==c.type&&"absolute - double padding"!==c.type||(b.style.left="50px");var k=1;e.className.search(/nav-start-double-pad/)!==-1&&(k=3);var l=e.getBoundingClientRect().height*k;b.style.height=l+"px",setTimeout(function(){e.style.removeProperty("transition")},100),g&&window.addEventListener("scroll",builder.listenerSrcollTopForNav)}builder.setStep(function(){a._applyNavSectionSettings(a,b,d,c)})},_skinCheck:function(a,b,c,d,e,f,g){f=f||d,g=g||e,"NAV"===c.tagName&&"light"!==d&&(c=c.querySelector(".nav-bg")),b?(c.className.search(RegExp(f,"i"))!==-1&&(c.className=c.className.replace(RegExp(f+"\\s*","i")," ")),c.classList.add(e)):(c.className.search(RegExp(g,"i"))!==-1&&(c.className=c.className.replace(RegExp(g+"\\s*","i")," ")),c.classList.add(d))},_getModalGallery:function(a){this._title.innerHTML="<h4>Choose image</h4>",this._title.appendChild(this._upload(a)),this._elementsGallery=null;var b=new FormData;b.append("type",this._targetObject.type),builder.ajax(b,"getgallery",function(b){b=JSON.parse(b),a._constructModalBody([{name:"gallery",func:"galleryItems",args:{data:b.gallery,className:"gallery"}}],"col-sm-12 col-md-12 col-lg-12 nopadding"),a._elementsGallery=b.gallery});var c=a._targetObject.parentModal._selfDOM.querySelector(".modal-preloader");c.classList.toggle("active");var d=$(a._selfDOM).modal("show");d.on("shown.bs.modal",function(){c.classList.toggle("active");var b=a._body,d=a._targetObject.targetElement.querySelector("input").value,e=/images.*\/[^./]+\./i.test(d)?d.match(/images.*\/([^./]+)\./i)[1].toLowerCase():"";if(""!==e){var f=b.querySelector("[data-id="+e+"]");if(f){builder.selection(f);var h=(b.querySelector(".item.gallery"),b.scrollTop),i=b.getBoundingClientRect().top,j=f.getBoundingClientRect().top;b.scrollTop=h+j-i}}}),this._body.classList.add("height-500"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var e=this._getButton("supra-btn btn-primary","Apply",function(){if(a._elements.gallery.getElementsByClassName("active")){var b=a._targetObject,c=a._elements.gallery.getElementsByClassName("active")[0];if(c){var d=c.dataset.src,e="";if(b.targetElement.classList.contains("retina"))e+=" 2x";else{var f=b.targetElement.parentElement.querySelector(".retina input.choice-images");f&&c.dataset.srcset?f.value=c.dataset.srcset+" 2x":f&&(f.value="")}b.targetElement.querySelector("input").value=clearTimeStamp(d)+e;var g=b.parentModal._elements.figure;if(g){var h=g.querySelector("img"),i=g.querySelector(".img");if(b.targetElement.classList.contains("video")){var j=$(g).find(".bg-video"),k=j.data("vide"),l=k.path.mp4,m=k.path.ogv;j.data("vide").destroy(),j.vide({mp4:l,ogv:m,poster:d.slice(2)},{posterType:"jpg"})}else h.src=d,i.style.backgroundImage="url('"+d+"')"}}}$(a._selfDOM).modal("hide")});this._footer.appendChild(e)},_getModalGalleryVideo:function(a){this._title.innerHTML="<h4>Choose video</h4>";var b="gallery-video";"jpg"===a._targetObject.type&&(this._title.innerHTML="<h4>Choose poster</h4>",b="gallery"),this._title.appendChild(this._uploadVideo(a,a._targetObject.type)),this._elementsGallery=null;var c=new FormData;c.append("data",a._targetObject.type),builder.ajax(c,"getgalleryvideo",function(c){c=JSON.parse(c),a._constructModalBody([{name:"gallery",func:"galleryItems",args:{data:c.gallery,className:b,type:a._targetObject.type}}],"col-sm-12 col-md-12 col-lg-12 nopadding"),a._elementsGallery=c.gallery});var d=a._targetObject.parentModal._selfDOM.querySelector(".modal-preloader");d.classList.toggle("active");var e=$(a._selfDOM).modal("show");e.on("shown.bs.modal",function(){d.classList.toggle("active");var b=a._body,c=a._targetObject.targetElement.querySelector("input").value,e=/video.*\/[^./]+\./i.test(c)?c.match(/video.*\/([^./]+)\./i)[1].toLowerCase():"";if(""!==e){var f=b.querySelector("[data-id="+e+"]");if(f){builder.selection(f);var h=(b.querySelector(".item.gallery"),b.scrollTop),i=b.getBoundingClientRect().top,j=f.getBoundingClientRect().top;b.scrollTop=h+j-i}}}),this._body.classList.add("height-500"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var f=this._getButton("supra-btn btn-primary","Apply",function(){if(a._elements.gallery.getElementsByClassName("active")){var b=a._targetObject,c=a._elements.gallery.getElementsByClassName("active")[0];if(c){var d=c.dataset.src,e="";b.targetElement.querySelector("input").value=d+e;var f=b.parentModal._elements.figure;if(f){var g=$(f).find(".bg-video"),h=g.data("vide"),i=h?h.path.mp4:"",j=h?h.path.ogv:"",k=h?h.path.poster:"";g.data("vide")&&g.data("vide").destroy(),"mp4"===a._targetObject.type?g.vide({mp4:d.slice(2),ogv:j,poster:k},{posterType:"jpg"}):"ogv"===a._targetObject.type?g.vide({mp4:i,ogv:d.slice(2),poster:k},{posterType:"jpg"}):g.vide({mp4:i,ogv:j,poster:d.slice(2)},{posterType:"jpg"})}}}$(a._selfDOM).modal("hide")});this._footer.appendChild(f)},_getModalIconsGallery:function(a){this._title.innerHTML="<h4>Choose icon</h4>",this._elementsGallery=null,builder.ajax(null,"geticonsgallery",function(b){b=JSON.parse(b),a._constructModalBody([{name:"gallery",func:"galleryItems",args:{data:b.iconsGallery[0],className:"icons"}}],"col-sm-12 col-md-12 col-lg-12 padding-top-10"),a._elementsGallery=b.gallery;var c=a._targetObject,d=a._body,e=/icon-(?!size|position)[^\s]+/i.test(c.className)?c.className.match(/icon-(?!size|position)[^\s]+/i)[0].toLowerCase():"";if(""!==e){var f=d.querySelector("."+e);if(f){f=f.parentElement,builder.selection(f);var h=(d.querySelector(".item.gallery"),d.scrollTop),i=d.getBoundingClientRect().top,j=f.getBoundingClientRect().top;d.scrollTop=h+j-i-10}}}),this._header.style.paddingBottom="19px",this._body.classList.add("height-500"),this._body.classList.add("margin-top--10"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var b=this._getButton("supra-btn btn-primary","Apply",function(){if(a._elements.gallery.getElementsByClassName("active")){var b=a._targetObject,c=a._elements.gallery.querySelectorAll(".active i")[1].className,d=b.className;a._applyIconsGallery(a,b,c,d)}$(a._selfDOM).modal("hide")});this._footer.appendChild(b)},_applyIconsGallery:function(a,b,c,d){var e=new RegExp("icon-(?!size|position|color)[^ ]*","i");b.className=d.replace(e,c),builder.setStep(function(){a._applyIconsGallery(a,b,d,c)})},_getModalDelete:function(a){a._header.innerHTML='<h5 class="text-center">Are you sure you want to delete this section?</h5>',a._body.classList.add("nopadding"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var b=this._getButton("supra-btn btn-danger","Delete",function(){var b=a._targetObject.page,c=a._targetObject.section;b.deleteSection(c),AOS&&AOS.refresh(),$(a._selfDOM).modal("hide")});this._footer.appendChild(b)},_getModalDeleteElement:function(a){a._header.innerHTML='<h5 class="text-center">Are you sure you want to delete this element?</h5>',a._body.classList.add("nopadding"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var b=this._getButton("supra-btn btn-danger","Delete",function(){var b=a._targetObject;builder.getActivePageObject().deleteElement(b),$(a._selfDOM).modal("hide")});this._footer.appendChild(b)},_getModalDeleteProject:function(a){a._header.innerHTML='<h5 class="text-center">If you start new project, current project will be deleted. Are you sure you want to start new project?</h5>',a._body.classList.add("nopadding"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var b=this._getButton("supra-btn btn-primary","Start new project",function(){builder.createNewProject(),$(a._selfDOM).modal("hide")});this._footer.appendChild(b)},_getModalReplace:function(a){var b=a._targetObject,c=Object.keys(b.sections[builder.sectionClicked.dataset.group])[0],d=b.getDOMSelf().querySelector("#"+c).parentElement,e="footer";d.classList.contains("nav")&&builder&&(e="header"),a._header.innerHTML='<h5 class="flex-center">You can add only one navigation per page.</h5><h5 class="flex-center">Do you want raplace '+e+"?</h5>",a._body.classList.add("nopadding"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var f=this._getButton("supra-btn btn-danger","Replace",function(){b.deleteSection(d,null,null,"replace"),document.body.classList.contains("off-canvas-active")&&document.body.classList.remove("off-canvas-active"),d.classList.contains("nav")&&builder?b.addSection(builder.sectionClicked,"nav",builder.defaultStyleType):d.classList.contains("footer")&&builder&&b.addSection(builder.sectionClicked,"footer",builder.defaultStyleType),$(a._selfDOM).modal("hide")});this._footer.appendChild(f)},_getModalButtonSettings:function(a){var b=a._targetObject;this._title.innerHTML="<h4>Button settings</h4>",this._elements=null;var c=new RegExp("(\\."+builder.defaultStyleType+"-modal .choice-element .btn-default [\\s\\t\\w#.-]*{[\\s\\n\\t]*).*[\\s\\n\\t]*border-color:\\s*([^;]*)[^}]*(})","im"),d=builder.modalContainerStyleHtml.innerHTML.match(c),e="#ffffff"===d[2]?"dark":"",f=new RegExp("(\\."+builder.defaultStyleType+"-modal .choice-element .btn-primary [\\s\\t\\w#.-]*{[\\s\\n\\t]*).*[\\s\\n\\t]*border-color:\\s*([^;]*)[^}]*(})","im"),g=builder.modalContainerStyleHtml.innerHTML.match(f),h="#ffffff"===g[2]?"dark":"",i=[{className:"choice-element",btnClass:"btn-success"},{className:"choice-element "+h,btnClass:"btn-primary"},{className:"choice-element",btnClass:"btn-danger"},{className:"choice-element",btnClass:"btn-warning"},{className:"choice-element",btnClass:"btn-info"},{className:"choice-element",btnClass:"btn-link"},{className:"choice-element "+e,btnClass:"btn-default"},{className:"choice-element",btnClass:"btn-image",html:'<i class="icon-picture"></i><span>Image</span>'}];i.forEach(function(a){var c=a.html||"Text",d="btn-image"===a.btnClass?" flex-center flex-column":"";a.html='<div class="btn '+a.btnClass+d+'">'+c+"</div>",b.classList.contains(a.btnClass)&&(a.className+=" choosen")}),b.classList.contains("btn-image")&&a._body.classList.add("show-input-img"),a._constructModalBody([{name:"button",func:"choiceElement",args:{buttons:i,callback:function(){this.querySelector(".btn-image")?a._body.classList.add("show-input-img"):a._body.classList.contains("show-input-img")&&a._body.classList.remove("show-input-img")}}}],"col-sm-12 col-md-12 col-lg-12 nopadding btn-image-control margin-bottom--20"),a._constructModalBody([{name:"size",func:"dropDown",args:{menu:["Large","Default","Small","Extra small"],title:"Button size:",elClass:"col-sm-11 col-md-11 col-lg-11",callback:function(){return b.className.search(/btn-lg/i)!==-1?"Large":b.className.search(/btn-sm/i)!==-1?"Small":b.className.search(/btn-xs/i)!==-1?"Extra small":"Default"}}},{name:"icons",func:"dropDown",args:{menu:["none","Left side","Right side"],title:"Icon:",elClass:"col-sm-11 col-md-11 col-lg-11",callback:function(){return"I"===b.firstChild.tagName?"left side":"I"===b.lastChild.tagName?"right side":"none"}}}],"col-sm-12 col-md-12 col-lg-12 nopadding btn-image-control hide-setting-btn-html"),a._constructModalBody([{name:"inputImage",func:"inputImage",args:{title:"Image path",elClass:"col-sm-12 col-md-10 col-lg-10",type:"normal"}},{name:"inputImageRetina",func:"inputImage",args:{title:"Retina image path",elClass:"col-sm-12 col-md-10 col-lg-10 retina",type:"retina"}},{name:"inputText",func:"inputText",args:{title:"Image Alt",elClass:"col-sm-12 col-md-10 col-lg-10"}}],"col-sm-6 col-md-6 col-lg-6 nopadding pre-input-img height-240"),a._constructModalBody([{name:"figure",func:"figure",args:{callback:function(){return a._elements.inputImage}}}],"col-sm-6 col-md-6 col-lg-6 nopadding pre-input-img height-240");var j=b.querySelector("img"),k=a._elements.inputImage.querySelector("input"),l=a._elements.inputImageRetina.querySelector("input"),m="",n=a._elements.figure.querySelector("img");k&&(k.value=j?clearTimeStamp(j.getAttribute("src")):"./images/apple-badge-small.png"),l&&(l.value=j?clearTimeStamp(j.getAttribute("srcset")):"",m=l.value),n&&(n.src=j?j.getAttribute("src"):"./images/apple-badge-small.png",j&&j.getAttribute("srcset")&&n.setAttribute("srcset",j.getAttribute("srcset"))),a._elements.inputText.querySelector("input").value=j?j.alt:"";var o=b.className,p=!1,q=a._elements.icons;q.addEventListener("supra.check.select",function(a){p=!0});var r={className:o,size:a._elements.size.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),inputImage:k.value,inputRetina:l.value,icons:a._elements.icons.querySelector(".dropdown button").dataset.value.replace(/_/gi," ").toLowerCase(),contentSave:b.innerHTML,triggerIC:p};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var s=this._getButton("supra-btn btn-primary","Apply",function(){var c="default";a._elements.button.querySelector(".choosen .btn")&&(c=a._elements.button.querySelector(".choosen .btn").className,c=c.match(/btn-(success|primary|danger|warning|info|link|default|image)/i)[1]);var d=b.className.replace(/btn-(success|primary|danger|warning|info|link|default|image)/i,"btn-"+c),e={className:d.replace(/btn-(?:lg|sm|xs)/,"").trim(),size:a._elements.size.querySelector(".dropdown button").dataset.value.replace(/_/gi," ").toLowerCase(),inputImage:k.value,inputRetina:l.value,icons:a._elements.icons.querySelector(".dropdown button").dataset.value.replace(/_/gi," ").toLowerCase(),contentSave:null,triggerIC:p};a._applyButtonSettings(a,b,e,r),$(a._selfDOM).modal("hide")});this._footer.appendChild(s)},_applyButtonSettings:function(a,b,c,d){if(c.className.search(/btn-image/)!==-1){var e=new Image;e.src=c.inputImage+"?t="+Date.now(),e.className="spr-option-img-nosettings",e.setAttribute("srcset",c.inputRetina.replace(/\s2x/,"?t="+Date.now()+" 2x")),b.innerHTML="",b.appendChild(e),c.className="btn btn-image"}else if(b.classList.contains("btn-image")){var f=document.createElement("span");f.classList.add("spr-option-textedit"),f.innerHTML="Text",b.innerHTML="",b.appendChild(f)}if(c.className.search(/btn-image/)===-1){switch(c.size){case"large":c.className+=" btn-lg";break;case"small":c.className+=" btn-sm";break;case"extra small":c.className+=" btn-xs"}if(c.contentSave)b.innerHTML=c.contentSave;else if(c.triggerIC){var g=b.querySelector("i");g&&b.removeChild(g);var h=document.createElement("i");switch(h.className="icon-plus-circle",c.icons){case"left side":h.className+=" icon-position-left icon-size-m";var i=b.firstChild;b.insertBefore(h,i);break;case"right side":h.className+=" icon-position-right icon-size-m",b.appendChild(h)}}}b.classList.contains("btn-block")&&(c.className+=" btn-block"),b.className=c.className,builder.setStep(function(){a._applyButtonSettings(a,b,d,c)})},_getModalImageSettings:function(a){var b=a._targetObject;"img"!==b.nodeName.toLowerCase()&&(b=a._targetObject.querySelector("img")),this._title.innerHTML="<h4>Image settings</h4>",this._elements=null,a._constructModalBody([{name:"inputImage",func:"inputImage",args:{title:"Image path",elClass:"col-sm-10 col-md-10 col-lg-10",type:"normal"}},{name:"inputImageRetina",func:"inputImage",args:{title:"Retina image path",elClass:"col-sm-10 col-md-10 col-lg-10 retina",type:"retina"}},{name:"inputText",func:"inputText",args:{title:"Image Alt",elClass:"col-sm-10 col-md-10 col-lg-10"}}],"col-sm-6 col-md-6 col-lg-6 nopadding"),a._constructModalBody([{name:"figure",func:"figure",args:{callback:function(){return a._elements.inputImage}}}],"col-sm-6 col-md-6 col-lg-6 nopadding");var c=a._elements.inputImage.querySelector("input"),d=a._elements.inputImageRetina.querySelector("input"),e="",f=a._elements.figure.querySelector("img");c&&(c.value=b.getAttribute("src")),d&&(d.value=clearTimeStamp(b.getAttribute("srcset")),e=d.value),f&&(f.src=clearTimeStamp(b.getAttribute("src"))),a._elements.inputText.querySelector("input").value=b.alt;var g={inputImage:builder.replaceQuotes(a._elements.inputImage.querySelector("input").value),inputRetina:builder.replaceQuotes(a._elements.inputImageRetina.querySelector("input").value),inputRetinaBeforSetNewValue:e,alt:a._elements.inputText.querySelector("input").value};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var h=this._getButton("supra-btn btn-primary","Apply",function(){var c={inputImage:builder.replaceQuotes(a._elements.inputImage.querySelector("input").value),inputRetina:builder.replaceQuotes(a._elements.inputImageRetina.querySelector("input").value),inputRetinaBeforSetNewValue:e,alt:a._elements.inputText.querySelector("input").value};a._applyImageSettings(a,b,c,g),$(a._selfDOM).modal("hide")});this._footer.appendChild(h)},_applyImageSettings:function(a,b,c,d){b.src=c.inputImage+"?t="+Date.now(),""!==c.inputRetina?b.setAttribute("srcset",c.inputRetina.replace(/\s2x/,"?t="+Date.now()+" 2x")):b.setAttribute("srcset",""),b.alt=c.alt;var e=controls.findParent(a._targetObject,["spr-gallery"]);e&&$(e).trigger("refresh.owl.carousel"),builder.setStep(function(){a._applyImageSettings(a,b,d,c)})},_getModalGMapSettings:function(a){this._title.innerHTML="<h4>Map settings</h4>",this._elements=null;var b=a._targetObject.script.innerHTML,c=a._targetObject.map.id.replace(/-/gi,"_"),d=c+"\\([\\n\\s\\w\\/;:'\"#(){}\\[\\]\\|$@!?\\=+,.<>-]*",e="[\\n\\s\\w\\/;:'\"#(){}\\[\\]\\|$@!?\\=+,.<>-]*"+c+"\\(",f=new RegExp(d+"google\\.maps\\.LatLng\\(([^,]*)"+e,"im"),g=b.match(f)[1];a._constructModalBody([{name:"latitude",func:"inputText",args:{title:"Latitude:",value:g,elClass:"col-sm-11 col-md-11 col-lg-11"}}],"col-sm-3 col-md-3 col-lg-3 nopadding");var h=new RegExp(d+"google\\.maps\\.LatLng\\([^,]*,\\s([^)]*)"+e,"im"),i=b.match(h)[1];a._constructModalBody([{name:"longitude",func:"inputText",args:{title:"Longitude:",value:i,elClass:"col-sm-11 col-md-11 col-lg-11 "}}],"col-sm-3 col-md-3 col-lg-3 nopadding item-margin-top-0");for(var j=[],k=1;k<19;k++)j.push(k+"");var l=new RegExp(d+"zoom:\\s*([^,]*)"+e,"im"),m=b.match(l)[1];a._constructModalBody([{name:"zoom",func:"dropDown",args:{menu:j,title:"Zoom:",elClass:"col-sm-11 col-md-11 col-lg-11",callback:function(){return m}}}],"col-sm-3 col-md-3 col-lg-3 nopadding item-margin-top-0");var n=new RegExp("var\\s*([^\\s]*)*\\s*=\\s*\\[","ig"),o=b.match(n),p=[];o.forEach(function(a){p.push(a.match(/var\s([^\s]*)/i)[1])});var q=new RegExp(d+"google\\.maps\\.StyledMapType\\(([^,]*)"+e,"im"),r=b.match(q)[1];a._constructModalBody([{name:"style",func:"dropDown",args:{menu:p,title:"Color style:",elClass:"col-sm-11 col-md-11 col-lg-11",callback:function(){return r}}}],"col-sm-3 col-md-3 col-lg-3 nopadding item-margin-top-0");var s=new RegExp(d+"var contentString = '\\s*([^']*)"+e,"im"),t=b.match(s)[1];a._constructModalBody([{name:"marker",func:"textArea",args:{title:"Marker popup content",elClass:"col-sm-12 col-md-12 col-lg-12 nopadding-right-10",value:htmlencode(t)}}],"col-sm-12 col-md-12 col-lg-12 nopadding");var u={latitude:builder.replaceQuotes(a._elements.latitude.querySelector("input").value),longitude:builder.replaceQuotes(a._elements.longitude.querySelector("input").value),zoom:a._elements.zoom.querySelector(".dropdown button").dataset.value.replace(/_/gi," "),marker:a._elements.marker.querySelector("textarea").value,style:firstDown(a._elements.style.querySelector(".dropdown button").dataset.value.replace(/_/gi," ")),contextStart:d,contextEnd:e};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var v=this._getButton("supra-btn btn-primary","Apply",function(){var b={latitude:builder.replaceQuotes(a._elements.latitude.querySelector("input").value),longitude:builder.replaceQuotes(a._elements.longitude.querySelector("input").value),zoom:a._elements.zoom.querySelector(".dropdown button").dataset.value.replace(/_/gi," "),marker:a._elements.marker.querySelector("textarea").value,style:firstDown(a._elements.style.querySelector(".dropdown button").dataset.value.replace(/_/gi," ")),contextStart:d,contextEnd:e};a._applyGMapSettings(a,b,u),$(a._selfDOM).modal("hide")});this._footer.appendChild(v)},_applyGMapSettings:function(a,b,c){var d=a._targetObject.li,e=d.querySelector("script"),f=e.innerHTML,g=new RegExp("(google\\.maps\\.LatLng\\()[^,]*,\\s*[^)]*(\\))","img"),h=new RegExp("("+b.contextStart+b.contextEnd+")","im"),i=f.match(h)[0];i=i.replace(g,"$1"+b.latitude+", "+b.longitude+"$2"),f=f.replace(h,i);var j=new RegExp("("+b.contextStart+"zoom:\\s*)[^,]*("+b.contextEnd+")","im");f=f.replace(j,"$1"+b.zoom+"$2");var k=new RegExp("("+b.contextStart+"var contentString = '\\s*)[^']*('"+b.contextEnd+")","im");f=f.replace(k,"$1"+htmldecode(b.marker)+"$2");var l=new RegExp("("+b.contextStart+"google\\.maps\\.StyledMapType\\()[^,]*("+b.contextEnd+")","im");f=f.replace(l,"$1"+b.style+"$2"),e.innerHTML=f,builder.reloadScript(d),a._targetObject.map.style.position="relative",a._targetObject.map.style.left="0",builder.setStep(function(){a._applyGMapSettings(a,c,b)})},_getModalLinkSettings:function(a){var b=a._targetObject,c=a._targetObject.element,d=c.getAttribute("href")||"",e=c.target||"";if(b.editor){var f=window.getSelection().anchorNode.parentNode;d=f.getAttribute("href")||"",e=f.target||""}this._title.innerHTML="<h4>Link settings</h4>",this._elements=null,a._constructModalBody([{name:"radio",func:"radio",args:{items:["External","Section","Other page","Image","Video popup"],marginTop:""}}],"col-sm-12 col-md-12 col-lg-12 nopadding radio-control external"),a._constructModalBody([{name:"inputText",func:"inputText",args:{title:"",elClass:"col-sm-12 col-md-12 col-lg-12",placeholder:"http://exemple.com",value:d}}],"col-sm-12 col-md-12 col-lg-12 nopadding external");var g=[],h=builder.getActivePageObject();for(var i in h.sections)for(var j in h.sections[i])g.push(j);a._constructModalBody([{name:"section1",func:"dropDown",args:{menu:g,title:"",elClass:"col-sm-12 col-md-12 col-lg-12"}}],"col-sm-12 col-md-12 col-lg-12 nopadding section");var k=[],l=builder.getPagesArray();l.forEach(function(a){k.push(a.getPageName())}),a._constructModalBody([{name:"page",func:"dropDown",args:{menu:k,title:"",elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){return builder.getActivePageObject().getPageName()}}}],"col-sm-6 col-md-6 col-lg-6 nopadding-right-10 other-page"),a._constructModalBody([{name:"inputImage",func:"inputImage",args:{title:"",elClass:"col-sm-12 col-md-12 col-lg-12"}}],"col-sm-12 col-md-12 col-lg-12 nopadding image"),a._constructModalBody([{name:"section2",func:"dropDown",args:{menu:g,title:"",elClass:"col-sm-12 col-md-12 col-lg-12"}}],"col-sm-6 col-md-6 col-lg-6 nopadding other-page"),a._constructModalBody([{name:"target",func:"checkbox",args:{name:"Open in new tab",checked:"_blank"===e}}],"col-sm-12 col-md-12 col-lg-12 nopadding field-checkbox external"),a._constructModalBody([{name:"videoLink",func:"inputText",args:{title:"Iframe source URL",elClass:"col-sm-12 col-md-12 col-lg-12",placeholder:"https://vimeo.com/123395658",value:d}},{name:"description",func:"description",args:{value:"Examples:<br>Vimeo: https://vimeo.com/123395658<br>Youtube: https://www.youtube.com/watch?v=JLhbTGzE6MA"}}],"col-sm-12 col-md-12 col-lg-12 nopadding video-popup");var m=a._elements.radio.querySelectorAll(".radio-inline input");Array.prototype.forEach.call(m,function(b){b.addEventListener("change",function(b){b.preventDefault();var c=controls.findParent(this,["radio-control"]),d=controls.findParent(a._elements.target,["field-checkbox"]);c.className=c.className.replace(/(external|section|other-page|image|video-popup)/i,""),d.className=d.className.replace(/(external|section|other-page|image|video-popup)/i,""),c.classList.add(this.value),"external"===this.value||"other-page"===this.value?d.classList.add(this.value):a._elements.target.querySelector("input").checked=!1})});var n=new RegExp("([\\w._-]*)?\\/?#?([\\w_-]*)?","i"),o=new RegExp("(vimeo\\.com|youtube\\.com)","i"),p=new RegExp("\\.(png|jpg|jpeg|gif|svg)","i"),q=d,r=q.match(n),s=q.match(o),t=q.match(p);if(!s&&!t&&r&&r[1]){var u=builder.getPagesNamesArray(),v=!1;u.forEach(function(a){r[1].replace(/.html/,"")===a&&(v=!0)}),v&&(m[2].checked=!0,a._elements.page.querySelector(".dropdown button").dataset.value=r[1].replace(/.html/,""),a._elements.page.querySelector(".dropdown button span").innerHTML=firstUp(r[1].replace(/.html/,"")),a._elements.section2.querySelector(".dropdown button").dataset.value=r[2],a._elements.section2.querySelector(".dropdown button span").innerHTML=firstUp(r[2]),a._setTypeLink(m[2],!0))}else!s&&!t&&r&&r[2]?(m[1].checked=!0,a._elements.section1.querySelector(".dropdown button").dataset.value=r[2],a._elements.section1.querySelector(".dropdown button span").innerHTML=firstUp(r[2]),a._setTypeLink(m[1]),a._elements.target.querySelector("input").checked=!1):s?(m[4].checked=!0,a._setTypeLink(m[4])):t&&(m[3].checked=!0,a._setTypeLink(m[3]),a._elements.inputImage.querySelector("input").value=clearTimeStamp(d));"_blank"===c.target&&(a._elements.target.querySelector("input").checked=!0),a._elements.page.addEventListener("supra.check.select",function(b){l.forEach(function(c){if(c.getPageName()===b.detail.toLowerCase()){var d=a._elements.section2.querySelector("ul");d.innerHTML="";var e=!1;for(var f in c.sections)for(var g in c.sections[f]){if(!e){e=!0;var h=a._elements.section2.querySelector("button"),i=g;h.dataset.value=replaceSpace(i.toLowerCase()),h.querySelector("span").innerHTML=i}var j=document.createElement("li"),k=document.createElement("a");j.appendChild(k),k.innerHTML=g,d.appendChild(j)}a._addEventListToDropdown(a._elements.section2)}})});var w={link:c.href,targetLink:c.target||"_self"};if("static"===a._targetObject.mode)this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';else{var x=this._getButton("supra-btn btn-danger","Unlink",function(){if("A"===c.nodeName)a._removeLink(a,c),b.button.classList.contains("active")&&b.button.classList.remove("active");else if(b.editor&&b.button.classList.contains("active")){var d=controls.findParent(c,["nav"]),e=null;d?(e=controls.findParent(c,["ul"]),e.style.display="block",e.style.visibility="visible",setTimeout(function(){b.editor.removeLink(b.button),e.style.removeProperty("display"),e.style.removeProperty("visibility")},400)):b.editor.removeLink(b.button)}$(a._selfDOM).modal("hide")});this._footer.appendChild(x)}var y=this._getButton("supra-btn btn-primary","Apply",function(){var d=a._elements.radio.querySelector(".radio-inline input:checked").value,e=builder.replaceQuotes(a._elements.inputText.querySelector("input").value),g=a._elements.target.querySelector("input").checked?"_blank":"_self";if("section"===d)e="#"+a._elements.section1.querySelector(".dropdown button").dataset.value;else if("other-page"===d){var h=a._elements.page.querySelector(".dropdown button").dataset.value+".html",i=a._elements.section2.querySelector(".dropdown button").dataset.value;e=h+"#"+i}else"video-popup"===d?e=builder.replaceQuotes(a._elements.videoLink.querySelector("input").value):"image"===d&&(e=builder.replaceQuotes(a._elements.inputImage.querySelector("input").value),e+="?t="+Date.now());var j=controls.findParent(c,["spr-gallery","gallery"]),k=controls.findParent(c,["section-item"]),l=k.querySelector("script");if(b.editor){var m=controls.findParent(c,["nav"]),n=null,o=null;m?(n=controls.findParent(c,["ul"]),n.style.display="inline-block",n.style.visibility="visible",setTimeout(function(){b.button.classList.contains("active")&&"A"!==f.nodeName?b.editor.removeLink(b.button):"A"===f.nodeName?(b.editor.removeLink(b.button),o=a._setLink(a,c,e,g,b.editor,b.button)):o=a._setLink(a,c,e,g,b.editor,b.button),o&&"video-popup"===d&&builder.applyMagnificPopup(o),o&&"image"===d&&builder.applyMagnificPopupImage(o),n.style.removeProperty("display"),n.style.removeProperty("visibility")},400)):(b.button.classList.contains("active")&&"A"!==f.nodeName?b.editor.removeLink(b.button):"A"===f.nodeName?(b.editor.removeLink(b.button),o=b.editor.setLink(b.button,e,g)):o=b.editor.setLink(b.button,e,g),o&&"video-popup"===d&&builder.applyMagnificPopup(o),o&&"image"===d&&builder.applyMagnificPopupImage(o))}else{if("A"===c.nodeName){var p={link:e,targetLink:g};a._changeLink(a,c,p,w)}else a._setLink(a,c,e,g);b.button.classList.contains("active")||b.button.classList.add("active"),"video-popup"!==d||j||builder.applyMagnificPopup(c),"image"!==d||j||builder.applyMagnificPopupImage(c),!j||"video-popup"!==d&&"image"!==d||l.innerHTML.search(/magnificPopup/m)!==-1&&(c.classList.contains("external")&&c.classList.remove("external"),$(j).magnificPopup({delegate:"a:not(.external)",type:"image",gallery:{enabled:!0},image:{titleSrc:function(a){return a.el.find("span.caption").text()}}}),c.classList.contains("mfp-iframe")||"video-popup"!==d?c.classList.contains("mfp-iframe")&&"video-popup"!==d&&c.classList.remove("mfp-iframe"):c.classList.add("mfp-iframe"));
}j&&j.classList.contains("spr-gallery")&&$(j).trigger("refresh.owl.carousel"),"video-popup"===d||"image"===d||j?"video-popup"!==d&&"image"!==d&&j&&(c.classList.contains("external")||c.classList.add("external")):(c.classList.contains("single-iframe-popup")&&c.classList.remove("single-iframe-popup"),c.classList.contains("single-image-popup")&&c.classList.remove("single-image-popup"),l.innerHTML=l.innerHTML.replace(/\n?\/\/magnific[\s\S]*?\/\/magnificend/im,""),void 0!==$(c).data("magnificPopup")&&($(c).data("magnificPopup").disableOn=function(){return!1})),"video-popup"!==d&&"image"!==d||void 0!==$(c).data("magnificPopup")&&($(c).data("magnificPopup").disableOn=function(){return!a.editingText}),$(a._selfDOM).modal("hide")});this._footer.appendChild(y)},_changeLink:function(a,b,c,d){b.href=c.link,b.target=c.targetLink,b.classList.add("smooth"),$(b).smoothScroll({speed:800}),builder.setStep(function(){a._changeLink(a,b,d,c)})},_setLink:function(a,b,c,d,e,f){if("A"!==b.tagName||e){if(e){var i=document.createElement("a");return i.setAttribute("href",c),i.setAttribute("target",d),i.appendChild(b.childNodes[0]),i.classList.add("smooth"),b.appendChild(i),$(i).smoothScroll({speed:800}),builder.setStep(function(){e.removeLink(f)}),i}var j=document.createElement("a");j.href=c,j.target=d,j.classList.add("smooth"),j.className=b.className,b.removeAttribute("class"),b.parentElement.insertBefore(j,b),j.wrap(b);var k=b.getAttribute("style");j.setAttribute("style",k),b.removeAttribute("style"),controls.rebuildControl(j.parentElement),$(j).smoothScroll({speed:800}),builder.setStep(function(){a._removeLink(a,b.parentElement)})}else{var g={link:c,targetLink:d},h={link:b.getAttribute("href"),targetLink:b.target};a._changeLink(a,b,g,h)}},_setTypeLink:function(a,b){var c=this,d=controls.findParent(a,["radio-control"]),e=controls.findParent(c._elements.target,["field-checkbox"]);d.className=d.className.replace(/(external|section|other-page|image|video-popup)/i,""),e.className=e.className.replace(/(external|section|other-page|image|video-popup)/i,""),d.classList.add(a.value),b&&e.classList.add(a.value)},_removeLink:function(a,b){var c=b.children[0],d=controls.findParent(b,["spr-gallery"]),e=b.getAttribute("href"),f=b.target;if(c&&!d&&"SPAN"!==c.nodeName){b.removeAttribute("href"),b.removeAttribute("target");for(var g=0;g<b.attributes.length;g++){var h=b.attributes[g];c.setAttribute(h.name,h.value)}b.unWrapOne("save-style"),c.classList.contains("smooth")&&c.classList.remove("smooth")}else c=b,b.href="/",b.target="_self";controls.rebuildControl(c.parentElement),builder.setStep(function(){a._setLink(a,c,e,f)})},_getModalVideoLinkSettings:function(a){var b=a._targetObject.element,c=b.src||"";this._title.innerHTML="<h4>Link settings</h4>",this._elements=null,a._constructModalBody([{name:"videoLink",func:"inputText",args:{title:"Iframe source URL",elClass:"col-sm-12 col-md-12 col-lg-12",placeholder:"https://vimeo.com/123395658",value:c}},{name:"description",func:"description",args:{value:"Examples:<br>Vimeo: https://vimeo.com/123395658<br>Youtube: https://www.youtube.com/watch?v=JLhbTGzE6MA"}}],"col-sm-12 col-md-12 col-lg-12 nopadding"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var d={link:builder.replaceQuotes(a._elements.videoLink.querySelector("input").value)},e=this._getButton("supra-btn btn-primary","Apply",function(){var c={link:builder.replaceQuotes(a._elements.videoLink.querySelector("input").value)};c.link.search(/player\.vimeo\.com|embed/i)===-1&&a._applyVideoLinkSettings(a,b,c,d,!1),$(a._selfDOM).modal("hide")});this._footer.appendChild(e)},_applyVideoLinkSettings:function(a,b,c,d,e){if(e)b.src=c.link,e=!1;else{var f=a._getVideoId,g=a._getVideoDomain;b.src=g(c.link)+f(c.link),e=!0}builder.setStep(function(){a._applyVideoLinkSettings(a,b,d,c,e)})},_getVideoId:function(a){var b=a.match(/(vimeo\.com.*\/([0-9]*)|youtube\.com\/watch\?v=(.*))/);return b?void 0!==b[2]?b[2]:b[3]:null},_getVideoDomain:function(a){var b=a.match(/(vimeo\.com)|(youtube\.com)/);if(b)return void 0!==b[1]?"https://player.vimeo.com/video/":"https://www.youtube.com/embed/"},_getModalElementSettings:function(a){var b=a._targetObject.li,d=(b.children[0],a._targetObject.element),e=d.parentElement.style.margin.match(/([^\s]*)\s*([^\s]*)\s*([^\s]*)\s*([^\s]*)/),f=d.className.match(/mt-([^ ]*)/i),g=d.className.match(/mb-([^ ]*)/i),h=["none","fade","fade-up","fade-down","fade-left","fade-right","fade-up-right","fade-up-left","fade-down-right","fade-down-left","flip-up","flip-down","flip-left","flip-right","slide-up","slide-down","slide-left","slide-right","zoom-in","zoom-in-up","zoom-in-down","zoom-in-left","zoom-in-right","zoom-out","zoom-out-up","zoom-out-down","zoom-out-left","zoom-out-right","stretch-left","stretch-right","stretch-top","stretch-bottom"],i=["linear","ease","ease-in","ease-out","ease-in-out","ease-in-back","ease-out-back","ease-in-out-back","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart"];this._title.innerHTML="<h4>Element settings</h4>",this._elements=null,a._constructModalBody([{name:"MarTop",func:"dropDown",args:{menu:["---","0px","5px","10px","15px","20px","25px","30px","40px","50px","60px","75px","100px","125px","150px","200px","250px","300px"],title:"Margin top:",elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var a="---";return f&&void 0!==f[1]&&(a=f[1]+"px"),a}}},{name:"MarBottom",func:"dropDown",args:{menu:["---","0px","5px","10px","15px","20px","25px","30px","40px","50px","60px","75px","100px","125px","150px","200px","250px","300px"],title:"Margin bottom:",elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var a="---";return g&&void 0!==g[1]&&(a=g[1]+"px"),a}}}],"col-sm-6 col-md-6 col-lg-6 section-set-dropdown");var j=d.dataset.aosDuration,k=d.dataset.aosDelay;a._constructModalBody([{name:"animation",func:"dropDown",args:{title:"Animation:",menu:h,elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var a=d.dataset.aos;return a?a:"none"}}},{name:"easing",func:"dropDown",args:{title:"Timing function:",menu:i,elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var a=d.dataset.aosEasing;return a?a:"none"}}},{name:"duration",func:"inputText",args:{title:"Duration:",elClass:"col-sm-3 col-md-3 col-lg-3 float-left duration",placeholder:"",value:j?j:""}},{name:"delay",func:"inputText",args:{title:"Delay:",elClass:"col-sm-3 col-md-3 col-lg-3 float-left delay",placeholder:"",value:k?k:""}},{name:"repeat",func:"dropDown",args:{title:"Repeat:",menu:["Once","Every"],outerClass:"col-sm-6 col-md-6 col-lg-6 nopadding repeat-aos",elClass:"col-sm-12 col-md-12 col-lg-12",callback:function(){var a="Every";return d.dataset.aosOnce&&(a="Once"),a}}}],"col-sm-6 col-md-6 col-lg-6 nopadding section-settings"),d.dataset.aos||a._triggerDisabledAnimationParams(!0),a._elements.animation.addEventListener("supra.check.select",function(b){"none"===b.detail.toLowerCase()?a._triggerDisabledAnimationParams(!0):a._triggerDisabledAnimationParams(!1)});var l=e[4]?e[4]:e[1];""===e[4]&&""!==e[2]&&(l=e[2]);var m={marginTop:a._elements.MarTop.querySelector("button").dataset.value,marginBottom:a._elements.MarBottom.querySelector("button").dataset.value,animation:a._elements.animation.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),easing:a._elements.easing.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),duration:a._elements.duration.querySelector("input").value.replace(/[^0-9]/,""),delay:a._elements.delay.querySelector("input").value.replace(/[^0-9]/,""),repeat:a._elements.repeat.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),maginRight:e[2]?e[2]:e[1],maginLeft:l};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var n=this._getButton("supra-btn btn-primary","Apply",function(){var c={marginTop:a._elements.MarTop.querySelector("button").dataset.value,marginBottom:a._elements.MarBottom.querySelector("button").dataset.value,animation:a._elements.animation.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),easing:a._elements.easing.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),duration:a._elements.duration.querySelector("input").value.replace(/[^0-9]/,""),delay:a._elements.delay.querySelector("input").value.replace(/[^0-9]/,""),repeat:a._elements.repeat.querySelector(".dropdown button").dataset.value.replace(/_/i," ").toLowerCase(),maginRight:e[2]?e[2]:"0px",maginLeft:l};a._applyElementSettings(a,b,c,m),$(a._selfDOM).modal("hide")});this._footer.appendChild(n)},_applyElementSettings:function(a,b,c,d){var e=a._targetObject.element,f=e.className.match(/mt-[^ ]*/i),g=e.className.match(/mb-[^ ]*/i);f&&void 0!==f[0]&&e.classList.remove(f[0]),"---"!==c.marginTop&&e.classList.add("mt-"+c.marginTop.substr(0,c.marginTop.length-2)),g&&void 0!==g[0]&&e.classList.remove(g[0]),"---"!==c.marginBottom&&e.classList.add("mb-"+c.marginBottom.substr(0,c.marginBottom.length-2));var h=e.style.display;e.style.removeProperty("display");var i=window.getComputedStyle(e,null).getPropertyValue("display");"block"===i||e.classList.contains("inline-block")||e.classList.add("inline-block"),e.style.display=h,e.style.removeProperty("margin");var j=window.getComputedStyle(e,null).getPropertyValue("margin"),k=j.match(/([^\s]*)\s*([^\s]*)\s*([^\s]*)\s*([^\s]*)/),l=c.marginTop,m=c.marginBottom;"---"===c.marginTop&&(l=k[1]?k[1]:"0px"),"---"===c.marginBottom&&(m=k[3]?k[3]:"0px",""===k[3]&&""!==k[2]&&(m=k[1]),""===k[2]&&""!==k[1]&&(m=k[1])),e.parentElement.style.margin=l+" "+c.maginRight+" "+m+" "+c.maginLeft,e.style.margin="0",e.className.match(/(\s?aos-[^\s]*)+/i)&&(e.className=e.className.replace(/(\s?aos-[^\s]*)+/gi,"").trim(),""===e.className&&e.removeAttribute("class")),"none"!==c.animation?(e.style.transition="",e.dataset.aos=c.animation,AOS&&setTimeout(function(){AOS.refresh()},c.duration)):delete e.dataset.aos,"none"!==c.animation&&""!==c.easing?e.dataset.aosEasing=c.easing:delete e.dataset.aosEasing,"none"!==c.animation&&"once"===c.repeat?e.dataset.aosOnce="true":e.dataset.aosOnce&&delete e.dataset.aosOnce,""!==c.duration?e.dataset.aosDuration=c.duration:delete e.dataset.aosDuration,""!==c.delay?e.dataset.aosDelay=c.delay:delete e.dataset.aosDelay,builder.setStep(function(){a._applyElementSettings(a,b,d,c)})},_triggerDisabledAnimationParams:function(a){var b=this._elements.duration.querySelector("input"),c=this._elements.delay.querySelector("input");if(a)b.setAttribute("disabled","true"),b.value="",c.setAttribute("disabled","true"),c.value="",this._elements.repeat.querySelector(".dropdown button").classList.add("disabled"),this._elements.easing.querySelector(".dropdown button").classList.add("disabled");else{var d=this._elements.repeat.querySelector(".dropdown button"),e=this._elements.easing.querySelector(".dropdown button");b.removeAttribute("disabled"),b.value=500,c.removeAttribute("disabled"),c.value=0,d.classList.contains("disabled")&&d.classList.remove("disabled"),e.classList.contains("disabled")&&e.classList.remove("disabled")}},_getModalPageSettings:function(a){var b=a._targetObject.page;if(a._title.innerHTML="<h4>Page settings</h4>",a._constructModalBody([{name:"buttonGroup",func:"pageSettinsButton"}],"col-sm-12 col-md-12 col-lg-12 nopadding btn-page-control general"),a._constructModalBody([{name:"name",func:"inputText",args:{title:"Name",elClass:"col-sm-12 col-md-12 col-lg-12",placeholder:"Index",value:b.getPageName()}},{name:"title",func:"inputText",args:{title:"Title",elClass:"col-sm-12 col-md-12 col-lg-12",placeholder:"Title",value:b.getPageTitle()}},{name:"skin",func:"switch",args:{title:"Default Dark skin",type:"gray",checked:b.getDOMSelf().classList.contains("dark-page"),callback:function(a){a.querySelector(".switch").addEventListener("click",function(a){a.preventDefault(),this.classList.contains("switch-on")?(this.classList.remove("switch-on"),this.classList.add("switch-off"),this.querySelector("input").removeAttribute("checked")):(this.classList.remove("switch-off"),this.classList.add("switch-on"),this.querySelector("input").setAttribute("checked",""))})}}}],"col-sm-12 col-md-12 col-lg-12 nopadding general"),a._constructModalBody([{name:"textAreaDesc",func:"textArea",args:{title:"Meta Description",elClass:"col-sm-6 col-md-6 col-lg-6 nopadding-right-10",value:b.getMetaDes()}},{name:"textAreaKeyw",func:"textArea",args:{title:"Meta Keywords",elClass:"col-sm-6 col-md-6 col-lg-6 nopadding-left-10",value:b.getMetaKey()}},{name:"textAreaJs",func:"textArea",args:{title:"Included JavaScript (Google Analitics e.t.c.)",elClass:"col-sm-12 col-md-12 col-lg-12 nopadding",value:b.getJs()}}],"col-sm-12 col-md-12 col-lg-12 nopadding seo"),a._constructModalBody([{name:"preloaderType",func:"preloaderType",args:{title:"Preloader type",elClass:"col-sm-12 col-md-12 col-lg-12",html:["None",'<i class="icon-picture"></i><span>Image</span>','<div class="clock"><div class="arrow_sec"></div><div class="arrow_min"></div></div>','<div class="circles"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'],dataName:["none","img","anim_clock","anim_jp"],active:b.preloader?b.preloader.name:"none"}},{name:"inputImage",func:"inputImage",args:{title:"Image path",elClass:"col-sm-12 col-md-12 col-lg-12 pre-input-img",type:"normal"}},{name:"inputImageRetina",func:"inputImage",args:{title:"Retina image path",elClass:"col-sm-12 col-md-12 col-lg-12 pre-input-img retina",type:"retina"}}],"col-sm-12 col-md-12 col-lg-12 nopadding s-preloader"),b.preloader&&"img"===b.preloader.name){var c=b.preloader.html.match(/src="([^"]*)"/i)[1],d=b.preloader.html.match(/srcset="([^"]*)"/i)[1];this._elements.inputImage.querySelector("input").value=clearTimeStamp(c),this._elements.inputImageRetina.querySelector("input").value=clearTimeStamp(d),this._body.classList.add("show-input-img")}var e=a._elements.preloaderType.querySelector(".active"),f={pageName:a._elements.name.querySelector("input").value,pageTitle:a._elements.title.querySelector("input").value,skin:a._elements.skin.querySelector("input").checked,description:a._elements.textAreaDesc.querySelector("textarea").value,keywords:a._elements.textAreaKeyw.querySelector("textarea").value,js:a._elements.textAreaJs.querySelector("textarea").value,preloader:e,imgPath:a._elements.inputImage.querySelector("input").value,retinaPath:a._elements.inputImageRetina.querySelector("input").value,preloaderHtml:e?e.innerHTML:""};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var g=this._getButton("supra-btn btn-primary","Apply",function(){e=a._elements.preloaderType.querySelector(".active");var c={pageName:a._elements.name.querySelector("input").value,pageTitle:a._elements.title.querySelector("input").value,skin:a._elements.skin.querySelector("input").checked,description:a._elements.textAreaDesc.querySelector("textarea").value,keywords:a._elements.textAreaKeyw.querySelector("textarea").value,js:a._elements.textAreaJs.querySelector("textarea").value,preloader:e,imgPath:a._elements.inputImage.querySelector("input").value,retinaPath:a._elements.inputImageRetina.querySelector("input").value};a._applyPageSettings(a,b,c,f),$(a._selfDOM).modal("hide")});this._footer.appendChild(g)},_applyPageSettings:function(a,b,c,d){if(c.pageName.charAt(0).search(/[0-9]/)!==-1&&(c.pageName="p-"+c.pageName),b.setPageName(c.pageName.toLowerCase()),builder.setPageItemsName(c.pageName.toLowerCase(),a._targetObject.pageItem),b.setPageTitle(c.pageTitle),a._skinCheck(a,c.skin,b.getDOMSelf(),"light-page","dark-page"),b.setMetaDes(c.description),b.setMetaKey(c.keywords),b.setJs(c.js),c.preloader)switch(c.preloader.dataset.value){case"img":var e='<img src="'+builder.replaceQuotes(c.imgPath)+"?t="+Date.now()+'" srcset="'+builder.replaceQuotes(c.retinaPath).replace(/\s2x/,"?t="+Date.now()+" 2x")+'" alt="preloader image"/>';b.preloader={name:c.preloader.dataset.value,html:'<div id="preloader">'+e+"</div>"};break;case"anim_clock":b.preloader={name:c.preloader.dataset.value,html:'<div id="preloader"><div class="clock"><div class="arrow_sec"></div><div class="arrow_min"></div></div></div>'};break;case"anim_jp":b.preloader={name:c.preloader.dataset.value,html:'<div id="preloader"><div class="circles"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>'};break;case"none":default:b.preloader={name:c.preloader.dataset.value,html:""}}else b.preloader=null;builder.setStep(function(){a._applyPageSettings(a,b,d,c)})},_getModalFormSettings:function(a){var b=a._targetObject,c=controls.findParent(b,["section-item"]),d=c.children[0],e=builder.forms[d.id].settings?builder.forms[d.id].settings.subject:"",f=builder.forms[d.id].settings?builder.forms[d.id].settings.email:"";this._title.innerHTML="<h4>Contact form settings</h4>",this._elements=null,a._constructModalBody([{name:"subject",func:"inputText",args:{title:"Subject",elClass:"col-sm-12 col-md-12 col-lg-12",value:e,placeholder:"Enter email subject"}},{name:"eMail",func:"inputText",args:{title:"Email address",elClass:"col-sm-12 col-md-12 col-lg-12",value:f,placeholder:"Enter email address"}}],"col-sm-12 col-md-12 col-lg-12 nopadding"),a._constructModalBody([{name:"radio",func:"radio",args:{title:"Confirm method",items:["None","Popups","Redirect"],marginTop:""}}],"col-sm-12 col-md-12 col-lg-12 nopadding radio-control none"),a._constructModalBody([{name:"description",func:"description",args:{value:"If you use confirmation type with popups, after successful sending of message your user will see popups with confirm information (on error popup if somesing do wrong). Customize popups you can in elements mode."}}],"col-sm-12 col-md-12 col-lg-12 nopadding item-margin-top-0 popups"),a._constructModalBody([{name:"redirectLink",func:"inputText",args:{title:"",elClass:"col-sm-12 col-md-12 col-lg-12",placeholder:"http://URL.com",value:builder.forms[d.id].rLink?builder.forms[d.id].rLink:""}}],"col-sm-12 col-md-12 col-lg-12 nopadding item-margin-top-0 redirect"),a._constructModalBody([{name:"target",func:"checkbox",args:{name:"Open in new tab",checked:"_blank"===builder.forms[d.id].target}}],"col-sm-12 col-md-12 col-lg-12 nopadding field-checkbox item-margin-top-0 redirect");var g=a._elements.radio.querySelectorAll(".radio-inline input");switch(Array.prototype.forEach.call(g,function(b){b.addEventListener("change",function(b){b.preventDefault(),a._changeConfirmMode(this)})}),builder.forms[d.id].mode){case"popups":g[1].checked=!0,a._changeConfirmMode(g[1]);break;case"redirect":g[2].checked=!0,a._changeConfirmMode(g[2])}"_blank"===builder.forms[d.id].target&&(a._elements.target.querySelector("input").checked=!0);var h={subject:a._elements.subject.querySelector("input").value,address:a._elements.eMail.querySelector("input").value,radio:a._elements.radio.querySelector(".radio-inline input:checked").value,rLink:a._elements.redirectLink.querySelector("input").value,target:a._elements.target.querySelector("input").checked};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var i=this._getButton("supra-btn btn-primary","Apply",function(){var b={subject:a._elements.subject.querySelector("input").value,address:a._elements.eMail.querySelector("input").value,radio:a._elements.radio.querySelector(".radio-inline input:checked").value,rLink:a._elements.redirectLink.querySelector("input").value,target:a._elements.target.querySelector("input").checked};a._applyFormSettings(a,e,f,b,h),$(a._selfDOM).modal("hide")});this._footer.appendChild(i)},_changeConfirmMode:function(a){var b=this,c=controls.findParent(a,["radio-control"]),d=controls.findParent(b._elements.target,["field-checkbox"]);c.className=c.className.replace(/(none|popups|redirect)/i,""),d.className=d.className.replace(/(none|popups|redirect)/i,""),c.classList.add(a.value),"redirect"===a.value?d.classList.add(a.value):b._elements.target.querySelector("input").checked=!1},_applyFormSettings:function(a,b,c,d,e){var f=a._targetObject,g=controls.findParent(f,["section-item"]),h=g.children[0],i=g.querySelector("script");builder.forms[h.id].settings={subject:d.subject,email:d.address,type:"contact",id:f.id};var j=new RegExp("success:\\s*function\\s*\\(.*\\)\\s*{[^}]*}","im"),k=new RegExp("error:\\s*function\\s*\\(.*\\)\\s*{[^}]*}","im"),l=new RegExp("(\\$\\('#"+h.id+"-form'\\)\\.submit\\(function\\s*\\(\\)\\s*{)","i"),m=new RegExp("(\\/\\/if data was invalidated)","im"),n=new RegExp("\\$\\('#"+h.id+"-form \\[type=submit\\]'\\)\\.on\\('click'[\\n\\s\\w\\/;:'\"#(){}\\[\\]\\|$@!?\\=+,.-]*'_blank'\\);\\n}\\);\\n","im"),o=new RegExp("\\n\\t\\twindow\\.wBlank\\.close\\(\\);\\n","img"),p="success: function () {\n\t$('#"+h.id+"-form').find('[type=submit]').button('complete');\n}",q="error: function () {\n\t$('#"+h.id+"-form').find('[type=submit]').button('reset');\n}",r=d.target?"_blank":"_self",s="\t\twindow.open('"+d.rLink+"','_self');\n",t="";if("_blank"===r){if(s="\t\twindow.wBlank.location = '"+d.rLink+"';\n",t="\n\t\twindow.wBlank.close();\n",i.innerHTML.search(n)===-1){var u="$('#"+h.id+"-form [type=submit]').on('click', function() {\n\t\twindow.wBlank = window.open('','_blank');\n});\n";i.innerHTML=i.innerHTML.replace(l,u+"$1"),i.innerHTML=i.innerHTML.replace(m,"$1"+t)}}else i.innerHTML=i.innerHTML.replace(n,""),i.innerHTML=i.innerHTML.replace(o,"");switch(d.radio){case"popups":p="success: function () {\n\t\t$('#"+h.id+"-form').find('[type=submit]').button('complete');\n\t\t//Use modal popups to display messages\n\t\t$(document).find('#"+h.id+"-success').modal('show');\n\t}",q="error: function () {\n\t\t$('#"+h.id+"-form').find('[type=submit]').button('reset');\n\t\t//Use modal popups to display messages\n\t\t$(document).find('#"+h.id+"-error').modal('show');\n\t}";break;case"redirect":p="success: function () {\n\t\t$('#"+h.id+"-form').find('[type=submit]').button('complete');\n\t\t//Use modal popups to display messages\n"+s+"\t}",q="error: function () {\n"+t+"\t}",builder.forms[h.id].rLink=d.rLink,builder.forms[h.id].target=r}builder.forms[h.id].mode=d.radio,i.innerHTML=i.innerHTML.replace(j,p),i.innerHTML=i.innerHTML.replace(k,q),builder.setStep(function(){a._applyFormSettings(a,b,c,e,d)})},_getModalSubscribeFormSettings:function(a){var b=a._targetObject,c=controls.findParent(b,["section-item"]),d=c.children[0],e=builder.forms[d.id].settings?builder.forms[d.id].settings.apiKey:"",f=builder.forms[d.id].settings?builder.forms[d.id].settings.listId:"";this._title.innerHTML="<h4>Subscribe form settings</h4>",this._elements=null,a._constructModalBody([{name:"apiKey",func:"inputText",args:{title:"Mailchimp API Key",elClass:"col-sm-12 col-md-12 col-lg-12",value:e,placeholder:"Enter your mailchimp API Key"}},{name:"listId",func:"inputText",args:{title:"Mailchimp List ID",elClass:"col-sm-12 col-md-12 col-lg-12",value:f,placeholder:"Enter your mailchimp List ID"}}],"col-sm-12 col-md-12 col-lg-12 nopadding");var g={apiKey:a._elements.apiKey.querySelector("input").value,listId:a._elements.listId.querySelector("input").value};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var h=this._getButton("supra-btn btn-primary","Apply",function(){var b={apiKey:a._elements.apiKey.querySelector("input").value,listId:a._elements.listId.querySelector("input").value};a._applySubscribeFormSettings(a,b,g),$(a._selfDOM).modal("hide")});this._footer.appendChild(h)},_applySubscribeFormSettings:function(a,b,c){var d=a._targetObject,e=controls.findParent(d,["section-item"]),f=e.children[0],g=e.querySelector("script");builder.forms[f.id].settings={apiKey:b.apiKey,listId:b.listId,type:"subscribe",id:d.id};var h=new RegExp("#modalSubscribeSuccess","img"),i=new RegExp("#modalSubscribeError","img"),j="#"+f.id+"-success",k="#"+f.id+"-error";g.innerHTML=g.innerHTML.replace(h,j),g.innerHTML=g.innerHTML.replace(i,k),builder.setStep(function(){a._applySubscribeFormSettings(a,c,b)})},_getModalDivBg:function(a){var b=this._targetObject;this._title.innerHTML="<h4>Background settings</h4>",this._elements=null;var c=controls.findParent(b,["section-item"]),d=b.className.match(/half-container-\w*/)[0],e=c.children[0],f=c.querySelector("style").innerHTML,g=new RegExp(e.id+"\\s*\\."+d+"\\s*{[\\s\\S]*?background-size:\\s*([^;]*);","im"),h=f.match(g),i=new RegExp(e.id+"\\s*\\."+d+"\\s*{[\\s\\S]*?background-repeat:\\s*([^;]*);","im"),j=f.match(i);a._constructModalBody([{name:"inputImage",func:"inputImage",args:{title:"Background path",elClass:"col-sm-10 col-md-10 col-lg-10",type:"normal"}},{name:"BgStyle",func:"dropDown",args:{menu:["cover","auto","contain","repeat"],title:"Background style:",elClass:"col-sm-10 col-md-10 col-lg-10",callback:function(){return j&&"repeat"===j[1]?j[1]:h?h[1]:"Auto"}}}],"col-sm-6 col-md-6 col-lg-6 nopadding");var k=new RegExp(e.id+"\\s*\\."+d+"\\s*{[\\s\\S]*?opacity:[\\s]*([^;]*)","im"),l=f.match(k),m=l?l[1]:1;a._constructModalBody([{name:"figure",func:"figure",args:{callback:function(){return a._elements.inputImage},section:b,sizeAuto:!h||h&&"auto"===h[1]}},{name:"inputRange",func:"inputRange",args:{title:'Opacity (<span class="opacity">'+Math.round(100*m)+"</span>%):",opacity:function(){return l?l[1]:100}}}],"col-sm-6 col-md-6 col-lg-6 nopadding preview-bg");var n=a._elements.figure.querySelector("img"),o=a._elements.figure.querySelector(".img");o.style.display="block",$(a._selfDOM).on("shown.bs.modal",function(){var c=b.getBoundingClientRect().width,d=a._elements.figure.getBoundingClientRect().width,e=Math.round(d/c*100),f=b.getBoundingClientRect().height,g=f*(e/100),h=a._elements.figure.querySelector(".wrap-hover");h.style.height=g+"px"});var p=new RegExp(e.id+"\\s*\\."+d+"\\s*{[\\s\\S]*?background-image:\\s*url\\('?/?([^']*)'?\\);","im"),q=f.match(p)&&""!==f.match(p)[1]?f.match(p)[1]:"";a._elements.inputImage.querySelector("input").value=clearTimeStamp(q),""!==q&&(n.src=q,o.style.backgroundImage="url('"+q+"')"),j&&"repeat"===j[1]?(o.style.backgroundRepeat="repeat",o.style.webkitBackgroundRepeat="repeat"):(o.style.backgroundRepeat="no-repeat",o.style.webkitBackgroundRepeat="no-repeat"),h&&"auto"!==h[1]&&(o.style.backgroundSize=h[1],o.style.webkitBackgroundSize=h[1]);var r=a._elements.BgStyle;r.addEventListener("supra.check.select",function(a){"repeat"===a.detail.toLowerCase()?(o.style.backgroundRepeat="repeat",o.style.webkitBackgroundRepeat="repeat"):(o.style.backgroundRepeat="no-repeat",o.style.webkitBackgroundRepeat="no-repeat"),"auto"===a.detail.toLowerCase()||"repeat"===a.detail.toLowerCase()?(o.style.backgroundSize=o.dataset.percent+"% auto",o.style.webkitBackgroundSize=o.dataset.percent+"% auto"):(o.style.backgroundSize=a.detail.toLowerCase(),o.style.webkitBackgroundSize=a.detail.toLowerCase())}),o.style.opacity=l?l[1]:1,o.style.backgroundPosition=window.getComputedStyle(b,null).getPropertyValue("background-position");var s=a._elements.inputRange.querySelector("input"),m=a._elements.inputRange.querySelector("label .opacity");s.addEventListener("input",function(){o.style.opacity=this.value/100,m.innerHTML=Math.round(this.value)}),s.addEventListener("change",function(){o.style.opacity=this.value/100,m.innerHTML=Math.round(this.value)});var t=this._elements.figure.querySelector(".bg-test"),u=e.className.match(/bg-.-color-(light|dark)/i);u&&t.classList.add(u[0]);var v={image:a._elements.inputImage?a._elements.inputImage.querySelector("input").value:"",bgStyle:a._elements.BgStyle?a._elements.BgStyle.querySelector(".dropdown button").dataset.value.toLowerCase():"",range:a._elements.inputRange.querySelector("input").value/100};this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var w=this._getButton("supra-btn btn-primary","Apply",function(){var c={image:a._elements.inputImage?a._elements.inputImage.querySelector("input").value:"",bgStyle:a._elements.BgStyle?a._elements.BgStyle.querySelector(".dropdown button").dataset.value.toLowerCase():"",range:a._elements.inputRange.querySelector("input").value/100};a._applyDivBg(a,b,c,v),$(a._selfDOM).modal("hide")});this._footer.appendChild(w)},_applyDivBg:function(a,b,c,d){c.image=builder.replaceQuotes(c.image)+"?t="+Date.now();var e=controls.findParent(b,["section-item"]),f=b.className.match(/half-container-\w*/)[0],g=e.children[0],h=e.querySelector("style"),i=new RegExp("(#"+g.id+"\\s*\\."+f+"\\s*{)([^}]*)(})","im"),j=c.bgStyle,k="no-repeat";"repeat"===c.bgStyle&&(j="auto",k=c.bgStyle),h.innerHTML.search(i)!==-1?h.innerHTML=h.innerHTML.replace(i,"$1"+a._getBgStyle(c.image,j,k,c.range)+"$3"):h.innerHTML="\n#"+g.id+" ."+f+" {"+a._getBgStyle(c.image,j,k,c.range)+"}\n"+e.children[1].innerHTML,builder.setStep(function(){a._applyDivBg(a,b,d,c)})},_getModalDemo:function(a){this._header.innerHTML='<h5 class="text-center">You\'re using demo version, download feature is only available in the full version of the builder.</h5>',a._body.classList.add("nopadding"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Cancel</button>';var b=this._getButton("supra-btn btn-success","Buy full version",function(){window.location=a._targetObject.dataset.href||window.location.href,$(a._selfDOM).modal("hide")});this._footer.appendChild(b)},_getModalAttention:function(a){this._header.innerHTML='<h5 class="text-center">'+a._targetObject.response+"</h5>",a._body.classList.add("nopadding"),this._footer.classList.add("one-button"),this._footer.innerHTML='<button type="button" class="supra-btn btn-default" data-dismiss="modal">Ok</button>'},_getBgStyle:function(a,b,c,d){return"\n\tbackground-image: url('"+a+"');\n\tbackground-size: "+b+";\n\t-webkit-background-size: "+b+";\n\tbackground-repeat: "+c+";\n\t-webkit-background-repeat: "+c+";\n\topacity: "+d+";\n"},_getSectionBgStyle:function(a,b,c,d,e){return"\n\tbackground-image: url('"+a+"');\n\tbackground-size: "+b+";\n\t-webkit-background-size: "+b+";\n\tbackground-repeat: "+c+";\n\t-webkit-background-repeat: "+c+";\n\tbackground-position: "+e+";\n\topacity: "+d+";\n"},_setCostomSizeOnFigure:function(a,b,c,d){var e=a.value||a,f=b.value||b,g=e.match(/(([0-9]*?)(px|%)|auto)/i),h=f.match(/(([0-9]*?)(px|%)|auto)/i),i=d.getBoundingClientRect(),j=i.width,k=i.height;g&&h&&(e=g?g[1]:"auto",f=h?h[1]:"auto",a.value&&(a.value=e),b.value&&(b.value=f),"px"===g[3]&&(e=g[2]/j*100+"%"),"px"===h[3]&&(f=h[2]/k*100+"%"),c.style.backgroundSize=e+" "+f,c.style.backgroundSize=e+" "+f)}};var controls={_button:function(a,b,c,d,e){var f=document.createElement("button");f.className=b,f.setAttribute("type","button");var g=document.createElement("i");return g.className=c,f.appendChild(g),f.addEventListener("click",function(b){b.preventDefault(),b.stopPropagation(),a.doThis(d,e,this)}),f},_getPositionInGallery:function(a,b){var c=b.querySelectorAll(".owl-item.active").length,d=b.querySelectorAll(".owl-item:not(.cloned)").length,e=b.querySelectorAll(".owl-item");e.length!==d&&(e=Array.prototype.slice.call(e,c));var f=null;return Array.prototype.forEach.call(e,function(b,c){b===a&&(f=c)}),f>d-1?f-d-1:f},_moveUp:function(a){!a.previousSibling||a.previousSibling.classList.contains("nav")||a.classList.contains("footer")||(a.parentNode.insertBefore(a,a.previousSibling),builder.setStep(function(){controls._moveDown(a)}))},_moveDown:function(a){!a.nextSibling||a.nextSibling.classList.contains("footer")||a.classList.contains("nav")||(a.parentNode.insertBefore(a,a.nextSibling.nextSibling),builder.setStep(function(){controls._moveUp(a)}))},findParent:function(a,b){var c=a;for(var d in b){for(;null!==c&&!c.classList.contains(b[d]);)c=c.parentElement;if(null!==c)break;for(c=a;null!==c&&c.tagName.toLowerCase()!==b[d];)c=c.parentElement;
    if(!(null===c&&b.length>d+1))break;c=a}return c},getUpSection:{html:function(a){var b="";return(a.classList.contains("nav")||a.classList.contains("footer"))&&(b=" unactive"),controls._button(this,"supra-btn btn-control-1"+b,"supra icon-arrow-up",a)},doThis:function(a){controls._moveUp(a),builder.reloadScript(a),AOS&&AOS.refresh()}},getDownSection:{html:function(a){var b="";return(a.classList.contains("nav")||a.classList.contains("footer"))&&(b=" unactive"),controls._button(this,"supra-btn btn-control-1"+b,"supra icon-arrow-down",a)},doThis:function(a){controls._moveDown(a),builder.reloadScript(a),AOS&&AOS.refresh()}},getBgSection:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-section-bg",a)},doThis:function(a){var b=new Modal("supra-modal","SectionBg",a);$(b).modal("show")}},getMainSettingsSection:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-equalizer",a)},doThis:function(a){if("navigations"===a.dataset.group){var b=new Modal("supra-modal","NavSectionSettings",a);$(b).modal("show")}else{var b=new Modal("supra-modal","SectionSettings",a);$(b).modal("show")}}},getCopy:{html:function(a){var b="";return(a.classList.contains("nav")||a.classList.contains("footer"))&&(b=" unactive"),controls._button(this,"supra-btn btn-control-1"+b,"supra icon-copy",a)},doThis:function(a){if(!a.classList.contains("nav")&&!a.classList.contains("footer")){if(a.querySelector(".spr-gallery")){var b=builder.cloneOwlGallery(a);builder.reloadScript(a)}else{var b=a.cloneNode(!0);a.parentNode.insertBefore(b,a.nextSibling)}var c=b.querySelector(".parallax-bg");c&&(c.removeAttribute("style"),skr&&skr.refresh());var d=builder.getActivePageObject();builder.setStep(function(){d.deleteSection(b)}),controls.rebuildControl(b),d.addSectionToDataPage(b);var e=b.querySelector("form");e&&builder.addNewForm(e,b.children[0],a.children[0].id);var f=b.querySelectorAll(".g-map");f&&Array.prototype.forEach.call(f,function(a){var c=a.id,d=builder.addNewGMap(a,b.children[0]);builder.changeIdGMapInScript(b.querySelector("script"),c,d),builder.reloadScript(b.parentElement)}),builder.listenerSectionsMouseDown(null,b.lastChild),AOS&&AOS.refresh()}}},getDel:{html:function(a){return controls._button(this,"supra-btn btn-control-2","supra icon-trash2",a)},doThis:function(a){if(builder){var b=new Modal("supra-modal","Delete",{page:builder.getActivePageObject(),section:a});$(b).modal("show")}}},getButtonSettings:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-pencil",a)},doThis:function(a){var b=new Modal("supra-modal","ButtonSettings",a);$(b).modal("show")}},getImageSettings:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-picture",a)},doThis:function(a){a.classList.contains("spr-option-link-img")&&(a=a.querySelector("img"));var b=new Modal("supra-modal","ImageSettings",a);$(b).modal("show")}},getGMapSettings:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-map-marker",a)},doThis:function(a){var b=controls.findParent(a,["section-item"]),c=new Modal("supra-modal","GMapSettings",{script:b.querySelector("script"),li:b,map:a});$(c).modal("show")}},getElementH:{html:function(a){var b=a.tagName.match(/h([1-4])/i),c=document.createDocumentFragment();if(b)for(var d=1;d<=4;d++){var e="";d==b[1]&&(e=" active"),c.appendChild(controls._button(this,"supra-btn btn-control-1 h-element"+e,"supra icon-h"+d,a,{n:"H"+d}))}return c},doThis:function(a,b){if(a.tagName!==b.n){var c=Date.now(),d=Date.now()+1,e=document.createElement(b.n),f=a.parentElement.parentElement;e.innerHTML=a.innerHTML,a.parentElement.insertBefore(e,a);for(var g=a.attributes.length-1;g>=0;--g)e.attributes.setNamedItem(a.attributes[g].cloneNode());a.classList.add("spr-tm-"+c),e.className.match(/(\s?spr-[^\s]*)+/i)&&(e.className=e.className.replace(/(\s?spr-[^\s]*)+/gi,"").trim()),e.classList.add("spr-tm-"+d),a.parentElement.removeChild(a),controls.rebuildControl(f),builder.setStep(function(){controls.historyElementH(a.tagName,e,a,f,d,c)})}}},getElementSettings:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-equalizer",a)},doThis:function(a){var b=controls.findParent(a,["section-item","modal-dialog"]),c=new Modal("supra-modal","ElementSettings",{li:b,element:a});$(c).modal("show")}},getLink:{html:function(a){var b="",c=a;return"A"!==a.tagName&&"A"===a.parentElement.parentElement.tagName&&(c=a.parentElement.parentElement),"A"!==a.tagName&&a.children[0]&&"A"===a.children[0].tagName&&(c=a.children[0]),"A"===c.tagName&&(b=" active"),controls._button(this,"supra-btn btn-control-1"+b,"supra icon-link2",a)},doThis:function(a,b,c){"LI"===a.nodeName&&(a=a.children[0]);var d=new Modal("supra-modal","LinkSettings",{element:a,button:c});$(d).modal("show")}},getStaticLink:{html:function(a){var b="",c=a;return"A"!==a.tagName&&"A"===a.parentElement.parentElement.tagName&&(c=a.parentElement.parentElement),"A"!==a.tagName&&a.children[0]&&"A"===a.children[0].tagName&&(c=a.children[0]),"A"===c.tagName&&(b=" active"),controls._button(this,"supra-btn btn-control-1"+b,"supra icon-link2",a)},doThis:function(a,b,c){"LI"===a.nodeName&&(a=a.children[0]);var d=new Modal("supra-modal","LinkSettings",{element:a,button:c,mode:"static"});$(d).modal("show")}},getVideoLink:{html:function(a){var b="";return"DIV"===a.nodeName&&(a=a.children[0]),"IFRAME"===a.nodeName&&a.src.search(/player\.vimeo\.com|embed/i)!==-1&&(b=" active"),controls._button(this,"supra-btn btn-control-1"+b,"supra icon-link2",a)},doThis:function(a,b,c){var d=new Modal("supra-modal","VideoLinkSettings",{element:a,button:c});$(d).modal("show")}},getFormSettings:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-envelope-open",a)},doThis:function(a){var b=new Modal("supra-modal","FormSettings",a);$(b).modal("show")}},getSubscribeFormSettings:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-envelope-open",a)},doThis:function(a){var b=new Modal("supra-modal","SubscribeFormSettings",a);$(b).modal("show")}},getCopyElement:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-copy",a)},doThis:function(a){var b=controls.findParent(a,["buttons-control","buttons-control-form"]),c=b.cloneNode(!0),d=controls.findParent(a,["owl-item"]);if(d&&a.classList.contains("item")){var e=controls.findParent(a,["section-item"]),f=e.querySelector("script"),g=controls.findParent(d,["spr-gallery"]),h=g.cloneNode(!0);builder.removeOwlSuperstructure(h);var i=controls._getPositionInGallery(d,g),j=d.children[0].cloneNode(!0),k=j;f.innerHTML.search(/magnificPopup/m)!==-1&&$(g).magnificPopup({delegate:"a:not(.external)",type:"image",gallery:{enabled:!0},image:{titleSrc:function(a){return a.el.find("span.caption").text()}}}),$(g).trigger("add.owl.carousel",[$(k),i]).trigger("refresh.owl.carousel"),c=j}else if(a.classList.contains("g-map")){var l=a.id,e=controls.findParent(a,["section-item"]),f=e.querySelector("script"),m=builder.addNewGMap(a,e.children[0]);builder.copyFunctionInitGmap(f,l,m),b.parentNode.insertBefore(c,b.nextSibling),builder.reloadScript(e)}else b.parentNode.insertBefore(c,b.nextSibling);builder.stylingWrapParent(c);var n=c.children[0];controls.rebuildControl(c),controls.changePropertyMargin(a,b),controls.changePropertyMargin(n,c);var o=builder.getActivePageObject();builder.setStep(function(){o.deleteElement(n)})}},getDelElement:{html:function(a){return controls._button(this,"supra-btn btn-control-2","supra icon-trash2",a)},doThis:function(a){if(builder){var b=new Modal("supra-modal","DeleteElement",a);$(b).modal("show")}}},getIconsCheck:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-icons",a)},doThis:function(a){var b=new Modal("supra-modal","IconsGallery",a);$(b).modal("show")}},getTextBold:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 strong","supra icon-bold",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeBold(c):b.setBold(c)}},getTextItalic:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 em","supra icon-italic",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeItalic(c):b.setItalic(c)}},getTextUpper:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 upper","supra icon-text-size",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeUpper(c):b.setUpper(c)}},getTextMarker:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 mark","supra icon-highlight",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeMarker(c):b.setMarker(c)}},getTextUnderline:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 ins","supra icon-underline",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeUnderline(c):b.setUnderline(c)}},getTextStrikethrough:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 del","supra icon-strikethrough",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeStrikethrough(c):b.setStrikethrough(c)}},getTextLink:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 link","supra icon-link2",a,b)},doThis:function(a,b,c){var d=new Modal("supra-modal","LinkSettings",{element:a,editor:b,button:c});$(d).modal("show")}},getTextAlignLeft:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 left","supra icon-text-align-left",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeTextAlignLeft(a,c):b.setTextAlignLeft(a,c)}},getTextAlignCenter:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 center","supra icon-text-align-center",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeTextAlignCenter(a,c):b.setTextAlignCenter(a,c)}},getTextAlignRight:{html:function(a,b){return controls._button(this,"supra-btn btn-control-1 right","supra icon-text-align-right",a,b)},doThis:function(a,b,c){c.classList.contains("active")?b.removeTextAlignRight(a,c):b.setTextAlignRight(a,c)}},getBgDiv:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-section-bg",a)},doThis:function(a){var b=new Modal("supra-modal","DivBg",a);$(b).modal("show")}},getFormPSuccess:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-clipboard-check",a)},doThis:function(a){var b=controls._preparePopupFormToEdit(a,"success");$(b).modal("show")}},getFormPError:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-clipboard-alert",a)},doThis:function(a){var b=controls._preparePopupFormToEdit(a,"error");$(b).modal("show")}},historyElementH:function(a,b,c,d,e,f){b.parentElement&&b.parentElement.parentElement||(b=d.querySelector(".spr-tm-"+e)),d=b.parentElement&&b.parentElement.parentElement?b.parentElement.parentElement:d,b.parentElement.insertBefore(c,b),b.parentElement.removeChild(b);var g=builder.getActivePageObject(),h=g.getDOMSelf().className.match(/edit-([^ ]*).*/i);h&&"edit-elements"!==h[0]?c.removeAttribute("style"):controls.rebuildControl(d),builder.setStep(function(){controls.historyElementH(b.tagName,c,b,d,f,e)})},getBgPopup:{html:function(a){return controls._button(this,"supra-btn btn-control-1","supra icon-section-bg",a)},doThis:function(a){var b=new Modal("supra-modal","PopupBg",a);$(b).modal("show")}},_preparePopupFormToEdit:function(a,b){builder.editingSectionForm=controls.findParent(a,["section-item"]);var c=builder.editingSectionForm.children[0],e=(c.id,document.getElementById("modal-form-container"));e.classList.add("light");var f=this.getPopupForm(c,b);return $(f).on("shown.bs.modal",function(){builder._setControlsElement(null,"edit-elements"),builder.activeFormModal=f}),$(f).on("hidden.bs.modal",function(){$(f).off("shown.bs.modal"),$(f).off("hidden.bs.modal"),builder.clearControlElements(f),builder.activeFormModal=null}),f},getPopupForm:function(a,b){var c=null,d=a.id,e="light";if(builder.forms[d]&&builder.forms[d].popupsForForm&&builder.forms[d].popupsForForm[b]){var f=builder.forms[d].popupsForForm[b];c=document.getElementById(f)}else{c=document.createElement("div"),c.className="modal fade modal-confirm flex-center "+e,c.id=d+"-"+b,c.setAttribute("tabindex","-1"),c.setAttribute("role","dialog"),c.setAttribute("aria-hidden","true"),c.innerHTML=options.popupContent[b],c.style.display="none";var g=builder.editingSectionForm.querySelector("style");g.innerHTML+="\n#"+c.id+" .bg {"+options.popupContent[b+"Style"]+"\n}";builder.editingSectionForm.querySelector("script");builder.forms[d].popupsForForm||(builder.forms[d].popupsForForm={}),builder.forms[d].popupsForForm[b]=c.id,builder.modalFormContainer.appendChild(c)}return c},getGroupControl:function(a,b,c,d){var e=this,f=document.createElement("div");return f.className=c,f.dataset.controls=JSON.stringify(a),f.setAttribute("role","group"),f.dataset.objControl=d?"editor-text":"",a&&a.forEach(function(a){f.appendChild(e[a].html(b,d))}),f},changePropertyMargin:function(a,b){var c=a.style.margin;a.style.transition="all 0s ease 0s",a.style.removeProperty("width"),a.style.removeProperty("margin");var d=window.getComputedStyle(a,null);b.style.margin="0";var e=d.getPropertyValue("margin-top"),f=d.getPropertyValue("margin-right"),g=d.getPropertyValue("margin-bottom"),h=d.getPropertyValue("margin-left");b.style.marginTop=e,b.style.marginRight=f,b.style.marginBottom=g,b.style.marginLeft=h,a.style.margin=c,"I"!==a.tagName&&"IMG"!==a.tagName&&(a.style.width="100%"),setTimeout(function(){a.style.removeProperty("transition")},10)},rebuildControl:function(a){var b=this,c=a.querySelectorAll(".wrap-control, .wrap-control-element");Array.prototype.forEach.call(c,function(a){var c=JSON.parse(a.dataset.controls),d=a.parentElement,e=d.children[0],f=null;if("editor-text"===a.dataset.objControl&&(f=new EditorText(e)),a.classList.contains("wrap-control"))e=d;else{var g=b.findParent(d,["section-item","modal-dialog"]);b.correctingPosition(d,g)}d.removeChild(a),d.appendChild(controls.getGroupControl(c,e,a.className,f))})},correctingPosition:function(a,b){a.classList.contains("buttons-control-typography")||(a.addEventListener("mouseenter",function(a){controls.listenerCorrectingPosition(this,a,b)}),a.addEventListener("touchstart",function(a){controls.listenerCorrectingPosition(this,a,b)}))},listenerCorrectingPosition:function(a,b,c){var d=a.children[a.children.length-1],e=window.getComputedStyle(d,null).getPropertyValue("display");if("none"!==e){d.removeAttribute("style");var f=42,g=d.querySelector("button.supra-btn:first-child").getBoundingClientRect().top,h=d.querySelector("button.supra-btn:last-child").getBoundingClientRect().right,i=c.getBoundingClientRect().top,j=a.children[0].getBoundingClientRect(),k=j.height,l=j.right,m=window.innerWidth,n=g<i||g<0,o=this.findParent(a,["owl-stage-outer"]),p=builder.main.querySelector(".navbar");if(this.findParent(a,["modal-dialog"]))n=!a.lastChild.classList.contains("popup-bg")&&g<0;else if(o){var q=o.getBoundingClientRect().top;n=g<q}else if(p&&!this.findParent(a,["navbar"])){var r=p.getBoundingClientRect().bottom;n=g<r}n&&(a.lastChild.classList.contains("inside-top")?d.style.top=k-f+"px":d.style.top=k+f+"px"),a.children[0].className.search(/half-container/)!==-1&&(i<0?d.style.top=k+"px":d.style.top="42px"),m-h<20&&(d.style.marginLeft=l-h+"px")}}},Page=function(a,b,c,d,e){var f=this;switch(this.sections={},this.html="",this.htmlDOM=null,this.preloader=null,this.load=!0,this.id=0,d){case"copy":f._copy(e,a,b);break;case"load":f._load(c,a,b);break;default:f._createPage(c,a,b)}this._title=a,this._name=toPageName(a),this._className=replaceSpace(a),this._metaDes="",this._metaKey="",this._metaJs=""};Page.prototype={_selfDOM:null,_name:"",_className:"",_title:"",_defaultStyle:"light-page loading",_metaDes:"",_metaKey:"",_metaJs:"",_copy:function(a,b,c){var d=this,e=a.getDOMSelf(),f=replaceSpace(a.getPageName()),g=e.cloneNode(!0);this._selfDOM=g,g.classList.remove(f),g.classList.add(b),g.dataset.id=c,this.id=c,g.dataset.name=b,g.classList.contains("spr-active-page")&&g.classList.remove("spr-active-page"),this.setMetaDes(a.getMetaDes()),this.setMetaKey(a.getMetaKey()),this.setJs(a.getJs()),this.preloader=builder.cloneObject(a.preloader);var h=g.querySelectorAll(".section-item");if(""===g.innerHTML&&a.htmlDOM){d.htmlDOM=a.htmlDOM.cloneNode(!0);var i=document.createElement("div");i.appendChild(d.htmlDOM),d.html=i.innerHTML,h=i.querySelectorAll(".section-item")}else d.moveChildrenToHtmlDOM(g);Array.prototype.forEach.call(h,function(a){d.addSectionToDataPage(a)});var j=e.nextElementSibling,k=e.parentElement;k.insertBefore(g,j)},_load:function(a,b,c){var d=a.querySelector("."+b),e=d;e.dataset.id=c,this.id=c,this._selfDOM=e;var f=e.querySelectorAll(".aos-animate");Array.prototype.forEach.call(f,function(a){a.classList.contains("aos-animate")&&a.classList.remove("aos-animate")})},_createPage:function(a,b,c){var d=document.createElement("ul");d.style.minHeight=window.innerHeight+"px",this._selfDOM=d,d.className=b+" "+this._defaultStyle,d.dataset.id=c,this.id=c,d.dataset.name=b,a.appendChild(d),d.innerHTML='<div class="wrap-drag flex-center"><p><i class="icon-reply"></i>Start creating pages by dragging/clicking sections from the left panel</p></div>',c>0&&(this.moveChildrenToHtmlDOM(d),this.load=!0)},addSection:function(a,b,c,d,e){var f=this,g=!1;d||(d=f._createSection(a,b,c,e),g=!0);var h=d.children[0];if(this.addSectionToDataPage(d),g&&h.id.search(/--/)===-1){f.sections[d.dataset.group][h.id].modal=[];var i=d.querySelectorAll(".modal");i&&Array.prototype.forEach.call(i,function(a){builder.modalContainer.appendChild(a),f.sections[d.dataset.group][h.id].modal.push(a.id)})}else if(g&&h.id.search(/--/)!==-1){var i=d.querySelectorAll(".modal");i&&Array.prototype.forEach.call(i,function(a){a.parentElement.removeChild(a)})}if(g){var j=h.querySelector("form");j&&builder.addNewForm(j,h);var k=h.querySelector(".g-map");if(k){var l=builder.addNewGMap(k,h,d.querySelector("script"));builder.changeIdGMapInScript(d.querySelector("script"),l)}}var m=window.getComputedStyle(h,null).getPropertyValue("position");if("fixed"===m||"absolute"===m){builder.setPosition(h,d,m,1095);var n=window.getComputedStyle(h,null).getPropertyValue("height");d.style.height=n}if(d.classList.contains("nav")?f._selfDOM.dataset.nav=1:d.classList.contains("footer")&&(f._selfDOM.dataset.footer=1),!builder.triggerImport){var o=f,p=builder.getActivePageItem(o.id),q=d.parentElement,e=d.nextElementSibling;builder.setStep(function(){var a=builder.getActivePageObject();o&&o.id!==a.id&&builder.chengeActivePage(o,p,o.id),builder.activeFormModal&&($(builder.activeFormModal).modal("hide"),builder.activeFormModal.style.display="none"),f.deleteSection(d,q,e)})}builder.sectionClicked=null},_createSection:function(a,b,c,d){var f=document.createElement("li");f.className="section-item "+b,f.dataset.group=a.dataset.group,f.dataset.img=a.querySelector("img").src,f.innerHTML=sectionsPreview[a.dataset.group].sections[a.dataset.id].html;var g=f.children[0];""===c||g.classList.contains("light")||g.classList.contains("dark")||g.classList.add(c);var h=document.createElement("style");h.innerHTML=sectionsPreview[a.dataset.group].sections[a.dataset.id].style,f.appendChild(h);var i=document.createElement("script");i.setAttribute("type","text/javascript");var j=sectionsPreview[a.dataset.group].overallJs;j&&(i.innerHTML="//delete\nsetTimeout(function(){"+sectionsPreview[a.dataset.group].overallJs+"\n}, 2);\n//deleteend");var k=sectionsPreview[a.dataset.group].sections[a.dataset.id].script||"",l="//delete\nsetTimeout(function(){\n//deleteend\n",m="\n//delete\n}, 2);\n//deleteend";k.search(/owlCarousel/im)===-1&&(l=m=""),i.innerHTML+="\n"+l+k+m,f.appendChild(i);var n=controls.getGroupControl(options.controlsSection,f,"btn-group flex-center wrap-control");if(f.appendChild(n),builder.listenerSectionsMouseDown(null,n),"nav"===b&&this._selfDOM.querySelector("li")?this._selfDOM.insertBefore(f,this._selfDOM.querySelector("li")):d?this._selfDOM.insertBefore(f,d):""===b&&this._selfDOM.querySelector("li.footer")?this._selfDOM.insertBefore(f,this._selfDOM.querySelector("li.footer")):this._selfDOM.appendChild(f),f.querySelector(".parallax-bg")){f.classList.add("parallax");var o=f.querySelector(".bg");o.dataset.topBottom="transform:translate3d(0px, 25%, 0px)",o.dataset.bottomTop="transform:translate3d(0px, -25%, 0px)",skr&&skr.refresh()}return f},deleteSection:function(a,b,c,d){var e=this,f=a.children[0],g=a.dataset.group;a.classList.contains("nav")?e._selfDOM.dataset.nav=0:a.classList.contains("footer")&&(e._selfDOM.dataset.footer=0);var h=null,i={},j=f.querySelector("form");if(j){if(h=builder.forms[f.id],builder.forms[f.id].popupsForForm)for(var k in builder.forms[f.id].popupsForForm){var l=builder.forms[f.id].popupsForForm[k],m=document.getElementById(l);i[k]=m,builder.modalFormContainer.removeChild(m)}delete builder.forms[f.id]}var b=b||a.parentElement,c=c||a.nextElementSibling,n=e,o=builder.getActivePageItem(n.id);builder.setStep(function(){var d=builder.getActivePageObject();if(n&&n.id!==d.id&&builder.chengeActivePage(n,o,n.id),builder.removeWrapDrag(),c?b.insertBefore(a,c):b.appendChild(a),e.addSection(null,null,null,a),controls.rebuildControl(a),builder._refreshParallax(a),builder._reloadVideoBg(a,"run"),builder.listenerSectionsMouseDown(null,a.lastChild),h&&(builder.forms[f.id]=h,Object.keys(i).length>0))for(var g in i)builder.modalFormContainer.appendChild(i[g])}),b.removeChild(a),delete this.sections[g][f.id],0===Object.keys(this.sections[g]).length&&delete this.sections[g],""===this._selfDOM.innerHTML.trim()&&"replace"!==d&&builder.addWrapDrag()},deleteElement:function(a,b){var c=this,d=a,e="",f=null,g=a.nextElementSibling;a.parentElement.className.search(/buttons-control/i)!==-1&&(d=a.parentElement,b=a.parentElement,g=d.nextElementSibling?d.nextElementSibling.children[0]:null);var h=d.parentElement,i=d.nextElementSibling,j=controls.findParent(a,["owl-item"]);if(j&&a.classList.contains("item")){var k=controls.findParent(j,["spr-gallery"]),l=controls._getPositionInGallery(j,k);$(k).trigger("remove.owl.carousel",l).trigger("refresh.owl.carousel")}if(a.classList.contains("g-map")){var m=controls.findParent(a,["section-item"]);f=m.querySelector("script"),e=builder.deleteFunctionInitGmap(f,a.id)}var n=c,o=builder.getActivePageItem(n.id);builder.setStep(function(){var d=a,m=document.querySelector("aside.left nav li.active").id;"default-styles"!==m?(d.removeAttribute("style"),i=g):(d=b,b.children.length<2&&(b.appendChild(a),i=i.parentElement));var p=builder.getActivePageObject();if(n&&n.id!==p.id&&builder.chengeActivePage(n,o,n.id),j&&a.classList.contains("item")){var q=document.createElement("div");q.className="owl-item";var r=document.createElement("div");r.className="item",r.appendChild(d),q.appendChild(r),$(k).trigger("add.owl.carousel",[$(q),l]).trigger("refresh.owl.carousel")}else""!==e&&f&&(f.innerHTML+=e),h&&(i?h.insertBefore(d,i):h.appendChild(d)),"default-styles"===m&&controls.rebuildControl(d);var s=c,t=builder.getActivePageItem(s.id);builder.setStep(function(){var c=builder.getActivePageObject();s&&s.id!==c.id&&builder.chengeActivePage(s,t,s.id),s.deleteElement(a,b)})}),d.parentElement.removeChild(d)},addSectionToDataPage:function(a){var b=a.children[0],c=a.dataset.group,d=a.querySelector("style");for(void 0===this.sections[c]&&(this.sections[c]={});void 0!==this.sections[c][b.id];){var e=b.id.split("--");e[1]?b.id=e[0]+"--"+(1*e[1]+1):b.id=e[0]+"--0"}if(b.id.split("--")[1]){var f=new RegExp("#"+b.id.split("--")[0]+"(--[0-9]*)?\\s","gim");d.innerHTML=d.innerHTML.replace(f,"#"+b.id+" ")}builder.sectionsName.push(b.id),void 0===this.sections[c][b.id]&&(this.sections[c][b.id]={}),this.sections[c][b.id].html=a},getDOMSelf:function(){return this._selfDOM},getPageName:function(){return this._name},setPageName:function(a,b){a=b?a:htmlencode(a),this._selfDOM.classList.remove(this._className),this._name=a,a=replaceSpace(a),this._className=a,this._selfDOM.classList.add(a),this._selfDOM.dataset.name=a},getMetaDes:function(){return this._metaDes},setMetaDes:function(a,b){b?this._metaDes=a:this._metaDes=htmlencode(a)},getMetaKey:function(){return this._metaKey},setMetaKey:function(a,b){b?this._metaKey=a:this._metaKey=htmlencode(a)},getJs:function(){return this._metaJs},setJs:function(a,b){b?this._metaJs=a:this._metaJs=htmlencode(a)},getPageTitle:function(){return this._title},setPageTitle:function(a,b){b?this._title=a:this._title=htmlencode(a),this._selfDOM.classList.contains("spr-active-page")&&(document.title=this._title)},moveChildrenToHtmlDOM:function(a){var b=a.querySelectorAll(".aos-animate");Array.prototype.forEach.call(b,function(a){a.classList.contains("aos-animate")&&a.classList.remove("aos-animate")});var c=a.querySelectorAll(".bg-video");c&&Array.prototype.forEach.call(c,function(a,b){if($(a).data("vide"))$(a).data("vide").destroy();else{var c=a.querySelector("video");c&&c.pause()}}),this.html=a.innerHTML;for(var d=document.createDocumentFragment();a.children.length>0;)d.appendChild(a.children[0]);this.htmlDOM=d,this.load=!1},extractContent:function(){var a=this;if(a.load){var b=document.createElement("div");b.innerHTML=a.html,a.moveChildrenToHtmlDOM(b),a.load=!1,a._selfDOM.appendChild(a.htmlDOM),builder.clearGalleryOnPage(a._selfDOM),builder.reloadScript(a._selfDOM)}else a._selfDOM.appendChild(a.htmlDOM)}};var Suprabuilder=function(){var a=this;this.main=document.querySelector(".main"),this.main.style.minHeight=window.innerHeight+"px",this._pages.push(new Page("index",0,this.main)),this._pages[this._idActivePage].getDOMSelf().classList.add("edit-sections"),this._pages[this._idActivePage].getDOMSelf().classList.add("spr-active-page"),this._pages[this._idActivePage].getDOMSelf().classList.add("light-page"),a._leftNav=document.querySelector("aside.left nav"),a._leftNav.items=[];var b=a._leftNav.querySelectorAll("li");Array.prototype.forEach.call(b,function(b){""!==b.id&&null!==document.querySelector("aside.control-panel ."+b.id)&&a._leftNav.items.push({leftNavButton:b,rightcontrol:document.querySelector("aside.control-panel ."+b.id)})}),this._leftNav.items[0].leftNavButton.classList.add("active"),this._leftNav.items[0].rightcontrol.classList.add("show"),this._selectionNavLeftBtn(),this._undo=a._leftNav.querySelector("li.undo"),this._redo=a._leftNav.querySelector("li.redo"),this._selectionNavUndo(),this._selectionNavRedo(),this._controlPanel.self=document.querySelector("aside.control-panel"),this._controlPanel.title=this._controlPanel.self.querySelector(".title"),this._controlPanel.sections={self:document.querySelector("aside.add-sections-items")},this._showHideControlPanel(),this._controlPanel.sections.items=this._controlPanel.sections.self.querySelectorAll("ul li"),this._controlPanel.controlMenu=this._controlPanel.self.querySelector(".sections"),this._selectionSectionsItem(),this._selectionControlMenuItem(),this._controlPanel.style={self:this._controlPanel.self.querySelector(".default-styles")},this._controlPanel.style.spectrum=a._controlPanel.style.self.querySelectorAll("ul li .spectrum"),this._controlPanel.style.btnApply=a._controlPanel.style.self.querySelector("button.apply"),this._controlPanel.style.btnGroupStyle=a._controlPanel.style.self.querySelectorAll(".btn-group button"),this._controlPanel.style.ul=a._controlPanel.style.self.querySelectorAll("ul"),this._style.html=this.main.querySelector("style"),this._initStyle(),this._selectionGroupButtonStyle(),this._applyStyle(),this._controlPanel.typography={self:this._controlPanel.self.querySelector(".typography")},this._controlPanel.typography.items=this._controlPanel.typography.self.querySelectorAll("li .item"),this._controlPanel.typography.btnApply=a._controlPanel.typography.self.querySelector("button.apply"),this._initTypography(),this._selectionFonts(),this._selectionFontStyle(),this._applyTypography(),this._controlPanel.ProjectPages={self:this._controlPanel.self.querySelector(".project-pages")},this._addProjectPagesToRightSide(),this._callNewProject(),this._callExport(),this._callImport(),this._callDownload(),this._messageBox(),window.addEventListener("load",function(){if((!window.localStorage.version||1*window.localStorage.version<1*a.currentVersion)&&(delete window.localStorage.project,window.localStorage.version=a.currentVersion,removePreloader()),window.localStorage.project)try{a._loadProject(window.localStorage.project)}catch(b){delete window.localStorage.project,a._error=!0,location.reload()}else document.title=a.getActivePageObject().getPageTitle();void 0===window.onbeforeunload?document.querySelector("html").addEventListener("mouseleave",function(){a.sectionsName.length>0&&a._prepareContentPagesToSave()}):window.onbeforeunload=function(){if(a.sectionsName.length>0&&!a._error&&a._prepareContentPagesToSave(),navigator.userAgent.match(/MSIE|Trident|Edge|IEMobile/)){var b="This project is not saved.";return b}return null}}),this.modalContainer=document.getElementById("modal-project-container"),this.modalFormContainer=document.getElementById("modal-form-container")};Suprabuilder.prototype={currentVersion:265,_leftNav:{},_controlPanel:{},_fixedRightSide:!1,main:null,wrapDrag:null,_triggerDownload:!1,_triggerExport:!1,_triggerImport:!1,_triggerElementEnter:!1,_dropImg:null,_dropX:0,_dropY:0,_touchY:0,sectionClicked:null,_nextPageForHistory:null,_triggerClickSection:!1,_sectionDropped:!1,_touch:!1,_markerSection:null,_triggerMoveSectionInMain:!1,_triggerClickSectionInMain:!1,_lockEndDrag:!1,_draggableSection:null,_elCurGrabbing:null,editingText:!1,sectionsName:[],_pages:[],_idActivePage:0,_triggerInitProject:!1,gMaps:[],activeFormModal:null,editingForm:null,forms:{},_style:{},defaultStyleType:"light",editingStyle:"light",modalContainerStyleHtml:null,arrayFontsOnProject:[],arrayPrevStep:[],arrayNextStep:[],triggerUndo:!1,triggerRedo:!1,triggerImport:!1,_arrEditorText:[],_arrListenersEditElement:[],_videoBg:!1,_owlGallery:!1,_formSection:!1,_smooth:!1,_parallax:!1,_magnific:!1,_aos:!1,_magnificScript:"",_error:!1,_eventMoseEnterOnChildActive:function(a){var b=this;b.classList.add("child-active")},_evetnMoseLeaveOnChildActive:function(a){var b=this;b.classList.contains("child-active")&&b.classList.remove("child-active")},selection:function(a,b,c){c=c||"active",b=b||".active",a.classList.contains(c)||(a.parentElement.querySelector(b)&&a.parentElement.querySelector(b).classList.remove(c),a.classList.add(c))},_selectionWithSelfUnactive:function(a){a.classList.contains("active")?(a.classList.remove("active"),a.blur()):a.classList.add("active")},_selectionNavLeftBtn:function(){var a=this;this._leftNav.items.forEach(function(b){b.leftNavButton.addEventListener("click",function(){b.rightcontrol.parentElement.querySelector(".show:not(aside)").classList.remove("show"),b.rightcontrol.classList.add("show"),a.selectionEditMode(this.id),a._controlPanel.title.children[0].innerHTML=firstUp(this.id.replace(/-/i," ")),window.innerWidth<1025&&this.classList.contains("active")?a._controlPanel.self.parentElement.classList.contains("thin")?a._showControlPanel(a):a._hideControlPanel(a):window.innerWidth<1025&&!this.classList.contains("active")&&a._showControlPanel(a),a.selection(this)})}),a._touchHideControlPanel()},selectionEditMode:function(a){var b=this,c=b.getActivePageObject(),d=c.getDOMSelf(),e=replaceSpace(c.getPageName()),f=document.getElementById("modal-form-container");switch(b.clearControlElements(d),b.clearControlElements(f),a){case"sections":b._chengePageMode(d,"edit-sections"),document.addEventListener("mousemove",b.listenerDocumentMousemove),document.addEventListener("mouseup",b.listenerDocumentMouseUp),document.addEventListener("touchend",b.listenerDocumentTouchend),b._setControlsElement(null,"edit-sections");break;case"default-styles":b._chengePageMode(d,"edit-elements"),b._setControlsElement(e,"edit-elements");
    break;case"typography":b._chengePageMode(d,"edit-typography"),b._setControlsElement(e,"edit-typography");break;case"project-pages":b._chengePageMode(d,"edit-project-page");var g=b._controlPanel.ProjectPages.self.querySelector("ul");if(!g.classList.contains("scrl")){g.classList.add("scrl");var h=b._controlPanel.title.getBoundingClientRect().bottom,i=b._controlPanel.self.querySelector(".btn-ex-im-d").getBoundingClientRect().top,j=g.children[g.children.length-1],k=j.clientHeight;g.style.height=i-h-k+"px",$(g).niceScroll({cursorcolor:"#555555",cursorborder:"1px solid #555555",autohidemode:"scroll",hidecursordelay:0}),b._pinBottom(b,j)}}if("sections"!==a&&(b._controlPanel.sections.self.classList.contains("show")&&window.innerWidth>500&&b._hideSections(b),document.removeEventListener("mousemove",b.listenerDocumentMousemove),document.removeEventListener("mouseup",b.listenerDocumentMouseUp),document.removeEventListener("touchend",b.listenerDocumentTouchend)),""!==a){var l=document.querySelectorAll(".child-event");Array.prototype.forEach.call(l,function(a){b._eventMoseEnterOnChildActive&&a.removeEventListener("mouseenter",b._eventMoseEnterOnChildActive),b._evetnMoseLeaveOnChildActive&&a.removeEventListener("mouseleave",b._evetnMoseLeaveOnChildActive)})}},_chengePageMode:function(a,b){var c=document.getElementById("modal-form-container");if(a.className.search(/edit-/i)===-1)a.classList.add(b),c.classList.add(b);else{var d=a.className.match(/edit-([^ ]*).*/i);a.classList.remove("edit-"+d[1]),a.classList.add(b),c.className.search(/edit-/i)!==-1&&c.classList.remove("edit-"+d[1]),c.classList.add(b)}window.disMouseDrag=!1,"edit-typography"===b&&(window.disMouseDrag=!0)},_showHideControlPanel:function(){var a=this;"ontouchstart"in window||navigator.maxTouchPoints||(this._controlPanel.self.addEventListener("mouseout",function(b){var c=null;c=a._controlPanel.sections.self.classList.contains("show")?a._controlPanel.sections.self.getBoundingClientRect().right-10:this.getBoundingClientRect().right-10;var d=a._controlPanel.sections.self.getBoundingClientRect(),e=d.top,f=d.bottom;(b.clientX>=c||b.clientY<=e||b.clientY>=f)&&a._hideControlPanel(a)},!0),this._leftNav.parentElement.addEventListener("mouseover",function(){a._showControlPanel(a)}),a._controlPanel.self.querySelector("i.bookmark").addEventListener("click",function(){a._controlPanel.self.classList.contains("pin")?(a._controlPanel.self.classList.remove("pin"),a._fixedRightSide=!1):(a._controlPanel.self.classList.add("pin"),a._fixedRightSide=!0)}))},_showControlPanel:function(a){a._controlPanel.self.parentElement.classList.contains("thin")&&(a._controlPanel.self.parentElement.classList.remove("thin"),setTimeout(function(){$("aside.control-panel").getNiceScroll().resize()},800))},_hideControlPanel:function(a){a._controlPanel.self.parentElement.classList.contains("thin")||a._fixedRightSide||(a._controlPanel.sections.self.querySelector(".active")&&a._controlPanel.sections.self.querySelector(".active").classList.remove("active"),a._controlPanel.self.parentElement.classList.add("thin"),window.innerWidth>500&&a._controlPanel.sections.self.classList.contains("show")&&(a._hideSections(a),a._fixedRightSide=!1))},_touchHideControlPanel:function(){var a=this;this.main.addEventListener("touchstart",function(){a._hideControlPanel(a)})},_selectionControlMenuItem:function(){var a=this,b=a._controlPanel.controlMenu.querySelectorAll("ul li");Array.prototype.forEach.call(b,function(b,c,d){b.addEventListener("click",function(){var b=this;if(Array.prototype.forEach.call(a._controlPanel.sections.items,function(a){a.dataset.group===b.innerHTML.toLowerCase()?a.style.display="flex":a.style.display="none"}),a._controlPanel.sections.self.classList.contains("show")||a._controlPanel.sections.self.classList.add("show"),window.innerWidth<501){var c=a._controlPanel.controlMenu.querySelector("li.nopadding");c?c.style.height="0":(c=document.createElement("li"),c.className="nopadding",c.appendChild(a._controlPanel.sections.self)),b.classList.contains("active")?(c.style.height="0",b.classList.remove("active")):(a._controlPanel.controlMenu.insertBefore(c,b.nextSibling),c.style.height=a._controlPanel.sections.self.getBoundingClientRect().height+"px",a.selection(this)),setTimeout(function(){$("aside.control-panel").getNiceScroll().resize()},800)}else a.selection(this)})}),a._controlPanel.sections.self.addEventListener("mouseout",function(b){var c=this.getBoundingClientRect().right,d=a._controlPanel.sections.self.getBoundingClientRect(),e=d.top,f=d.bottom;(b.clientX>=c||b.clientY<=e||b.clientY>=f)&&a._controlPanel.sections.self.classList.contains("show")&&!a._fixedRightSide&&window.innerWidth>500&&(a._hideSections(a),a._hideControlPanel(a))})},_selectionSectionsItem:function(){var a=this;a._controlPanel.sections.self.addEventListener("mousedown",function(b){b.preventDefault(),!a.touch&&a.detectLeftButton(b)&&(a._eventStartDrag(a,b),document.addEventListener("mouseup",a.listenerDocumentMouseUp))}),a._controlPanel.sections.self.addEventListener("touchstart",function(b){a.touch=!0,a._touchY=b.changedTouches[0].pageY,a._eventStartDrag(a,b),document.addEventListener("touchend",a.listenerDocumentTouchend)}),a._controlPanel.sections.self.addEventListener("mouseout",function(b){if(b.preventDefault(),a._triggerClickSection&&!a._sectionDropped){var c=b.target.parentElement.querySelector("img");a._createSectionPreview(c.src),a._sectionDropped=!0,document.addEventListener("mousemove",a.listenerDocumentMousemove)}})},listenerDocumentMousemove:function(a){builder._eventMoveDrag(builder,a),builder._eventMoveDragSection(builder,a)},listenerDocumentMouseUp:function(a){builder._eventEndDrag(builder)},listenerDocumentTouchend:function(a){Math.abs(builder._touchY-a.changedTouches[0].pageY)<10&&(a.preventDefault(),builder._eventEndDrag(builder))},listenerStartDragSection:function(a){builder.eventStartDragSection(a,this)},listenerSectionsMouseDown:function(a,b){var c=this;if(a){var d=a.querySelectorAll("li.section-item > .wrap-control");Array.prototype.forEach.call(d,function(a){a.removeEventListener("mousedown",c.listenerStartDragSection),a.addEventListener("mousedown",c.listenerStartDragSection)})}else b&&(b.removeEventListener("mousedown",c.listenerStartDragSection),b.addEventListener("mousedown",c.listenerStartDragSection))},_eventStartDrag:function(a,b){var c=b.target||b.srcElement,d=c.parentElement,e=document.querySelector("body");e.classList.add("cursor-grab"),c.classList.add("cursor-grab"),a._elCurGrabbing=c,"LI"!==d.tagName||!d.classList.contains("wrap-hover")||a._triggerClickSection||a._lockEndDrag||(a._triggerClickSection=!0,a.sectionClicked=d,a._createMarkerSection(),a._nextForDropped=null)},_eventMoveDrag:function(a,b){if(a._dropImg&&a._sectionDropped){a._dropImg.style.left=b.clientX-105+"px",a._dropImg.style.top=b.clientY-10+"px",a._dropImg.style.display="none";var c=controls.findParent(document.elementFromPoint(b.clientX,b.clientY),["section-item"]);a._dropImg.style.display="block",c?a._setPositionMarkerSection(b,a.sectionClicked,c):a.getActivePageObject().getDOMSelf().classList.contains("loading")&&(a.removeWrapDrag(),a.getActivePageObject().getDOMSelf().appendChild(a._markerSection)),window.innerWidth>500&&!a._fixedRightSide&&(a._hideSections(a),a._hideControlPanel(a))}},eventStartDragSection:function(a,b){var c=this;if(a.preventDefault(),a.target===b&&0===a.button&&!c._lockEndDrag){c._triggerClickSectionInMain=!0;var d=controls.findParent(b,["section-item"]);c._draggableSection=d,c._dropX=a.clientX,c._dropY=a.clientY,document.addEventListener("mousemove",c.listenerDocumentMousemove),document.addEventListener("mouseup",c.listenerDocumentMouseUp),document.body.classList.add("cursor-grab"),b.classList.add("cursor-grab"),c._elCurGrabbing=b}},_eventMoveDragSection:function(a,b){if(a._triggerClickSectionInMain&&(Math.abs(a._dropX-b.clientX)>15||Math.abs(a._dropY-b.clientY)>15)){a._dropImg&&(a._dropImg.style.display="none");var c=controls.findParent(document.elementFromPoint(b.clientX,b.clientY),["section-item"]);if(a._dropImg&&(a._dropImg.style.display="block"),c){if(!a._triggerMoveSectionInMain&&!a._lockEndDrag){a._createMarkerSection(),a._createSectionPreview(a._draggableSection.dataset.img);var d=a._draggableSection.nextSibling,e=a._draggableSection.parentElement;e&&(e.removeChild(a._draggableSection),d?e.insertBefore(a._markerSection,d):e.appendChild(a._markerSection),a._triggerMoveSectionInMain=!0,c=d,a._nextPageForHistory=d)}c&&a._setPositionMarkerSection(b,a._draggableSection,c)}a._dropImg.style.left=b.clientX-105+"px",a._dropImg.style.top=b.clientY-10+"px"}},_createMarkerSection:function(){var a=this;a._markerSection=document.createElement("div"),a._markerSection.className="marker-section"},_eventEndDrag:function(a){var b=document.querySelector("body");if(!a._dropImg||a._sectionDropped||a._triggerClickSectionInMain||a._lockEndDrag||(a._dropImg=null),(a._sectionDropped||a._triggerMoveSectionInMain)&&!a._lockEndDrag){a._sectionDropped=!1,a._lockEndDrag=!0,a._nextForDropped=a._markerSection.nextSibling;var c=a._markerSection.parentElement,d=a._markerSection.getBoundingClientRect(),e=d.top,f=d.left,g=d.width;a._dropImg.classList.add("drop"),a._dropImg.style.left=f+"px",a._dropImg.style.width=g+"px",a._dropImg.style.top=e+"px",a._dropImg.style.opacity="0",c&&(c.removeChild(a._markerSection),a._markerSection=null,setTimeout(function(){if(a._triggerMoveSectionInMain){a._nextForDropped?c.insertBefore(a._draggableSection,a._nextForDropped):c.appendChild(a._draggableSection),a._refreshParallax(a._draggableSection);var b=a.getActivePageObject(),d=a.getActivePageItem(b.id);a._reloadVideoBg(b.getDOMSelf(),"run"),a.setStep(function(){var e=a.getActivePageObject();b&&b.id!==e.id&&a.chengeActivePage(b,d,b.id),a.setPoinDragMoveSection(a._draggableSection,c,a._nextPageForHistory)}),a._triggerMoveSectionInMain=!1}else a._refreshParallax(a.getActivePageObject().getDOMSelf())},200)),setTimeout(function(){a._dropImg&&(b.removeChild(a._dropImg),a._dropImg=null),a._lockEndDrag=!1,AOS&&AOS.refresh()},400)}a._triggerClickSectionInMain=!1,a._triggerClickSection&&(a._triggerClickSection=!1,a._beforeAddSection(a)),b.classList.contains("cursor-grab")&&b.classList.remove("cursor-grab"),a._elCurGrabbing&&a._elCurGrabbing.classList.contains("cursor-grab")&&a._elCurGrabbing.classList.remove("cursor-grab"),a._sectionDropped=!1,document.removeEventListener("mousemove",a.listenerDocumentMousemove),document.removeEventListener("mouseup",a.listenerDocumentMouseUp),document.removeEventListener("touchend",a.listenerDocumentTouchend)},_createSectionPreview:function(a){var b=this,c=document.querySelector("body");b._dropImg=document.createElement("img"),b._dropImg.src=a,b._dropImg.className="preview-section-on-drag",c.appendChild(b._dropImg)},_setPositionMarkerSection:function(a,b,c){var d=this,e=c.getBoundingClientRect(),f=e.height,g=e.top;a.clientY<g+f/2&&"navigations"!==b.dataset.group&&"footers"!==b.dataset.group?"navigations"!==c.dataset.group?c.parentElement.insertBefore(d._markerSection,c):c.parentElement.insertBefore(d._markerSection,c.nextSibling):"navigations"!==b.dataset.group&&"footers"!==b.dataset.group?"footers"!==c.dataset.group?c.parentElement.insertBefore(d._markerSection,c.nextSibling):c.parentElement.insertBefore(d._markerSection,c):"navigations"===b.dataset.group?c.parentElement.insertBefore(d._markerSection,c.parentElement.firstChild):"footers"===b.dataset.group&&c.parentElement.appendChild(d._markerSection)},setPoinDragMoveSection:function(a,b,c){var d=this,e=a.nextSibling;c?b.insertBefore(a,c):b.appendChild(a),controls.rebuildControl(a),d.listenerSectionsMouseDown(null,a.lastChild);var f=d.getActivePageObject(),g=d.getActivePageItem(f.id);d.setStep(function(){var c=d.getActivePageObject();f&&f.id!==c.id&&d.chengeActivePage(f,g,f.id),d.setPoinDragMoveSection(a,b,e)})},_beforeAddSection:function(a){var b=a.sectionClicked.dataset.group;a.removeWrapDrag();var c=a.getActivePageObject(),d=c.getDOMSelf();if(a.sectionClicked)if("navigations"===b&&"1"!==d.dataset.nav)c.addSection(a.sectionClicked,"nav",a.defaultStyleType,null,a._nextForDropped);else{if("navigations"===b&&"1"===d.dataset.nav){var e=new Modal("supra-modal","Replace",c);return void $(e).modal("show")}if("footers"===b&&"1"!==d.dataset.footer)c.addSection(a.sectionClicked,"footer",a.defaultStyleType,null,a._nextForDropped);else{if("footers"===b&&"1"===d.dataset.footer){var e=new Modal("supra-modal","Replace",c);return void $(e).modal("show")}c.addSection(a.sectionClicked,"",a.defaultStyleType,null,a._nextForDropped)}}},_initStyle:function(){var a=this,b="";a.modalContainerStyleHtml=document.createElement("style"),document.getElementById("modal-container").appendChild(a.modalContainerStyleHtml),a._style.styleItems={},a._style.html.innerHTML="",Array.prototype.forEach.call(a._controlPanel.style.ul,function(c){a._style.styleItems[c.id]=a.cloneObject(options.colorGrid),a._style.styleItems[c.id].forEach(function(d){var e=document.createElement("li");e.innerHTML="<label>"+d.title+"</label>";var f=document.createElement("input");f.setAttribute("type","text"),f.className="spectrum",e.appendChild(f),c.appendChild(e),$(f).spectrum({color:d[c.id+"Color"].replace(/!important/i,""),showPalette:!0,preferredFormat:"hex",allowEmpty:!1,localStorageKey:"spectrum.homepage"});var g=d.domIdentif;Array.isArray(g)||(g=g.replace(/\\/i,"")),"bg-1"===d.name||"bg-2"===d.name||"bg-3"===d.name?(b+=g+"-color-"+c.id+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\n}\n","bg-1"===d.name&&(b+="."+c.id+"-page"+d.domIdentifPreloader+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\n}\n",b+="."+c.id+"-page {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\n}\n")):"preloader-color"===d.name?(b+="."+c.id+"-page "+g+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\n}\n",b+="."+c.id+"-page "+g+" div {\nbackground-color: "+d[c.id+"Color"]+";\n}\n"):"btn-def-color"===d.name||"btn-def-hover-color"===d.name||"btn-primary-color"===d.name||"btn-primary-hover-color"===d.name?(a._style.html.innerHTML+="."+c.id+" "+g+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\nborder-color: "+d[c.id+"Color"]+";\n}\n",a.modalContainerStyleHtml.innerHTML+="."+c.id+"-modal .choice-element "+g+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\nborder-color: "+d[c.id+"Color"]+";\n}\n"):Array.isArray(g)?g.forEach(function(b){var e="separator"===d.name?"":" ";a._style.html.innerHTML+="."+c.id+e+b+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\n}\n"}):a._style.html.innerHTML+="."+c.id+" "+g+" {\n"+d.styleProperty+" "+d[c.id+"Color"]+";\n}\n",d.html=f})}),a._style.html.innerHTML="/* --------------- Color Style ------------------ */\n"+b+a._style.html.innerHTML},_loadStyle:function(){var a=this;a._readWriteColorStyle(a,"read",function(b){var c=a._style.html.innerHTML,d=3;"preloader-color"!==b.element.name&&"btn-def-color"!==b.element.name&&"btn-def-hover-color"!==b.element.name&&"btn-primary-color"!==b.element.name&&"btn-primary-hover-color"!==b.element.name||(d=4),b.element[b.typeStyle+"Color"]=c.match(b.pattern)?c.match(b.pattern)[d]:"#ffffff",$(b.element.html).spectrum("set",b.element[b.typeStyle+"Color"]);var e="";if("btn-def-color"===b.element.name||"btn-def-hover-color"===b.element.name?e="color:"+b.element[b.typeStyle+"Color"]+";\nborder-color:"+b.element[b.typeStyle+"Color"]+";\n":"btn-primary-color"!==b.element.name&&"btn-primary-hover-color"!==b.element.name||(e="background-color:"+b.element[b.typeStyle+"Color"]+";\nborder-color:"+b.element[b.typeStyle+"Color"]+";\n"),""!==e){var f=a.modalContainerStyleHtml.innerHTML;a.modalContainerStyleHtml.innerHTML=f.replace(b.patternModal,"$1"+e+"$4")}})},_selectionGroupButtonStyle:function(){var a=this;Array.prototype.forEach.call(a._controlPanel.style.btnGroupStyle,function(b){b.addEventListener("click",function(){a.editingStyle!==this.dataset.id&&(a._controlPanel.style.self.querySelector("ul.active").classList.remove("active"),a._controlPanel.style.self.querySelector("ul#"+this.dataset.id).classList.add("active"),a.editingStyle=this.dataset.id,a.selection(this))})})},_applyStyle:function(){var a=this;a._controlPanel.style.btnApply.addEventListener("click",function(){var b=a._style.html.innerHTML;a._readWriteColorStyle(a,"write",function(b){var c=a._style.html.innerHTML,d="preloader-color"===b.element.name?"!important$5":"$4",e=b.element[b.typeStyle+"Color"],f=!1;if("btn-def-color"===b.element.name||"btn-def-hover-color"===b.element.name?(e="color: "+b.element[b.typeStyle+"Color"]+";\nborder-color: "+b.element[b.typeStyle+"Color"]+";\n",f=!0,d="$5"):"btn-primary-color"!==b.element.name&&"btn-primary-hover-color"!==b.element.name||(e="background-color: "+b.element[b.typeStyle+"Color"]+";\nborder-color: "+b.element[b.typeStyle+"Color"]+";\n",f=!0,d="$5"),a._style.html.innerHTML=c.replace(b.pattern,"$1"+e+d),f){var g=a.modalContainerStyleHtml.innerHTML;a.modalContainerStyleHtml.innerHTML=g.replace(b.patternModal,"$1"+e+"$4")}}),a.setStep(function(){a._setPointStyle(a,b)})})},_setPointStyle:function(a,b){var c=a._style.html.innerHTML;a._style.html.innerHTML=b,a._loadStyle(),a.setStep(function(){a._setPointStyle(a,c)})},_readWriteColorStyle:function(a,b,c){var d="im";for(var e in a._style.styleItems)a._style.styleItems[e].forEach(function(a){"write"===b&&(a[e+"Color"]=a.html.value,d="img");var f={element:a,typeStyle:e};if(""!==a[e+"Color"])if("bg-1"===a.name||"bg-2"===a.name||"bg-3"===a.name){var g="";"bg-1"===a.name&&(g="|."+e+"-page|."+e+"-page\\s*"+a.domIdentifPreloader),f.pattern=new RegExp("((\\"+addSleshes(a.domIdentif)+"-color-"+e+g+")[\\s\\t]*{[\\s\\n\\t]*"+a.styleProperty+"\\s*)([^;]*)(;)",d),c(f)}else"preloader-color"===a.name?(f.pattern=new RegExp("((\\."+e+"\\s*"+addSleshes(a.domIdentif)+"|\\."+e+"-page\\s*"+addSleshes(a.domIdentif)+")[\\s\\t\\w]*{[\\s\\n\\t]*("+a.styleProperty+"|background-color:)\\s*)([^;]*)(?:!important)(;)",d),c(f)):"btn-def-color"===a.name||"btn-primary-color"===a.name?(f.pattern=new RegExp("((\\."+e+"\\s*"+addSleshes(a.domIdentif)+"|\\."+e+"-page\\s*"+addSleshes(a.domIdentif)+")[^:][\\s\\t\\w]*{[\\s\\n\\t]*)("+a.styleProperty+"|border-color:)\\s*([^;]*)[^}]*(})",d),f.patternModal=new RegExp("(\\."+e+"-modal .choice-element"+addSleshes(a.domIdentif)+"[^:][\\s\\t\\w]*{[\\s\\n\\t]*)("+a.styleProperty+"|border-color:)\\s*([^;]*)[^}]*(})","img"),c(f)):"btn-def-hover-color"===a.name||"btn-primary-hover-color"===a.name?(f.pattern=new RegExp("((\\."+e+"\\s*"+addSleshes(a.domIdentif)+"|\\."+e+"-page\\s*"+addSleshes(a.domIdentif)+")[\\s\\t\\w]*{[\\s\\n\\t]*)("+a.styleProperty+"|border-color:)\\s*([^;]*)[^}]*(})",d),f.patternModal=new RegExp("(\\."+e+"-modal .choice-element"+addSleshes(a.domIdentif)+"[\\s\\t\\w]*{[\\s\\n\\t]*)("+a.styleProperty+"|border-color:)\\s*([^;]*)[^}]*(})","img"),c(f)):Array.isArray(a.domIdentif)?a.domIdentif.forEach(function(b){f.pattern=new RegExp("((\\."+e+"\\s*"+addSleshes(b)+"|\\."+e+"-page\\s*"+addSleshes(b)+")[\\s\\t]*{[\\s\\n\\t]*"+a.styleProperty+"\\s*)([^;]*)(;)",d),c(f)}):(f.pattern=new RegExp("((\\."+e+"\\s*"+addSleshes(a.domIdentif)+"|\\."+e+"-page\\s*"+addSleshes(a.domIdentif)+")[\\s\\t\\w]*{[\\s\\n\\t]*"+a.styleProperty+"\\s*)([^;]*)(;)",d),c(f))})},_initTypography:function(){var a=this,b=a._controlPanel.typography.items,c=a._style.html.innerHTML;c+="\n/* ------------------ Typography --------------------- */\n",options.typographyGrid.forEach(function(d,e){var f=b[e].querySelector(".dropdown button"),g=b[e].querySelector("li:first-child a");b[e].dataset.id=e;var h="";Array.isArray(d.domIdentif)?d.domIdentif.forEach(function(a,b){var c="";b>0&&(c=", "),h+=c+".font-style-supra "+a}):h=".font-style-supra "+d.domIdentif;var i=""!==d.styleprop.fontFamily?d.styleprop.fontFamily:g.dataset.value,j=""!==d.styleprop.fontWeight?d.styleprop.fontWeight:g.dataset.weight,k="";1*j<400&&1*j>200?k=" light":1*j<201&&1*j>100?k=" extra-light":1*j<101&&(k=" thin"),a.arrayFontsOnProject.indexOf(i+":"+j)===-1&&a.arrayFontsOnProject.push(i+":"+j),f.children[0].innerHTML=i+k,f.style.fontFamily=i,f.dataset.value=i,f.dataset.weight=j,f.style.fontWeight=j;var l=d.fontSize;b[e].querySelector("input[type=text]").value=l,c+=h+" {\n\tfont-family: '"+i+"';\n\tfont-size: "+l+";";var m=d.styleprop;for(var n in m){var o=m[n],p="font-weight";if("textTransform"===n?p="text-transform":"fontStyle"===n&&(p="font-style"),"fontFamily"!==n&&(c+="\n\t"+p+": "+o+";"),"inherit"!==o)switch(p){case"font-weight":var q=b[e].querySelector("button.bold");"bold"===o&&q.classList.add("active");break;case"font-style":var r=b[e].querySelector("button.italic");r.classList.add("active");break;case"text-transform":var s=b[e].querySelector("button.uppercase");s.classList.add("active")}}c+="\n}\n"}),a._style.html.innerHTML=c},_selectionFonts:function(){var a=this,b=a._controlPanel.typography.items;Array.prototype.forEach.call(b,function(a){var b=a.querySelectorAll("li a"),c=a.querySelector(".dropdown button");Array.prototype.forEach.call(b,function(a){a.addEventListener("click",function(b){b.preventDefault(),c.dataset.value=a.dataset.value,c.dataset.weight=a.dataset.weight,c.style.fontFamily=a.style.fontFamily,c.style.fontWeight=a.dataset.weight,c.querySelector("span").innerHTML=a.innerHTML})});var d=a.querySelector("input");$(d).mask("000px",{reverse:!0})})},_selectionFontStyle:function(){var a=this,b=a._controlPanel.typography.items;Array.prototype.forEach.call(b,function(b){var c=b.querySelectorAll(".btn-group button");Array.prototype.forEach.call(c,function(b){b.addEventListener("click",function(b){b.preventDefault(),a._selectionWithSelfUnactive(this)})})})},_applyTypography:function(){var a=this;this._controlPanel.typography.btnApply.addEventListener("click",function(){var b=a._style.html.innerHTML;a.arrayFontsOnProject=[],a._readWriteTypographyStyle(a,"write",function(b){var c=a._style.html.innerHTML;switch(b.option){case"font_family":a._style.html.innerHTML=c.replace(b.pattern,"$1 '"+b.button.dataset.value+"';"),a.arrayFontsOnProject.indexOf(b.button.dataset.value+":"+b.button.dataset.weight)===-1&&a.arrayFontsOnProject.push(b.button.dataset.value+":"+b.button.dataset.weight);break;case"font_height":""!==b.fontHeight.value&&(a._style.html.innerHTML=c.replace(b.ptrnHeight,"$1 "+b.fontHeight.value+";"));break;case"font_style":var d=b.btnInGroup.dataset.style;b.btnInGroup.classList.contains("active")||(d=b.fontStyleDefault,"font-weight"===b.styleProp&&(d=b.button.dataset.weight)),a._style.html.innerHTML=c.replace(b.ptrnStyle,"$1 "+d+";")}}),a.setStep(function(){a._setPointTypography(a,b)})})},_setPointTypography:function(a,b){var c=a._style.html.innerHTML;a._style.html.innerHTML=b,a._loadTypography(),a.setStep(function(){a._setPointTypography(a,c)})},_loadTypography:function(){var a=this;a.arrayFontsOnProject=[],this._readWriteTypographyStyle(this,"read",function(b){var c=a._style.html.innerHTML;switch(b.option){case"font_family":var d=c.match(b.pattern)||"lato",e=c.match(b.ptrnWeight)?c.match(b.ptrnWeight)[2]:300,f="";"lighter"===e||"inherit"===e||1*e<400&&1*e>200?f=" light":1*e<201&&1*e>100?f=" extra-light":"bold"!==e&&1*e<101&&(f=" thin"),b.button.children[0].innerHTML=d[2]+f,b.button.style.fontFamily=d[2],b.button.style.fontWeight=e,b.button.dataset.value=d[2],b.button.dataset.weight="bold"!==e?e:"400",a.arrayFontsOnProject.indexOf(d[2]+":"+b.button.dataset.weight)===-1&&a.arrayFontsOnProject.push(d[2]+":"+b.button.dataset.weight);break;case"font_height":c.search(b.ptrnHeight)!==-1?b.fontHeight.value=c.match(b.ptrnHeight)[2]:b.fontHeight.value=b.defaultFontSize;break;case"font_style":c.match(b.ptrnStyle)&&c.match(b.ptrnStyle)[2]!==b.fontStyleDefault?"font-weight"===b.styleProp&&("bold"===c.match(b.ptrnStyle)[2]||1*c.match(b.ptrnStyle)[2]>400)?b.btnInGroup.classList.add("active"):"font-weight"!==b.styleProp&&b.btnInGroup.classList.add("active"):b.btnInGroup.classList.contains("active")&&b.btnInGroup.classList.remove("active")}})},_readWriteTypographyStyle:function(a,b,c){var d="im";"write"===b&&(d="img");var e=a._controlPanel.typography.items;Array.prototype.forEach.call(e,function(b,e){var f=b.querySelector(".dropdown button"),g={button:f},h=options.typographyGrid[e].domIdentif,i="";Array.isArray(h)?h.forEach(function(a,b){var c="";b>0&&(c=", "),i+=c+".font-style-supra "+a}):i=".font-style-supra "+h,i=addSleshes(i),g.pattern=new RegExp("([^\\w]"+i+"\\s*{[\\s\\S]*?font-family:)\\s*'?([^';]*)'?(;)",d),g.ptrnWeight=new RegExp("([^\\w]"+i+"[\\s]*{[\\s\\S]*?font-weight\\s*:)\\s*([^;]*)(;)",d),g.option="font_family",c(g),g.fontHeight=b.querySelector("input[type=text]"),g.ptrnHeight=new RegExp("([^\\w]"+i+"\\s*{[\\s\\S]*?font-size:)\\s*([^;]*)(;)",d),g.defaultFontSize=options.typographyGrid[e].fontSize,g.option="font_height",c(g);var j=b.querySelectorAll("button:not(.dropdown-toggle)");Array.prototype.forEach.call(j,function(e){a._style.html.innerHTML;if(e){var h=e.dataset.style,j="font-weight";"uppercase"===h?j="text-transform":"italic"===h&&(j="font-style"),g.ptrnStyle=new RegExp("([^\\w]"+i+"[\\s]*{[\\s\\S]*?"+j+":)\\s*([^;]*)(;)",d);var k=j.split("-");g.fontStyleDefault=options.typographyGrid[b.dataset.id].styleprop[k[0]+firstUp(k[1])],g.btnInGroup=e,g.fontStyle=h,g.styleProp=j,g.option="font_style",c(g)}})})},_addProjectPagesToRightSide:function(){var a=this,b=a._controlPanel.ProjectPages.self.querySelectorAll("li"),c=b[b.length-1];a._pages.forEach(function(b,d){var e=b.getPageName(),f=a._pages[a._idActivePage].getPageName();a._addPageNavItem(a,c,e,d,f)}),a._triggerInitProject||(c.addEventListener("click",function(){var b=a.getPagesNamesArray(),c=a.uniqueName("page",b);a._addNewPage(a,this,c),a._pinBottom(a,this)}),a._triggerInitProject=!0)},_addNewPage:function(a,b,c){var d=a._pages.length,e=a._addPageNavItem(a,b,c,d);a._pages.push(new Page(c,d,this.main)),builder.setStep(function(){a._deletePage(a,e,a._pages[d].getDOMSelf());var b=document.querySelector("aside.left nav li.active").id;a.selectionEditMode(b)})},_copyPage:function(a,b,c,d){var e=d.split("-"),f=a.getPagesNamesArray();if("copy"===e[0])var g=a.uniqueName(d,f);else var g=a.uniqueName("copy-"+d,f);var h=a._pages.length,i=a._addPageNavItem(a,c,toPageName(g),h),j=new Page(g,h,this.main,"copy",b),k=j.getDOMSelf();a._pages.push(j),builder.setStep(function(){a._deletePage(a,i,k);var b=document.querySelector("aside.left nav li.active").id;a.selectionEditMode(b)})},_deletePage:function(a,b,c){var d=b.nextSibling,e=c.parentNode,f=c.nextSibling;if(c.classList.contains("spr-active-page"))if(f)a._setActivePage(a,f,d),document.title=a.getActivePageObject().getPageTitle();else{var g=c.previousSibling,h=b.previousSibling;a._setActivePage(a,g,h),document.title=a.getActivePageObject().getPageTitle()}var i=a._pages[c.dataset.id];c.classList.contains("spr-active-page")&&i.moveChildrenToHtmlDOM(c),delete a._pages[c.dataset.id],e.removeChild(c),b.parentNode.removeChild(b),a.setStep(function(){c.innerHTML="",f?e.insertBefore(c,f):e.appendChild(c);var g=1*c.dataset.id,h=void 0===a._pages[g]?1:0;a._pages.splice(g,h,i),controls.rebuildControl(c),a.listenerSectionsMouseDown(c),d.parentNode.insertBefore(b,d),b.classList.contains("active")&&(b.classList.remove("active"),c.classList.remove("active")),a.chengeActivePage(i,b,g);var j=document.querySelector("aside.left nav li.active").id;a.selectionEditMode(j),builder.setStep(function(){a._deletePage(a,b,c);var d=document.querySelector("aside.left nav li.active").id;a.selectionEditMode(d)})})},_setActivePage:function(a,b,c){var d=b.dataset.id;b.classList.add("spr-active-page"),a._idActivePage=d;var e=a._pages[d];e.extractContent(),c.classList.add("active"),controls.rebuildControl(b),a._refreshParallax(b),a._reloadMagnific(b),a.listenerSectionsMouseDown(b),a._reloadVideoBg(b,"run")},_addPageNavItem:function(a,b,c,d,e){var f=document.createElement("li");e=e||"index",c===e&&(f.className="active"),f.innerHTML="<span>"+firstUp(c)+'</span><div class="control-wrap"><i class="supra icon-equalizer"></i><i class="supra icon-copy"></i><i class="supra icon-trash2"></i></div>',f.dataset.id=d;var g=f.querySelector(".icon-equalizer"),h=f.querySelector(".icon-copy"),i=f.querySelector(".icon-trash2");return f.addEventListener("click",function(){if(!this.classList.contains("active")){var b=a._pages[d];a.chengeActivePage(b,this,d)}}),g.addEventListener("click",function(b){b.stopPropagation();var c=a._pages[d].getDOMSelf(),e=new Modal("supra-modal","PageSettings",{page:a._pages[c.dataset.id],pageItem:f});$(e).modal("show")}),h.addEventListener("click",function(b){b.stopPropagation();var c=a._pages[d];a._copyPage(a,c,f.nextSibling,replaceSpace(f.children[0].innerHTML.toLowerCase()));var e=a._controlPanel.ProjectPages.self.querySelectorAll("li"),g=e[e.length-1];a._pinBottom(a,g)}),i.addEventListener("click",function(b){if(b.stopPropagation(),"index"!==c){var e=a._pages[d].getDOMSelf();a._deletePage(a,f,e);var g=a._controlPanel.ProjectPages.self.querySelectorAll("li"),h=g[g.length-1];a._pinBottom(a,h)}}),b.parentNode.insertBefore(f,b),f},_pinBottom:function(a,b){var c=a._controlPanel.self.querySelector(".btn-ex-im-d").getBoundingClientRect().top,d=b.clientHeight,e=b.previousSibling.getBoundingClientRect().bottom+2*d+5;b.classList[e>c?"add":"remove"]("pin-bottom"),e>c?b.style.top=c-d+"px":b.style.top="auto"},_prepareContentPagesToSave:function(a){var b=this;builder.activeFormModal&&($(builder.activeFormModal).modal("hide"),builder.activeFormModal.style.display="none");var c=b.main.cloneNode(!0);b.clearControlElements(c);var d=JSON.stringify(b.sectionsName),e=JSON.stringify(b._pages),f=JSON.stringify(c.innerHTML),g=JSON.stringify(b.modalContainer.innerHTML),h=JSON.stringify(b.modalFormContainer.innerHTML),i=JSON.stringify(b.forms),j=JSON.stringify(b._videoBg),k=JSON.stringify(b._owlGallery),l=JSON.stringify(b._formSection),m=JSON.stringify(b._smooth),n=JSON.stringify(b._parallax),o=JSON.stringify(b.gMaps),p={sectionsName:d,pagesStorageObj:e,projectData:f,modalContainer:g,modalFormContainer:h,forms:i,video_bg:j,gallery:k,form_section:l,smooth:m,parallax:n,gMaps:o};p=JSON.stringify(p);try{"no-storage"!==a&&(delete window.localStorage.project,window.localStorage.project=p)}catch(a){}return p},getActivePageObject:function(){return this._pages[this._idActivePage]},getActivePageItem:function(a){var b=this._controlPanel.ProjectPages.self.querySelectorAll("ul li"),c=b[0];return Array.prototype.forEach.call(b,function(b){1*b.dataset.id===1*a&&(c=b)}),c},chengeActivePage:function(a,b,c){var d=this,e=a.getDOMSelf(),f=d.getActivePageObject(),g=f.getDOMSelf();e.classList.contains("spr-active-page")&&e.classList.remove("spr-active-page"),d.selection(e,"ul.spr-active-page","spr-active-page"),d._idActivePage=c,d.selection(b),f.moveChildrenToHtmlDOM(g),a.extractContent(),document.title=a.getPageTitle(),controls.rebuildControl(e),d._refreshParallax(e),d._reloadMagnific(e),d.listenerSectionsMouseDown(e),d._reloadVideoBg(e,"run")},getPagesArray:function(){return this._pages},getPagesNamesArray:function(){var a=[];return this._pages.forEach(function(b){a.push(replaceSpace(b.getPageName()))}),a},setPageItemsName:function(a,b){b.children[0].innerHTML=firstUp(a)},_setControlsElement:function(a,b){var c=this,d=a?"."+a+" > li, ":"",e=document.querySelectorAll(d+"#modal-form-container");Array.prototype.forEach.call(e,function(a){options.editElementsList.forEach(function(d){if(b===d.mode){var e=d.editType||"",f=" "+d.positionControl;Array.isArray(d.domIdentif)&&d.domIdentif.forEach(function(b){if(""!==b){var g=a.querySelectorAll(b);Array.prototype.forEach.call(g,function(g){if(g.className.search(/supra/i)===-1&&!g.classList.contains("upper-text")&&g.parentElement.className.search("buttons-control")===-1)if("nowrap"!==d.btnContlType){var h=c._createControlElements(d,b,e,f,a,g);window.innerWidth<=1024&&"edit-typography"!==d.mode&&(g.addEventListener("touchstart",c.elTouchDisable),g.addEventListener("touchend",c.elTouchDisable)),controls.correctingPosition(h,a)}else c._wrapEvventMouseEnterEditEelement=c._eventMouseEnterEditEelement.bind(c,a,d,f,g),g.addEventListener("mouseenter",c._wrapEvventMouseEnterEditEelement),
    c._arrListenersEditElement.push({el:g,func:c._wrapEvventMouseEnterEditEelement})})}})}}),c.stylingWrapParent(a)})},stylingWrapParent:function(a){var b=this,c=a.querySelectorAll(".buttons-control, .buttons-control-form");Array.prototype.forEach.call(c,function(a){var c=controls.findParent(a.parentElement.parentElement,["buttons-control","buttons-control-form"]);c&&(a.classList.add("child-event"),a.addEventListener("mouseenter",b._eventMoseEnterOnChildActive.bind(c)),a.addEventListener("mouseleave",b._evetnMoseLeaveOnChildActive.bind(c)))})},_eventMouseEnterEditEelement:function(a,b,c,d,e){var f=this;if(!f._triggerElementEnter){d.classList.add("outline-control");var g=controls.getGroupControl(b.controlsElement,d,"btn-group wrap-control-element"+c,null),h=d.getBoundingClientRect(),i=a.getBoundingClientRect(),j=h.top,k=h.bottom,l=h.left,m=h.right,n=i.top,o=i.left,p=j-n,q=l-o;g.style.top=p+"px",g.style.left=q+"px",g.style.display="block",g.style.opacity="1",a.appendChild(g);var r={first:function(a,b){return a.clientX>=b.right||a.clientY>=b.bottom||a.clientX<=b.left},second:function(a,b){return a.clientY<=b.top}},s=g.lastChild.getBoundingClientRect(),t=s.height,u=s.width;j-t<0&&(g.style.top=k-n+t,r={first:function(a,b){return a.clientX>=b.right||a.clientY<=b.top||a.clientX<=b.left},second:function(a,b){return a.clientY>=b.bottom}}),window.innerWidth<=l+u*g.children.length&&(g.style.left=m-o-u*g.children.length+"px"),f._triggerElementEnter=!0,f._wrapEvetMouseOutEditElement=f._evetMouseOutEditElement.bind(f,a,g,r,d),document.addEventListener("mouseout",f._wrapEvetMouseOutEditElement)}},_evetMouseOutEditElement:function(a,b,c,d,e){var f=this;if(f._triggerElementEnter){var g=d.getBoundingClientRect(),h={top:g.top,right:g.right,bottom:g.bottom,left:g.left};c.first(e,h)&&b?(d.classList.contains("outline-control")&&d.classList.remove("outline-control"),a.removeChild(b),f._triggerElementEnter=!1,document.removeEventListener("mouseout",f._wrapEvetMouseOutEditElement)):c.second(e,h)&&(f._triggerElementEnter=!1,document.removeEventListener("mouseout",f._wrapEvetMouseOutEditElement),f._wrapEvetMouseOutEditElement=function(b,c,d){var e=b.children[0].getBoundingClientRect(),g=e.top,h=b.lastChild.getBoundingClientRect().right,i=e.bottom,j=e.left;(d.clientY<=g||d.clientX>=h||d.clientY>=i||d.clientX<=j)&&(c.classList.contains("outline-control")&&c.classList.remove("outline-control"),a.removeChild(b),document.removeEventListener("mouseout",f._wrapEvetMouseOutEditElement))}.bind(f,b,d),document.addEventListener("mouseout",f._wrapEvetMouseOutEditElement))}},_createControlElements:function(a,b,c,d,e,f){var g=this,h=a.controlsElement,i=null,j=document.createElement("div");j.className="buttons-control"+c;var k=f;if(b.search(/img/)!==-1&&(f.addEventListener("load",function(){var a=f.getBoundingClientRect(),b=a.height,c=a.width;if((b<50||c<180)&&" flex-center"===d){var e=j.querySelector(".flex-center");e.classList.remove("flex-center"),e.classList.add("outside-top")}}),"A"===f.parentElement.nodeName&&(f=f.parentElement,k=f),f.parentElement.parentElement.classList.contains("owl-item")&&(i=e.children[0])),this._setPropertyForWrapper(f,j,a.editType),j.wrap(f),"I"!==f.tagName&&"IMG"!==f.tagName){f.style.width="100%";var l=controls.findParent(f,["owl-item"]);l&&f.classList.contains("item")&&(f.style.height=l.getBoundingClientRect().height+"px")}return"-typography"===a.editType&&"A"!==f.nodeName&&(i=new EditorText(f),g._arrEditorText.push({el:f,editor:i})),j.appendChild(controls.getGroupControl(h,k,"btn-group wrap-control-element"+d,i)),controls.findParent(f,["navbar-off-canvas"])&&j.querySelector(".wrap-control-element").classList.add("flex-wrap-control"),j},_setPropertyForWrapper:function(a,b,c){var d=this,e=window.getComputedStyle(a,null),f=e.getPropertyValue("display"),g=e.getPropertyValue("position"),h=e.getPropertyValue("margin-top"),i=e.getPropertyValue("margin-right"),j=e.getPropertyValue("margin-bottom"),k=e.getPropertyValue("margin-left");if(b.style.marginTop=h,b.style.marginRight=i,b.style.marginBottom=j,b.style.marginLeft=k,a.classList.contains("aos-init")||(a.style.transition="all 0s ease 0s"),a.style.margin=0,b.style.display="inline"!==f?f:"inline-block","IMG"===a.nodeName&&(b.style.display="inline-block"),a.className.search(/half-container/)!==-1&&(a.style.height="100%"),"static"===g){var l=window.getComputedStyle(a,null),m=l.getPropertyValue("float"),n=b.getAttribute("style");b.setAttribute("style",n+"float: "+m+";")}else a.parentElement.className.search(/buttons-control.*/i)!==-1||a.classList.contains("g-map")?a.parentElement.className.search(/buttons-control.*/i)===-1&&a.classList.contains("g-map")&&/half-container-[^\s]/i.test(a.className)&&(d.setPosition(a,b,g,1),a.style.position="relative",a.style.left="0"):(d.setPosition(a,b,g,1),a.style.position="static");"inline"!==f&&"inline-block"!==f||("A"===a.nodeName||"I"===a.nodeName&&!c?a.style.display="block":a.style.display="inline-block",a.style.minWidth="I"===a.nodeName?"none":"15px")},setPosition:function(a,b,c,d){var e=window.getComputedStyle(a,null),f=e.getPropertyValue("top"),g=e.getPropertyValue("right"),h=e.getPropertyValue("bottom"),i=e.getPropertyValue("left"),j=e.getPropertyValue("float");b.style.position=c,b.style.top=f,b.style.right=g,b.style.bottom=h,b.style.left=i,b.style.zIndex=d;var k=b.getAttribute("style");b.setAttribute("style",k+"float: "+j+";")},clearControlElements:function(a){var b=this,c=a.querySelectorAll(".buttons-control, .buttons-control-form, .buttons-control-typography, .buttons-control-icons");Array.prototype.forEach.call(c,function(a){b.clearEditElement(a)}),b._arrEditorText.length>0&&b._arrEditorText.forEach(function(a){a.el.removeEventListener("mouseenter",a.editor.mouseEnter),a.el.parentElement.removeEventListener("click",a.editor.clickIngalleryEditTagA),a.el.removeEventListener("mouseup",a.editor.mouseUp),a.el.removeEventListener("touchend",a.editor.touchEnd),a.el.removeEventListener("keydown",a.editor.keyDown),a.el.removeEventListener("mouseleave",a.editor.mouseLeave),a.el.removeEventListener("paste",a.editor.paste)}),b._arrListenersEditElement.length>0&&b._arrListenersEditElement.forEach(function(a){a.el.removeEventListener("mouseenter",a.func)});var d=a.querySelectorAll(".g-map");d&&Array.prototype.forEach.call(d,function(a){var c=controls.findParent(a,["section-item"]);a.innerHTML="",a.removeAttribute("style"),b.reloadScript(c)}),b._arrEditorText=[],b._arrListenersEditElement=[]},clearEditElement:function(a){var b=a.lastChild;a.children[0].removeEventListener("touchstart",this.elTouchDisable),a.children[0].removeAttribute("style"),a.removeChild(b),a.unWrapOne()},elTouchDisable:function(a){"touchstart"===a.type?builder._dropY=a.changedTouches[0].pageY:"touchend"===a.type&&builder._dropY===a.changedTouches[0].pageY&&a.preventDefault()},_callNewProject:function(){var a=this._controlPanel.ProjectPages.self.querySelector(".new-project");a.addEventListener("click",function(){var a=new Modal("supra-modal","DeleteProject",null);$(a).modal("show")})},createNewProject:function(){for(var a=this,b=document.createDocumentFragment();a.main.children[0];)b.appendChild(a.main.children[0]);a.main.innerHTML="<style></style>";for(var c=a.cloneObject(a._pages),d=this._controlPanel.ProjectPages.self.querySelector("ul"),e=d.querySelectorAll("li"),f=0;f<e.length-1;f++)e[f].parentNode.removeChild(e[f]);a._pages=[],a.forms={},a.sectionsName=[],a.gMaps=[],a.arrayFontsOnProject=[],a._idActivePage=0,a._pages.push(new Page("index",0,a.main)),a._pages[a._idActivePage].getDOMSelf().classList.add("edit-sections"),a._pages[a._idActivePage].getDOMSelf().classList.add("spr-active-page"),a._pages[a._idActivePage].getDOMSelf().classList.add("light-page"),a.main.children[0].innerHTML="",a._style.html=a.main.children[0],Array.prototype.forEach.call(a._controlPanel.style.ul,function(a){a.innerHTML=""}),a._addProjectPagesToRightSide(),a._initStyle();var g=a.main.querySelectorAll(".sp-container");Array.prototype.forEach.call(g,function(a){a.parentElement.removeChild(a)}),a._initTypography(),document.title=a.getActivePageObject().getPageTitle(),a.setStep(function(){a.main.innerHTML="",a.main.appendChild(b),a._pages=c,a.setStep(function(){a.createNewProject()})})},_callExport:function(){var a=this,b=this._controlPanel.ProjectPages.self.querySelector(".export");b.addEventListener("click",function(){if(!a._triggerExport&&(a._triggerExport=!0,a.sectionsName.length>0)){var b=a._prepareContentPagesToSave(),c=new FormData;c.append("data",b),a.ajax(c,"export",function(b){var b=JSON.parse(b);window.downloadFile(baseUri+"tmp/"+b.file,b.file),setTimeout(function(){a._triggerExport=!1},2e3)})}})},_callImport:function(){var a=this,b=this._controlPanel.ProjectPages.self.querySelector(".import");b.addEventListener("click",function(){if(!a._triggerImport){a._triggerImport=!0;var b=document.createElement("input");b.setAttribute("type","file"),b.setAttribute("name","data"),b.style.display="none",document.body.appendChild(b),b.addEventListener("change",function(){if(b.files&&b.files[0]){var c=b.files[0].name,d=new FormData;d.append("data",b.files[0]),d.append("name_file",c),a.ajax(d,"import",function(c){var d=a._prepareContentPagesToSave("no-storage");a._loadProject(c,"load"),document.body.removeChild(b),builder.setStep(function(){a._loadProject(d,"import")})})}}),b.click(),setTimeout(function(){a._triggerImport=!1},2e3)}})},_loadProject:function(a,b){var c=this,a=JSON.parse(a),d=JSON.parse(a.pagesStorageObj),e=JSON.parse(a.projectData),f=JSON.parse(a.modalContainer),g=JSON.parse(a.modalFormContainer),h=a.forms?JSON.parse(a.forms):[],i=a.gMaps?JSON.parse(a.gMaps):[];c.sectionsName=JSON.parse(a.sectionsName),c._videoBg=JSON.parse(a.video_bg),c._owlGallery=JSON.parse(a.gallery),c._formSection=JSON.parse(a.form_section),c._smooth=JSON.parse(a.smooth),c._parallax=JSON.parse(a.parallax),c.triggerImport=!0;var j="edit-sections";if("load"===b&&(j="edit-project-page"),"import"===b){j="edit-project-page";var k=c._prepareContentPagesToSave("no-storage");builder.setStep(function(){c._loadProject(k,"import")})}c.main.innerHTML="","string"==typeof e?c.main.innerHTML=e:c.main.appendChild(e);var l=c.main.querySelectorAll("ul.spr-active-page > li"),m=2*l.length;loadPreloader.style.transition="width "+m/2+"s ease-out",loadPreloader.style.width="100%",setTimeout(function(){removePreloader()},500*m),c.clearGalleryOnPage(c.main);for(var n=this._controlPanel.ProjectPages.self.querySelector("ul"),o=n.querySelectorAll("li"),p=0;p<o.length-1;p++)o[p].parentNode.removeChild(o[p]);var q=c.main.parentElement.querySelectorAll(".main > ul"),r=c.main.parentElement.querySelector(".main > ul.spr-active-page");c._pages=[],d=d.filter(function(a){return a}),c._style.html=c.main.children[0],Array.prototype.forEach.call(q,function(a,b){for(var e=0;d[e].id!==1*a.dataset.id;)e++;var f=d[e];c._pages.push(new Page(a.dataset.name,c._pages.length,c.main,"load"));var g=c._pages[b];c._stopFormValidation(a),g.setPageTitle(f._title,!0),g.setMetaDes(f._metaDes,!0),g.setMetaKey(f._metaKey,!0),g.setJs(f._metaJs,!0),g.preloader=f.preloader,g.sections=f.sections,g.html=f.html,c._reloadVideoBg(a)}),c.modalContainer.innerHTML=f,c.modalFormContainer.innerHTML=g,c.forms=h,c.gMaps=i,c.reloadScript(r),controls.rebuildControl(r),c._chengePageMode(r,j),c.listenerSectionsMouseDown(r),c._clearNavigation(r),c._idActivePage=r.dataset.id,c._addProjectPagesToRightSide(),c._style.html=c.main.children[0],c._loadStyle(),c._loadTypography(),c._reloadMagnific(r),setTimeout(function(){c._refreshParallax(r)},1e3),document.title=c.getActivePageObject().getPageTitle(),c.triggerImport=!1},_callDownload:function(){var a=this,b=this._controlPanel.ProjectPages.self.querySelector(".download");b.addEventListener("click",function(){if("function"==typeof download)download(a);else{var c=new Modal("supra-modal","Demo",b);$(c).modal("show")}})},_findElForOptions:function(a){var b=this,c=a.querySelectorAll(".bg-video, .spr-gallery, form, .parallax, .single-iframe-popup, .smooth, .spr-magnific, [data-aos]");Array.prototype.forEach.call(c,function(a){a.classList.contains("bg-video")&&(b._videoBg=!0),a.classList.contains("spr-gallery")&&(b._owlGallery=!0),"FORM"===a.tagName&&(b._formSection=!0),a.classList.contains("parallax")&&(b._parallax=!0),a.classList.contains("smooth")&&(b._smooth=!0),(a.classList.contains("single-iframe-popup")||a.classList.contains("spr-magnific"))&&(b._magnific=!0,b._setMagnificScript(!0)),a.dataset.aos&&(b._aos=!0)})},_resetIndExist:function(){this._videoBg=!1,this._owlGallery=!1,this._formSection=!1,this._parallax=!1,this._smooth=!1,this._magnific=!1,this._setMagnificScript(!1)},_setMagnificScript:function(a){a?this._magnificScript="\n$('.single-iframe-popup').magnificPopup({\n\ttype: 'iframe',\n\tiframe: {\n\t\tpatterns: {\n\t\t\tyoutube: {\n\t\t\t\tindex: 'www.youtube.com/',\n\t\t\t\tid: 'v=',\n\t\t\t\tsrc: 'https://www.youtube.com/embed/%id%?autoplay=1'\n\t\t\t}\n\t\t\t, vimeo: {\n\t\t\t\tindex: 'vimeo.com/',\n\t\t\t\tid: '/',\n\t\t\t\tsrc: 'https://player.vimeo.com/video/%id%?autoplay=1'\n\t\t\t}\n\t\t}\n\t}\n});":this._magnificScript=""},_reloadMagnific:function(a){var b=this,c=a.querySelectorAll(".single-iframe-popup");c&&Array.prototype.forEach.call(c,function(a){b.applyMagnificPopup(a)})},_reloadVideoBg:function(a,b){var c=a.querySelectorAll(".bg-video");c&&Array.prototype.forEach.call(c,function(a,c){if("run"===b)$(a).data("vide")&&$(a).data("vide").destroy(),a.innerHTML="",$(a).vide();else if("reload"===b){var d=a.querySelector("video");d.paused&&d.play()}else"clear"===b&&(a.innerHTML="")})},_selectionNavUndo:function(){var a=this;a._undo.addEventListener("click",function(){var b=a.arrayPrevStep.length-1;b!==-1&&(a.triggerUndo=!0,a.arrayPrevStep[b](),a.arrayPrevStep=a.arrayPrevStep.slice(0,b),0!==a.arrayPrevStep.length||a._undo.classList.contains("unactive")||a._undo.classList.add("unactive"))})},_selectionNavRedo:function(){var a=this;a._redo.addEventListener("click",function(){var b=a.arrayNextStep.length-1;b!==-1&&(a.triggerRedo=!0,a.arrayNextStep[b](),a.arrayNextStep=a.arrayNextStep.slice(0,b),0!==a.arrayNextStep.length||a._redo.classList.contains("unactive")||a._redo.classList.add("unactive"))})},setStep:function(a){this.triggerUndo?(this.arrayNextStep.push(a),this._redo.classList.contains("unactive")&&this._redo.classList.remove("unactive")):(this.triggerRedo||(this.arrayNextStep=[]),this.arrayPrevStep.push(a),this.arrayPrevStep.length>20&&this.arrayPrevStep.shift(),this._undo.classList.contains("unactive")&&this._undo.classList.remove("unactive"),this.arrayNextStep.length<1&&this._redo.classList.add("unactive")),this.triggerUndo=!1,this.triggerRedo=!1},cloneOwlGallery:function(a){var b=a.cloneNode(!0),c=b.querySelector(".spr-gallery");if(c){var d=c.cloneNode(!0);this.removeOwlSuperstructure(d),c.parentNode.insertBefore(d,c),c.parentNode.removeChild(c),a.parentNode.insertBefore(b,a.nextSibling)}return b},clearGalleryOnPage:function(a){var b=this,c=a.querySelectorAll(".spr-gallery");Array.prototype.forEach.call(c,function(a){b.removeOwlSuperstructure(a)})},removeOwlSuperstructure:function(a){a.classList.remove("owl-carousel"),a.classList.remove("owl-theme"),a.classList.remove("owl-loaded");var b=a.querySelectorAll(".owl-item:not(.cloned) .item");a.innerHTML="",Array.prototype.forEach.call(b,function(b){a.appendChild(b)})},reloadScript:function(a){var b=a.querySelectorAll("script");Array.prototype.forEach.call(b,function(a){var b=a.innerHTML,c=document.createElement("script");c.setAttribute("type","text/javascript");var d=a.nextSibling,e=a.parentElement;e.removeChild(a),d?e.insertBefore(c,d):e.appendChild(c),c.innerHTML=b});var c=a.querySelectorAll("a.smooth");Array.prototype.forEach.call(c,function(a){$(a).smoothScroll({speed:800})})},_refreshParallax:function(a){var b=this,c=a.querySelectorAll(".parallax-bg");skr&&c&&(Array.prototype.forEach.call(c,function(a){b._clearParallaxSuperstructure(a)}),skr.refresh())},_clearParallaxSuperstructure:function(a){var b=a.querySelectorAll(".parallax-bg");Array.prototype.forEach.call(b,function(a){a.classList.remove("skrollable"),a.classList.remove("skrollable-between"),a.removeAttribute("style")})},_clearNavigation:function(a){var b=a.querySelector("nav");b&&(b.classList.contains("show-menu")&&b.classList.remove("show-menu"),b.className.search(/navbar-fixed-top nav-start-hide-bg nav-start-double-pad/)!==-1&&(window.section=b,window.addEventListener("scroll",builder.listenerSrcollTopForNav)),setTimeout(function(){var a=1;b.className.search(/nav-start-double-pad/)!==-1&&(a=3);var c=b.getBoundingClientRect().height*a;b.parentElement.style.height=c+"px"},500))},_stopFormValidation:function(a){var b=a.querySelectorAll("form");Array.prototype.forEach.call(b,function(a){a.querySelector("button[type=submit]").addEventListener("click",function(a){return a.stopPropagation(),a.preventDefault(),a.stopImmediatePropagation(),!1})})},listenerSrcollTopForNav:function(){window.scrollY>180?window.section.parentElement.style.height="60px":window.section.parentElement.style.height="180px"},_clearOptionClasses:function(a){var b=a.querySelectorAll("[class*=spr-], [class*=aos-]");Array.prototype.forEach.call(b,function(a){a.className.match(/(\s?spr-[^\s]*)+/i)&&(a.className=a.className.replace(/(\s?spr-[^\s]*)+/gi,"").trim(),""===a.className&&a.removeAttribute("class")),a.className.match(/(\s?aos-[^\s]*)+/i)&&(a.className=a.className.replace(/(\s?aos-[^\s]*)+/gi,"").trim(),""===a.className&&a.removeAttribute("class"))})},uniqueName:function(a,b){return b=b.sort(function(a,b){return a.split("--")[1]&&b.split("--")[1]&&1*a.split("--")[1]>1*b.split("--")[1]?1:a.split("--")[1]&&b.split("--")[1]&&1*a.split("--")[1]<1*b.split("--")[1]?-1:a>b?1:a<b?-1:0}),b.forEach(function(b){var c=a.split("--");c[1]&&b===a?a=c[0]+"--"+(1*c[1]+1):b===a&&(a=c[0]+"--0")}),a},applyMagnificPopup:function(a){var b=this;if("A"!==a.tagName&&(a=a.parentElement),"A"===a.tagName&&a.href.search(/player\.vimeo\.com|embed/i)===-1&&a.href.search(/vimeo\.com|youtube\.com/i)!==-1){a.classList.contains("single-iframe-popup")||a.classList.add("single-iframe-popup"),a.classList.contains("smooth")&&a.classList.remove("smooth"),$(a).magnificPopup({type:"iframe",key:"video-key",iframe:{patterns:{youtube:{index:"www.youtube.com/",id:"v=",src:"https://www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"https://player.vimeo.com/video/%id%?autoplay=1"}}},disableOn:function(){return!b.editingText}});var c=controls.findParent(a,["section-item"]),d=c.querySelector("script");d.innerHTML.search(/\/\/magnific/im)===-1&&(d.innerHTML+="\n//magnific\n//------------------------------------------------------------------------\n//                    MAGNIFIC POPUP(LIGHTBOX) SETTINGS\n//------------------------------------------------------------------------\n\n$('.single-iframe-popup').magnificPopup({\n\ttype: 'iframe'\n//delete\n,disableOn: function() {if(builder.editingText) {return false;}return true;}\n//deleteend\n});\n//magnificend")}},applyMagnificPopupImage:function(a){var b=this;if("A"!==a.tagName&&(a=a.parentElement),"A"===a.tagName&&a.href.search(/\.(png|jpg|jpeg|gif|svg)/i)!==-1){a.classList.contains("single-image-popup")||a.classList.add("single-image-popup"),a.classList.contains("smooth")&&a.classList.remove("smooth"),$(a).magnificPopup({type:"image",key:"some-key",disableOn:function(){return!b.editingText}});var c=controls.findParent(a,["section-item"]),d=c.querySelector("script");d.innerHTML.search(/\/\/magnific/im)===-1&&(d.innerHTML+="\n//magnific\n//------------------------------------------------------------------------\n//                    MAGNIFIC POPUP(LIGHTBOX) SETTINGS\n//------------------------------------------------------------------------\n\n$('.single-image-popup').magnificPopup({\n\ttype: 'image'\n//delete\n,disableOn: function() {if(builder.editingText) {return false;}return true;}\n//deleteend\n});\n//magnificend")}},addNewForm:function(a,b,c){var d=c?"#"+c+"-form":"\\.(?:contact|subscribe)_form";a.id=b.id+"-form",this.forms[b.id]={};var e=b.parentElement.querySelector("script"),f=new RegExp(d,"img");e.innerHTML=e.innerHTML.replace(f,"#"+b.id+"-form"),a.querySelector("button[type=submit]").addEventListener("click",function(a){a.stopPropagation(),a.preventDefault()})},addNewGMap:function(a,b){var c=b.id.split("--")[0]+"-map";return c=this.uniqueName(c,this.gMaps),a.id=c,this.gMaps.push(c),c},changeIdGMapInScript:function(a,b,c){c=c||b;var d=c.replace(/-/gi,"_"),e=b.replace(/-/gi,"_"),f=new RegExp("(google\\.maps\\.Map\\(document\\.getElementById\\(')(?:"+b+"|map)","im"),g=new RegExp("(initialize)(?:_"+e+"\\s*\\(|\\s*\\()","img");a.innerHTML=a.innerHTML.replace(g,"$1_"+d+"("),a.innerHTML=a.innerHTML.replace(f,"$1"+c)},copyFunctionInitGmap:function(a,b,c){var d=c.replace(/-/gi,"_"),e=b.replace(/-/gi,"_"),f=d+"\\([\\s\\S]*?",g="[\\s\\S]*?"+d+"\\(",h=new RegExp("(initialize)(_"+e+".*{)([\\s\\S]*?)(initialize)(_"+e+".*)(\\(\\);)","im"),i=a.innerHTML.match(h);a.innerHTML=a.innerHTML.replace(h,"$1$2$3$4$5$6\n\nfunction "+i[1]+"_"+d+"() {\n"+i[3]+i[4]+"_"+d+i[6]);var j=new RegExp("("+f+"google\\.maps\\.Map\\(document\\.getElementById\\(')[^']*("+g+")","im");a.innerHTML=a.innerHTML.replace(j,"$1"+c+"$2")},deleteFunctionInitGmap:function(a,b){var c=b.replace(/-/gi,"_"),d=c+"\\([\\s\\S]*?",e=c+"\\(\\);",f=new RegExp("function[\\w\\s]*"+d+e,"im"),g=a.innerHTML.match(f);return a.innerHTML=a.innerHTML.replace(f,""),g},count:0,cloneObject:function(a){var b=this;if(this.count++,a instanceof Array){var c=[];a.forEach(function(a,d){c[d]=b._checkElmtsForCloneObj(b,a)})}else{var c={};for(var d in a)c[d]=b._checkElmtsForCloneObj(b,a[d])}return c},_checkElmtsForCloneObj:function(a,b){var c=null;return c=b instanceof HTMLElement||b instanceof DocumentFragment?b:b instanceof Array?cloneArray(b):b&&"object"==typeof b?a.cloneObject(b):b},replaceQuotes:function(a){return a.replace(/['"]+/gi,"")},_messageBox:function(){var a=document.querySelector(".message");a.querySelector("i").addEventListener("click",function(){a.parentElement.removeChild(a)})},removeWrapDrag:function(){var a=this,b=a.getActivePageObject().getDOMSelf(),c=document.querySelector(".wrap-drag");c&&(b.removeChild(c),b.classList.remove("loading"))},addWrapDrag:function(){var a=this.getActivePageObject().getDOMSelf();a.classList.add("loading"),a.innerHTML='<div class="wrap-drag flex-center"><p><i class="icon-reply"></i>Start creating pages by dragging/clicking sections from the left panel</p></div>'},_hideSections:function(a){a._controlPanel.sections.self.classList.remove("show"),document.body.classList.add("add-s-i-hide"),setTimeout(function(){document.body.classList.contains("add-s-i-hide")&&document.body.classList.remove("add-s-i-hide")},800)},detectLeftButton:function(a){if(a=a||window.event,"buttons"in a)return 1==a.buttons;var b=a.which||a.button;return 1==b},ajax:function(a,b,c){var d=new XMLHttpRequest,e="POST",f=baseUri+"ajax.php?mode="+b;d.open(e,f,!0),d.onreadystatechange=function(){if(4===this.readyState)if(200==d.status)c&&c(d.responseText);else{var a="There was a problem with the request "+d.status;alert(a)}},d.send(a)}};var loadPreloader=document.querySelector(".progress .load"),baseUri=location.protocol+"//"+location.hostname+location.pathname,builder=null,skr=null;document.addEventListener("DOMContentLoaded",function(){builder=new Suprabuilder,navigator.userAgent.match(/iPhone|iPad|iPod|Android|BlackBerry|IEMobile/)||(skr=skrollr.init({smoothScrolling:!1,forceHeight:!1,mobileDeceleration:.004}))}),window.addEventListener("load",function(){setTimeout(function(){$("aside.control-panel").niceScroll({cursorcolor:"#555555",cursorborder:"1px solid #555555",autohidemode:"scroll",hidecursordelay:0}),$("aside.add-sections-items").niceScroll({cursorcolor:"#555555",cursorborder:"1px solid #555555",autohidemode:"scroll",hidecursordelay:0})},1600),window.localStorage.project||(loadPreloader.style.width="100%",removePreloader())}),window.downloadFile=function(a,b){if(window.downloadFile.isChrome||window.downloadFile.isSafari){var c=document.createElement("a");if(c.href=a,void 0!==c.download&&(c.download=b),document.createEvent){var d=document.createEvent("MouseEvents");return d.initEvent("click",!0,!0),c.dispatchEvent(d),!0}}else{var e="?download";window.open(a+e)}},window.downloadFile.isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")!=-1,window.downloadFile.isSafari=navigator.userAgent.toLowerCase().indexOf("safari")!=-1,HTMLElement.prototype.wrap=function(a){var b=this,c=a.parentNode,d=a.nextSibling;b.appendChild(a),d?c.insertBefore(b,d):c.appendChild(b)},HTMLElement.prototype.unWrapOne=function(a){var b=this.children[0],c=this.parentElement,d=this.nextSibling;try{b.hasAttribute("style")&&"save-style"!==a&&b.removeAttribute("style")}catch(a){console.log(this,b)}d?c.insertBefore(b,d):c.appendChild(b),c.removeChild(this)},function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}();